{"version":3,"file":"static/5926.a8da272e.chunk.js","mappings":"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","sources":["webpack://plugin-web-rca/./node_modules/@backstage/config/dist/index.esm.js","webpack://plugin-web-rca/./node_modules/@backstage/core-plugin-api/dist/alpha.esm.js","webpack://plugin-web-rca/./node_modules/i18next/dist/esm/i18next.js","webpack://plugin-web-rca/./node_modules/@backstage/core-app-api/dist/index.esm.js","webpack://plugin-web-rca/./node_modules/lodash/mergeWith.js","webpack://plugin-web-rca/./node_modules/react-use/lib/misc/util.js","webpack://plugin-web-rca/./node_modules/react-use/lib/useIsomorphicLayoutEffect.js","webpack://plugin-web-rca/./node_modules/react-use/lib/useObservable.js","webpack://plugin-web-rca/./node_modules/zen-observable/index.js","webpack://plugin-web-rca/./node_modules/zen-observable/lib/Observable.js"],"sourcesContent":["import { InputError } from '@backstage/errors';\nimport cloneDeep from 'lodash/cloneDeep';\nimport mergeWith from 'lodash/mergeWith';\n\nconst propsOfHumanDuration = [\n  \"years\",\n  \"months\",\n  \"weeks\",\n  \"days\",\n  \"hours\",\n  \"minutes\",\n  \"seconds\",\n  \"milliseconds\"\n];\nfunction readDurationFromConfig(config, options) {\n  let root;\n  let found = false;\n  const result = {};\n  try {\n    root = (options == null ? void 0 : options.key) ? config.getConfig(options.key) : config;\n    for (const prop of propsOfHumanDuration) {\n      const value = root.getOptionalNumber(prop);\n      if (value !== void 0) {\n        result[prop] = value;\n        found = true;\n      }\n    }\n  } catch (error) {\n    throw new InputError(`Failed to read duration from config, ${error}`);\n  }\n  try {\n    if (!found) {\n      const good = propsOfHumanDuration.map((p) => `'${p}'`).join(\", \");\n      throw new Error(`Needs one or more of ${good}`);\n    }\n    const invalidProps = root.keys().filter((prop) => !propsOfHumanDuration.includes(prop));\n    if (invalidProps.length) {\n      const what = invalidProps.length === 1 ? \"property\" : \"properties\";\n      const bad = invalidProps.map((p) => `'${p}'`).join(\", \");\n      const good = propsOfHumanDuration.map((p) => `'${p}'`).join(\", \");\n      throw new Error(\n        `Unknown ${what} ${bad}; expected one or more of ${good}`\n      );\n    }\n  } catch (error) {\n    let prefix = \"Failed to read duration from config\";\n    if (options == null ? void 0 : options.key) {\n      prefix += ` at '${options.key}'`;\n    }\n    throw new InputError(`${prefix}, ${error}`);\n  }\n  return result;\n}\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst CONFIG_KEY_PART_PATTERN = /^[a-z][a-z0-9]*(?:[-_][a-z][a-z0-9]*)*$/i;\nfunction isObject(value) {\n  return typeof value === \"object\" && value !== null && !Array.isArray(value);\n}\nfunction typeOf(value) {\n  if (value === null) {\n    return \"null\";\n  } else if (Array.isArray(value)) {\n    return \"array\";\n  }\n  const type = typeof value;\n  if (type === \"number\" && isNaN(value)) {\n    return \"nan\";\n  }\n  if (type === \"string\" && value === \"\") {\n    return \"empty-string\";\n  }\n  return type;\n}\nconst errors = {\n  type(key, context, typeName, expected) {\n    return `Invalid type in config for key '${key}' in '${context}', got ${typeName}, wanted ${expected}`;\n  },\n  missing(key) {\n    return `Missing required config value at '${key}'`;\n  },\n  convert(key, context, expected) {\n    return `Unable to convert config value for key '${key}' in '${context}' to a ${expected}`;\n  }\n};\nclass ConfigReader {\n  constructor(data, context = \"mock-config\", fallback, prefix = \"\") {\n    this.data = data;\n    this.context = context;\n    this.fallback = fallback;\n    this.prefix = prefix;\n    /**\n     * A set of key paths that where removed from the config due to not being visible.\n     *\n     * This was added as a mutable private member to avoid changes to the public API.\n     * Its only purpose of this is to warn users of missing visibility when running\n     * the frontend in development mode.\n     */\n    __publicField(this, \"filteredKeys\");\n    __publicField(this, \"notifiedFilteredKeys\", /* @__PURE__ */ new Set());\n  }\n  /**\n   * Instantiates the config reader from a list of application config objects.\n   */\n  static fromConfigs(configs) {\n    if (configs.length === 0) {\n      return new ConfigReader(void 0);\n    }\n    return configs.reduce(\n      (previousReader, { data, context, filteredKeys, deprecatedKeys }) => {\n        const reader = new ConfigReader(data, context, previousReader);\n        reader.filteredKeys = filteredKeys;\n        if (deprecatedKeys) {\n          for (const { key, description } of deprecatedKeys) {\n            console.warn(\n              `The configuration key '${key}' of ${context} is deprecated and may be removed soon. ${description || \"\"}`\n            );\n          }\n        }\n        return reader;\n      },\n      void 0\n    );\n  }\n  /** {@inheritdoc Config.has} */\n  has(key) {\n    var _a, _b;\n    const value = this.readValue(key);\n    if (value !== void 0) {\n      return true;\n    }\n    return (_b = (_a = this.fallback) == null ? void 0 : _a.has(key)) != null ? _b : false;\n  }\n  /** {@inheritdoc Config.keys} */\n  keys() {\n    var _a, _b;\n    const localKeys = this.data ? Object.keys(this.data) : [];\n    const fallbackKeys = (_b = (_a = this.fallback) == null ? void 0 : _a.keys()) != null ? _b : [];\n    return [.../* @__PURE__ */ new Set([...localKeys, ...fallbackKeys])];\n  }\n  /** {@inheritdoc Config.get} */\n  get(key) {\n    const value = this.getOptional(key);\n    if (value === void 0) {\n      throw new Error(errors.missing(this.fullKey(key != null ? key : \"\")));\n    }\n    return value;\n  }\n  /** {@inheritdoc Config.getOptional} */\n  getOptional(key) {\n    var _a, _b;\n    const value = cloneDeep(this.readValue(key));\n    const fallbackValue = (_a = this.fallback) == null ? void 0 : _a.getOptional(key);\n    if (value === void 0) {\n      if (process.env.NODE_ENV === \"development\") {\n        if (fallbackValue === void 0 && key) {\n          const fullKey = this.fullKey(key);\n          if (((_b = this.filteredKeys) == null ? void 0 : _b.includes(fullKey)) && !this.notifiedFilteredKeys.has(fullKey)) {\n            this.notifiedFilteredKeys.add(fullKey);\n            console.warn(\n              `Failed to read configuration value at '${fullKey}' as it is not visible. See https://backstage.io/docs/conf/defining#visibility for instructions on how to make it visible.`\n            );\n          }\n        }\n      }\n      return fallbackValue;\n    } else if (fallbackValue === void 0) {\n      return value;\n    }\n    return mergeWith(\n      {},\n      { value: fallbackValue },\n      { value },\n      (into, from) => !isObject(from) || !isObject(into) ? from : void 0\n    ).value;\n  }\n  /** {@inheritdoc Config.getConfig} */\n  getConfig(key) {\n    const value = this.getOptionalConfig(key);\n    if (value === void 0) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n  /** {@inheritdoc Config.getOptionalConfig} */\n  getOptionalConfig(key) {\n    var _a;\n    const value = this.readValue(key);\n    const fallbackConfig = (_a = this.fallback) == null ? void 0 : _a.getOptionalConfig(key);\n    if (isObject(value)) {\n      return this.copy(value, key, fallbackConfig);\n    }\n    if (value !== void 0) {\n      throw new TypeError(\n        errors.type(this.fullKey(key), this.context, typeOf(value), \"object\")\n      );\n    }\n    return fallbackConfig;\n  }\n  /** {@inheritdoc Config.getConfigArray} */\n  getConfigArray(key) {\n    const value = this.getOptionalConfigArray(key);\n    if (value === void 0) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n  /** {@inheritdoc Config.getOptionalConfigArray} */\n  getOptionalConfigArray(key) {\n    var _a;\n    const configs = this.readConfigValue(key, (values) => {\n      if (!Array.isArray(values)) {\n        return { expected: \"object-array\" };\n      }\n      for (const [index, value] of values.entries()) {\n        if (!isObject(value)) {\n          return { expected: \"object-array\", value, key: `${key}[${index}]` };\n        }\n      }\n      return true;\n    });\n    if (!configs) {\n      if (process.env.NODE_ENV === \"development\") {\n        const fullKey = this.fullKey(key);\n        if (((_a = this.filteredKeys) == null ? void 0 : _a.some((k) => k.startsWith(fullKey))) && !this.notifiedFilteredKeys.has(key)) {\n          this.notifiedFilteredKeys.add(key);\n          console.warn(\n            `Failed to read configuration array at '${key}' as it does not have any visible elements. See https://backstage.io/docs/conf/defining#visibility for instructions on how to make it visible.`\n          );\n        }\n      }\n      return void 0;\n    }\n    return configs.map((obj, index) => this.copy(obj, `${key}[${index}]`));\n  }\n  /** {@inheritdoc Config.getNumber} */\n  getNumber(key) {\n    const value = this.getOptionalNumber(key);\n    if (value === void 0) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n  /** {@inheritdoc Config.getOptionalNumber} */\n  getOptionalNumber(key) {\n    const value = this.readConfigValue(\n      key,\n      (val) => typeof val === \"number\" || typeof val === \"string\" || { expected: \"number\" }\n    );\n    if (typeof value === \"number\" || value === void 0) {\n      return value;\n    }\n    const number = Number(value);\n    if (!Number.isFinite(number)) {\n      throw new Error(\n        errors.convert(this.fullKey(key), this.context, \"number\")\n      );\n    }\n    return number;\n  }\n  /** {@inheritdoc Config.getBoolean} */\n  getBoolean(key) {\n    const value = this.getOptionalBoolean(key);\n    if (value === void 0) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n  /** {@inheritdoc Config.getOptionalBoolean} */\n  getOptionalBoolean(key) {\n    const value = this.readConfigValue(\n      key,\n      (val) => typeof val === \"boolean\" || typeof val === \"number\" || typeof val === \"string\" || { expected: \"boolean\" }\n    );\n    if (typeof value === \"boolean\" || value === void 0) {\n      return value;\n    }\n    const valueString = String(value).trim();\n    if (/^(?:y|yes|true|1|on)$/i.test(valueString)) {\n      return true;\n    }\n    if (/^(?:n|no|false|0|off)$/i.test(valueString)) {\n      return false;\n    }\n    throw new Error(errors.convert(this.fullKey(key), this.context, \"boolean\"));\n  }\n  /** {@inheritdoc Config.getString} */\n  getString(key) {\n    const value = this.getOptionalString(key);\n    if (value === void 0) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n  /** {@inheritdoc Config.getOptionalString} */\n  getOptionalString(key) {\n    return this.readConfigValue(\n      key,\n      (value) => typeof value === \"string\" && value !== \"\" || { expected: \"string\" }\n    );\n  }\n  /** {@inheritdoc Config.getStringArray} */\n  getStringArray(key) {\n    const value = this.getOptionalStringArray(key);\n    if (value === void 0) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n  /** {@inheritdoc Config.getOptionalStringArray} */\n  getOptionalStringArray(key) {\n    return this.readConfigValue(key, (values) => {\n      if (!Array.isArray(values)) {\n        return { expected: \"string-array\" };\n      }\n      for (const [index, value] of values.entries()) {\n        if (typeof value !== \"string\" || value === \"\") {\n          return { expected: \"string-array\", value, key: `${key}[${index}]` };\n        }\n      }\n      return true;\n    });\n  }\n  fullKey(key) {\n    return `${this.prefix}${this.prefix ? \".\" : \"\"}${key}`;\n  }\n  copy(data, key, fallback) {\n    const reader = new ConfigReader(\n      data,\n      this.context,\n      fallback,\n      this.fullKey(key)\n    );\n    reader.filteredKeys = this.filteredKeys;\n    return reader;\n  }\n  readConfigValue(key, validate) {\n    var _a, _b;\n    const value = this.readValue(key);\n    if (value === void 0) {\n      if (process.env.NODE_ENV === \"development\") {\n        const fullKey = this.fullKey(key);\n        if (((_a = this.filteredKeys) == null ? void 0 : _a.includes(fullKey)) && !this.notifiedFilteredKeys.has(fullKey)) {\n          this.notifiedFilteredKeys.add(fullKey);\n          console.warn(\n            `Failed to read configuration value at '${fullKey}' as it is not visible. See https://backstage.io/docs/conf/defining#visibility for instructions on how to make it visible.`\n          );\n        }\n      }\n      return (_b = this.fallback) == null ? void 0 : _b.readConfigValue(key, validate);\n    }\n    const result = validate(value);\n    if (result !== true) {\n      const { key: keyName = key, value: theValue = value, expected } = result;\n      throw new TypeError(\n        errors.type(\n          this.fullKey(keyName),\n          this.context,\n          typeOf(theValue),\n          expected\n        )\n      );\n    }\n    return value;\n  }\n  readValue(key) {\n    const parts = key ? key.split(\".\") : [];\n    for (const part of parts) {\n      if (!CONFIG_KEY_PART_PATTERN.test(part)) {\n        throw new TypeError(`Invalid config key '${key}'`);\n      }\n    }\n    if (this.data === void 0) {\n      return void 0;\n    }\n    let value = this.data;\n    for (const [index, part] of parts.entries()) {\n      if (isObject(value)) {\n        value = value[part];\n      } else if (value !== void 0) {\n        const badKey = this.fullKey(parts.slice(0, index).join(\".\"));\n        throw new TypeError(\n          errors.type(badKey, this.context, typeOf(value), \"object\")\n        );\n      }\n    }\n    return value;\n  }\n}\n\nexport { ConfigReader, readDurationFromConfig };\n//# sourceMappingURL=index.esm.js.map\n","import { useState, useMemo, useCallback, useEffect, useRef } from 'react';\nimport { u as useApi, r as errorApiRef } from './esm/StorageApi-c8a5e616.esm.js';\nimport { createApiRef } from '@backstage/core-plugin-api';\nimport '@backstage/version-bridge';\nimport '@backstage/errors';\n\nfunction createTranslationMessages(options) {\n  return {\n    $$type: \"@backstage/TranslationMessages\",\n    id: options.ref.id,\n    full: Boolean(options.full),\n    messages: options.messages\n  };\n}\n\nfunction createTranslationResource(options) {\n  return {\n    $$type: \"@backstage/TranslationResource\",\n    version: \"v1\",\n    id: options.ref.id,\n    resources: Object.entries(options.translations).map(\n      ([language, loader]) => ({\n        language,\n        loader: () => loader().then((m) => {\n          const value = m.default;\n          return {\n            messages: (value == null ? void 0 : value.$$type) === \"@backstage/TranslationMessages\" ? value.messages : value\n          };\n        })\n      })\n    )\n  };\n}\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _id, _messages, _resources;\nfunction flattenMessages(nested) {\n  const entries = new Array();\n  function visit(obj, prefix) {\n    for (const [key, value] of Object.entries(obj)) {\n      if (typeof value === \"string\") {\n        entries.push([prefix + key, value]);\n      } else {\n        visit(value, `${prefix}${key}.`);\n      }\n    }\n  }\n  visit(nested, \"\");\n  return Object.fromEntries(entries);\n}\nclass TranslationRefImpl {\n  constructor(options) {\n    __privateAdd(this, _id, void 0);\n    __privateAdd(this, _messages, void 0);\n    __privateAdd(this, _resources, void 0);\n    __publicField(this, \"$$type\", \"@backstage/TranslationRef\");\n    __publicField(this, \"version\", \"v1\");\n    __privateSet(this, _id, options.id);\n    __privateSet(this, _messages, flattenMessages(\n      options.messages\n    ));\n  }\n  get id() {\n    return __privateGet(this, _id);\n  }\n  get T() {\n    throw new Error(\"Not implemented\");\n  }\n  getDefaultMessages() {\n    return __privateGet(this, _messages);\n  }\n  setDefaultResource(resources) {\n    __privateSet(this, _resources, resources);\n  }\n  getDefaultResource() {\n    return __privateGet(this, _resources);\n  }\n  toString() {\n    return `TranslationRef{id=${this.id}}`;\n  }\n}\n_id = new WeakMap();\n_messages = new WeakMap();\n_resources = new WeakMap();\nfunction createTranslationRef(config) {\n  const ref = new TranslationRefImpl(config);\n  if (config.translations) {\n    ref.setDefaultResource(\n      createTranslationResource({\n        ref,\n        translations: config.translations\n      })\n    );\n  }\n  return ref;\n}\n\nconst translationApiRef = createApiRef({\n  id: \"core.translation\"\n});\n\nconst appLanguageApiRef = createApiRef({\n  id: \"core.applanguage\"\n});\n\nconst loggedRefs = /* @__PURE__ */ new WeakSet();\nconst useTranslationRef = (translationRef) => {\n  const errorApi = useApi(errorApiRef);\n  const translationApi = useApi(translationApiRef);\n  const [snapshot, setSnapshot] = useState(\n    () => translationApi.getTranslation(translationRef)\n  );\n  const observable = useMemo(\n    () => translationApi.translation$(translationRef),\n    [translationApi, translationRef]\n  );\n  const onError = useCallback(\n    (error) => {\n      if (!loggedRefs.has(translationRef)) {\n        const errMsg = `Failed to load translation resource '${translationRef.id}'; caused by ${error}`;\n        console.error(errMsg);\n        errorApi.post(new Error(errMsg));\n        loggedRefs.add(translationRef);\n      }\n    },\n    [errorApi, translationRef]\n  );\n  useEffect(() => {\n    const subscription = observable.subscribe({\n      next(next) {\n        if (next.ready) {\n          setSnapshot(next);\n        }\n      },\n      error(error) {\n        onError(error);\n      }\n    });\n    return () => {\n      subscription.unsubscribe();\n    };\n  }, [observable, onError]);\n  const initialRenderRef = useRef(true);\n  useEffect(() => {\n    if (initialRenderRef.current) {\n      initialRenderRef.current = false;\n    } else {\n      setSnapshot(translationApi.getTranslation(translationRef));\n    }\n  }, [translationApi, translationRef]);\n  if (!snapshot.ready) {\n    throw new Promise((resolve) => {\n      const subscription = observable.subscribe({\n        next(next) {\n          if (next.ready) {\n            subscription.unsubscribe();\n            resolve();\n          }\n        },\n        error(error) {\n          subscription.unsubscribe();\n          onError(error);\n          resolve();\n        }\n      });\n    });\n  }\n  return { t: snapshot.t };\n};\n\nexport { appLanguageApiRef, createTranslationMessages, createTranslationRef, createTranslationResource, translationApiRef, useTranslationRef };\n//# sourceMappingURL=alpha.esm.js.map\n","import _typeof from '@babel/runtime/helpers/esm/typeof';\nimport _classCallCheck from '@babel/runtime/helpers/esm/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/esm/createClass';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport _inherits from '@babel/runtime/helpers/esm/inherits';\nimport _possibleConstructorReturn from '@babel/runtime/helpers/esm/possibleConstructorReturn';\nimport _getPrototypeOf from '@babel/runtime/helpers/esm/getPrototypeOf';\nimport _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport _toArray from '@babel/runtime/helpers/esm/toArray';\n\nfunction ownKeys$6(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread$6(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$6(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$6(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nvar consoleLogger = {\n  type: 'logger',\n  log: function log(args) {\n    this.output('log', args);\n  },\n  warn: function warn(args) {\n    this.output('warn', args);\n  },\n  error: function error(args) {\n    this.output('error', args);\n  },\n  output: function output(type, args) {\n    if (console && console[type]) console[type].apply(console, args);\n  }\n};\nvar Logger = function () {\n  function Logger(concreteLogger) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    _classCallCheck(this, Logger);\n    this.init(concreteLogger, options);\n  }\n  _createClass(Logger, [{\n    key: \"init\",\n    value: function init(concreteLogger) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      this.prefix = options.prefix || 'i18next:';\n      this.logger = concreteLogger || consoleLogger;\n      this.options = options;\n      this.debug = options.debug;\n    }\n  }, {\n    key: \"setDebug\",\n    value: function setDebug(bool) {\n      this.debug = bool;\n    }\n  }, {\n    key: \"log\",\n    value: function log() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      return this.forward(args, 'log', '', true);\n    }\n  }, {\n    key: \"warn\",\n    value: function warn() {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n      return this.forward(args, 'warn', '', true);\n    }\n  }, {\n    key: \"error\",\n    value: function error() {\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n      return this.forward(args, 'error', '');\n    }\n  }, {\n    key: \"deprecate\",\n    value: function deprecate() {\n      for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n      return this.forward(args, 'warn', 'WARNING DEPRECATED: ', true);\n    }\n  }, {\n    key: \"forward\",\n    value: function forward(args, lvl, prefix, debugOnly) {\n      if (debugOnly && !this.debug) return null;\n      if (typeof args[0] === 'string') args[0] = \"\".concat(prefix).concat(this.prefix, \" \").concat(args[0]);\n      return this.logger[lvl](args);\n    }\n  }, {\n    key: \"create\",\n    value: function create(moduleName) {\n      return new Logger(this.logger, _objectSpread$6(_objectSpread$6({}, {\n        prefix: \"\".concat(this.prefix, \":\").concat(moduleName, \":\")\n      }), this.options));\n    }\n  }, {\n    key: \"clone\",\n    value: function clone(options) {\n      options = options || this.options;\n      options.prefix = options.prefix || this.prefix;\n      return new Logger(this.logger, options);\n    }\n  }]);\n  return Logger;\n}();\nvar baseLogger = new Logger();\n\nvar EventEmitter = function () {\n  function EventEmitter() {\n    _classCallCheck(this, EventEmitter);\n    this.observers = {};\n  }\n  _createClass(EventEmitter, [{\n    key: \"on\",\n    value: function on(events, listener) {\n      var _this = this;\n      events.split(' ').forEach(function (event) {\n        _this.observers[event] = _this.observers[event] || [];\n        _this.observers[event].push(listener);\n      });\n      return this;\n    }\n  }, {\n    key: \"off\",\n    value: function off(event, listener) {\n      if (!this.observers[event]) return;\n      if (!listener) {\n        delete this.observers[event];\n        return;\n      }\n      this.observers[event] = this.observers[event].filter(function (l) {\n        return l !== listener;\n      });\n    }\n  }, {\n    key: \"emit\",\n    value: function emit(event) {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n      if (this.observers[event]) {\n        var cloned = [].concat(this.observers[event]);\n        cloned.forEach(function (observer) {\n          observer.apply(void 0, args);\n        });\n      }\n      if (this.observers['*']) {\n        var _cloned = [].concat(this.observers['*']);\n        _cloned.forEach(function (observer) {\n          observer.apply(observer, [event].concat(args));\n        });\n      }\n    }\n  }]);\n  return EventEmitter;\n}();\n\nfunction defer() {\n  var res;\n  var rej;\n  var promise = new Promise(function (resolve, reject) {\n    res = resolve;\n    rej = reject;\n  });\n  promise.resolve = res;\n  promise.reject = rej;\n  return promise;\n}\nfunction makeString(object) {\n  if (object == null) return '';\n  return '' + object;\n}\nfunction copy(a, s, t) {\n  a.forEach(function (m) {\n    if (s[m]) t[m] = s[m];\n  });\n}\nfunction getLastOfPath(object, path, Empty) {\n  function cleanKey(key) {\n    return key && key.indexOf('###') > -1 ? key.replace(/###/g, '.') : key;\n  }\n  function canNotTraverseDeeper() {\n    return !object || typeof object === 'string';\n  }\n  var stack = typeof path !== 'string' ? [].concat(path) : path.split('.');\n  while (stack.length > 1) {\n    if (canNotTraverseDeeper()) return {};\n    var key = cleanKey(stack.shift());\n    if (!object[key] && Empty) object[key] = new Empty();\n    if (Object.prototype.hasOwnProperty.call(object, key)) {\n      object = object[key];\n    } else {\n      object = {};\n    }\n  }\n  if (canNotTraverseDeeper()) return {};\n  return {\n    obj: object,\n    k: cleanKey(stack.shift())\n  };\n}\nfunction setPath(object, path, newValue) {\n  var _getLastOfPath = getLastOfPath(object, path, Object),\n    obj = _getLastOfPath.obj,\n    k = _getLastOfPath.k;\n  obj[k] = newValue;\n}\nfunction pushPath(object, path, newValue, concat) {\n  var _getLastOfPath2 = getLastOfPath(object, path, Object),\n    obj = _getLastOfPath2.obj,\n    k = _getLastOfPath2.k;\n  obj[k] = obj[k] || [];\n  if (concat) obj[k] = obj[k].concat(newValue);\n  if (!concat) obj[k].push(newValue);\n}\nfunction getPath(object, path) {\n  var _getLastOfPath3 = getLastOfPath(object, path),\n    obj = _getLastOfPath3.obj,\n    k = _getLastOfPath3.k;\n  if (!obj) return undefined;\n  return obj[k];\n}\nfunction getPathWithDefaults(data, defaultData, key) {\n  var value = getPath(data, key);\n  if (value !== undefined) {\n    return value;\n  }\n  return getPath(defaultData, key);\n}\nfunction deepExtend(target, source, overwrite) {\n  for (var prop in source) {\n    if (prop !== '__proto__' && prop !== 'constructor') {\n      if (prop in target) {\n        if (typeof target[prop] === 'string' || target[prop] instanceof String || typeof source[prop] === 'string' || source[prop] instanceof String) {\n          if (overwrite) target[prop] = source[prop];\n        } else {\n          deepExtend(target[prop], source[prop], overwrite);\n        }\n      } else {\n        target[prop] = source[prop];\n      }\n    }\n  }\n  return target;\n}\nfunction regexEscape(str) {\n  return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n}\nvar _entityMap = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;',\n  '/': '&#x2F;'\n};\nfunction escape(data) {\n  if (typeof data === 'string') {\n    return data.replace(/[&<>\"'\\/]/g, function (s) {\n      return _entityMap[s];\n    });\n  }\n  return data;\n}\nvar isIE10 = typeof window !== 'undefined' && window.navigator && typeof window.navigator.userAgentData === 'undefined' && window.navigator.userAgent && window.navigator.userAgent.indexOf('MSIE') > -1;\nvar chars = [' ', ',', '?', '!', ';'];\nfunction looksLikeObjectPath(key, nsSeparator, keySeparator) {\n  nsSeparator = nsSeparator || '';\n  keySeparator = keySeparator || '';\n  var possibleChars = chars.filter(function (c) {\n    return nsSeparator.indexOf(c) < 0 && keySeparator.indexOf(c) < 0;\n  });\n  if (possibleChars.length === 0) return true;\n  var r = new RegExp(\"(\".concat(possibleChars.map(function (c) {\n    return c === '?' ? '\\\\?' : c;\n  }).join('|'), \")\"));\n  var matched = !r.test(key);\n  if (!matched) {\n    var ki = key.indexOf(keySeparator);\n    if (ki > 0 && !r.test(key.substring(0, ki))) {\n      matched = true;\n    }\n  }\n  return matched;\n}\nfunction deepFind(obj, path) {\n  var keySeparator = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '.';\n  if (!obj) return undefined;\n  if (obj[path]) return obj[path];\n  var paths = path.split(keySeparator);\n  var current = obj;\n  for (var i = 0; i < paths.length; ++i) {\n    if (!current) return undefined;\n    if (typeof current[paths[i]] === 'string' && i + 1 < paths.length) {\n      return undefined;\n    }\n    if (current[paths[i]] === undefined) {\n      var j = 2;\n      var p = paths.slice(i, i + j).join(keySeparator);\n      var mix = current[p];\n      while (mix === undefined && paths.length > i + j) {\n        j++;\n        p = paths.slice(i, i + j).join(keySeparator);\n        mix = current[p];\n      }\n      if (mix === undefined) return undefined;\n      if (mix === null) return null;\n      if (path.endsWith(p)) {\n        if (typeof mix === 'string') return mix;\n        if (p && typeof mix[p] === 'string') return mix[p];\n      }\n      var joinedPath = paths.slice(i + j).join(keySeparator);\n      if (joinedPath) return deepFind(mix, joinedPath, keySeparator);\n      return undefined;\n    }\n    current = current[paths[i]];\n  }\n  return current;\n}\n\nfunction ownKeys$5(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread$5(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$5(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$5(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _createSuper$3(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$3(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct$3() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nvar ResourceStore = function (_EventEmitter) {\n  _inherits(ResourceStore, _EventEmitter);\n  var _super = _createSuper$3(ResourceStore);\n  function ResourceStore(data) {\n    var _this;\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      ns: ['translation'],\n      defaultNS: 'translation'\n    };\n    _classCallCheck(this, ResourceStore);\n    _this = _super.call(this);\n    if (isIE10) {\n      EventEmitter.call(_assertThisInitialized(_this));\n    }\n    _this.data = data || {};\n    _this.options = options;\n    if (_this.options.keySeparator === undefined) {\n      _this.options.keySeparator = '.';\n    }\n    if (_this.options.ignoreJSONStructure === undefined) {\n      _this.options.ignoreJSONStructure = true;\n    }\n    return _this;\n  }\n  _createClass(ResourceStore, [{\n    key: \"addNamespaces\",\n    value: function addNamespaces(ns) {\n      if (this.options.ns.indexOf(ns) < 0) {\n        this.options.ns.push(ns);\n      }\n    }\n  }, {\n    key: \"removeNamespaces\",\n    value: function removeNamespaces(ns) {\n      var index = this.options.ns.indexOf(ns);\n      if (index > -1) {\n        this.options.ns.splice(index, 1);\n      }\n    }\n  }, {\n    key: \"getResource\",\n    value: function getResource(lng, ns, key) {\n      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n      var keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n      var ignoreJSONStructure = options.ignoreJSONStructure !== undefined ? options.ignoreJSONStructure : this.options.ignoreJSONStructure;\n      var path = [lng, ns];\n      if (key && typeof key !== 'string') path = path.concat(key);\n      if (key && typeof key === 'string') path = path.concat(keySeparator ? key.split(keySeparator) : key);\n      if (lng.indexOf('.') > -1) {\n        path = lng.split('.');\n      }\n      var result = getPath(this.data, path);\n      if (result || !ignoreJSONStructure || typeof key !== 'string') return result;\n      return deepFind(this.data && this.data[lng] && this.data[lng][ns], key, keySeparator);\n    }\n  }, {\n    key: \"addResource\",\n    value: function addResource(lng, ns, key, value) {\n      var options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {\n        silent: false\n      };\n      var keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n      var path = [lng, ns];\n      if (key) path = path.concat(keySeparator ? key.split(keySeparator) : key);\n      if (lng.indexOf('.') > -1) {\n        path = lng.split('.');\n        value = ns;\n        ns = path[1];\n      }\n      this.addNamespaces(ns);\n      setPath(this.data, path, value);\n      if (!options.silent) this.emit('added', lng, ns, key, value);\n    }\n  }, {\n    key: \"addResources\",\n    value: function addResources(lng, ns, resources) {\n      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {\n        silent: false\n      };\n      for (var m in resources) {\n        if (typeof resources[m] === 'string' || Object.prototype.toString.apply(resources[m]) === '[object Array]') this.addResource(lng, ns, m, resources[m], {\n          silent: true\n        });\n      }\n      if (!options.silent) this.emit('added', lng, ns, resources);\n    }\n  }, {\n    key: \"addResourceBundle\",\n    value: function addResourceBundle(lng, ns, resources, deep, overwrite) {\n      var options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {\n        silent: false\n      };\n      var path = [lng, ns];\n      if (lng.indexOf('.') > -1) {\n        path = lng.split('.');\n        deep = resources;\n        resources = ns;\n        ns = path[1];\n      }\n      this.addNamespaces(ns);\n      var pack = getPath(this.data, path) || {};\n      if (deep) {\n        deepExtend(pack, resources, overwrite);\n      } else {\n        pack = _objectSpread$5(_objectSpread$5({}, pack), resources);\n      }\n      setPath(this.data, path, pack);\n      if (!options.silent) this.emit('added', lng, ns, resources);\n    }\n  }, {\n    key: \"removeResourceBundle\",\n    value: function removeResourceBundle(lng, ns) {\n      if (this.hasResourceBundle(lng, ns)) {\n        delete this.data[lng][ns];\n      }\n      this.removeNamespaces(ns);\n      this.emit('removed', lng, ns);\n    }\n  }, {\n    key: \"hasResourceBundle\",\n    value: function hasResourceBundle(lng, ns) {\n      return this.getResource(lng, ns) !== undefined;\n    }\n  }, {\n    key: \"getResourceBundle\",\n    value: function getResourceBundle(lng, ns) {\n      if (!ns) ns = this.options.defaultNS;\n      if (this.options.compatibilityAPI === 'v1') return _objectSpread$5(_objectSpread$5({}, {}), this.getResource(lng, ns));\n      return this.getResource(lng, ns);\n    }\n  }, {\n    key: \"getDataByLanguage\",\n    value: function getDataByLanguage(lng) {\n      return this.data[lng];\n    }\n  }, {\n    key: \"hasLanguageSomeTranslations\",\n    value: function hasLanguageSomeTranslations(lng) {\n      var data = this.getDataByLanguage(lng);\n      var n = data && Object.keys(data) || [];\n      return !!n.find(function (v) {\n        return data[v] && Object.keys(data[v]).length > 0;\n      });\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      return this.data;\n    }\n  }]);\n  return ResourceStore;\n}(EventEmitter);\n\nvar postProcessor = {\n  processors: {},\n  addPostProcessor: function addPostProcessor(module) {\n    this.processors[module.name] = module;\n  },\n  handle: function handle(processors, value, key, options, translator) {\n    var _this = this;\n    processors.forEach(function (processor) {\n      if (_this.processors[processor]) value = _this.processors[processor].process(value, key, options, translator);\n    });\n    return value;\n  }\n};\n\nfunction ownKeys$4(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread$4(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$4(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$4(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _createSuper$2(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$2(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct$2() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nvar checkedLoadedFor = {};\nvar Translator = function (_EventEmitter) {\n  _inherits(Translator, _EventEmitter);\n  var _super = _createSuper$2(Translator);\n  function Translator(services) {\n    var _this;\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    _classCallCheck(this, Translator);\n    _this = _super.call(this);\n    if (isIE10) {\n      EventEmitter.call(_assertThisInitialized(_this));\n    }\n    copy(['resourceStore', 'languageUtils', 'pluralResolver', 'interpolator', 'backendConnector', 'i18nFormat', 'utils'], services, _assertThisInitialized(_this));\n    _this.options = options;\n    if (_this.options.keySeparator === undefined) {\n      _this.options.keySeparator = '.';\n    }\n    _this.logger = baseLogger.create('translator');\n    return _this;\n  }\n  _createClass(Translator, [{\n    key: \"changeLanguage\",\n    value: function changeLanguage(lng) {\n      if (lng) this.language = lng;\n    }\n  }, {\n    key: \"exists\",\n    value: function exists(key) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        interpolation: {}\n      };\n      if (key === undefined || key === null) {\n        return false;\n      }\n      var resolved = this.resolve(key, options);\n      return resolved && resolved.res !== undefined;\n    }\n  }, {\n    key: \"extractFromKey\",\n    value: function extractFromKey(key, options) {\n      var nsSeparator = options.nsSeparator !== undefined ? options.nsSeparator : this.options.nsSeparator;\n      if (nsSeparator === undefined) nsSeparator = ':';\n      var keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n      var namespaces = options.ns || this.options.defaultNS || [];\n      var wouldCheckForNsInKey = nsSeparator && key.indexOf(nsSeparator) > -1;\n      var seemsNaturalLanguage = !this.options.userDefinedKeySeparator && !options.keySeparator && !this.options.userDefinedNsSeparator && !options.nsSeparator && !looksLikeObjectPath(key, nsSeparator, keySeparator);\n      if (wouldCheckForNsInKey && !seemsNaturalLanguage) {\n        var m = key.match(this.interpolator.nestingRegexp);\n        if (m && m.length > 0) {\n          return {\n            key: key,\n            namespaces: namespaces\n          };\n        }\n        var parts = key.split(nsSeparator);\n        if (nsSeparator !== keySeparator || nsSeparator === keySeparator && this.options.ns.indexOf(parts[0]) > -1) namespaces = parts.shift();\n        key = parts.join(keySeparator);\n      }\n      if (typeof namespaces === 'string') namespaces = [namespaces];\n      return {\n        key: key,\n        namespaces: namespaces\n      };\n    }\n  }, {\n    key: \"translate\",\n    value: function translate(keys, options, lastKey) {\n      var _this2 = this;\n      if (_typeof(options) !== 'object' && this.options.overloadTranslationOptionHandler) {\n        options = this.options.overloadTranslationOptionHandler(arguments);\n      }\n      if (_typeof(options) === 'object') options = _objectSpread$4({}, options);\n      if (!options) options = {};\n      if (keys === undefined || keys === null) return '';\n      if (!Array.isArray(keys)) keys = [String(keys)];\n      var returnDetails = options.returnDetails !== undefined ? options.returnDetails : this.options.returnDetails;\n      var keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n      var _this$extractFromKey = this.extractFromKey(keys[keys.length - 1], options),\n        key = _this$extractFromKey.key,\n        namespaces = _this$extractFromKey.namespaces;\n      var namespace = namespaces[namespaces.length - 1];\n      var lng = options.lng || this.language;\n      var appendNamespaceToCIMode = options.appendNamespaceToCIMode || this.options.appendNamespaceToCIMode;\n      if (lng && lng.toLowerCase() === 'cimode') {\n        if (appendNamespaceToCIMode) {\n          var nsSeparator = options.nsSeparator || this.options.nsSeparator;\n          if (returnDetails) {\n            return {\n              res: \"\".concat(namespace).concat(nsSeparator).concat(key),\n              usedKey: key,\n              exactUsedKey: key,\n              usedLng: lng,\n              usedNS: namespace\n            };\n          }\n          return \"\".concat(namespace).concat(nsSeparator).concat(key);\n        }\n        if (returnDetails) {\n          return {\n            res: key,\n            usedKey: key,\n            exactUsedKey: key,\n            usedLng: lng,\n            usedNS: namespace\n          };\n        }\n        return key;\n      }\n      var resolved = this.resolve(keys, options);\n      var res = resolved && resolved.res;\n      var resUsedKey = resolved && resolved.usedKey || key;\n      var resExactUsedKey = resolved && resolved.exactUsedKey || key;\n      var resType = Object.prototype.toString.apply(res);\n      var noObject = ['[object Number]', '[object Function]', '[object RegExp]'];\n      var joinArrays = options.joinArrays !== undefined ? options.joinArrays : this.options.joinArrays;\n      var handleAsObjectInI18nFormat = !this.i18nFormat || this.i18nFormat.handleAsObject;\n      var handleAsObject = typeof res !== 'string' && typeof res !== 'boolean' && typeof res !== 'number';\n      if (handleAsObjectInI18nFormat && res && handleAsObject && noObject.indexOf(resType) < 0 && !(typeof joinArrays === 'string' && resType === '[object Array]')) {\n        if (!options.returnObjects && !this.options.returnObjects) {\n          if (!this.options.returnedObjectHandler) {\n            this.logger.warn('accessing an object - but returnObjects options is not enabled!');\n          }\n          var r = this.options.returnedObjectHandler ? this.options.returnedObjectHandler(resUsedKey, res, _objectSpread$4(_objectSpread$4({}, options), {}, {\n            ns: namespaces\n          })) : \"key '\".concat(key, \" (\").concat(this.language, \")' returned an object instead of string.\");\n          if (returnDetails) {\n            resolved.res = r;\n            return resolved;\n          }\n          return r;\n        }\n        if (keySeparator) {\n          var resTypeIsArray = resType === '[object Array]';\n          var copy = resTypeIsArray ? [] : {};\n          var newKeyToUse = resTypeIsArray ? resExactUsedKey : resUsedKey;\n          for (var m in res) {\n            if (Object.prototype.hasOwnProperty.call(res, m)) {\n              var deepKey = \"\".concat(newKeyToUse).concat(keySeparator).concat(m);\n              copy[m] = this.translate(deepKey, _objectSpread$4(_objectSpread$4({}, options), {\n                joinArrays: false,\n                ns: namespaces\n              }));\n              if (copy[m] === deepKey) copy[m] = res[m];\n            }\n          }\n          res = copy;\n        }\n      } else if (handleAsObjectInI18nFormat && typeof joinArrays === 'string' && resType === '[object Array]') {\n        res = res.join(joinArrays);\n        if (res) res = this.extendTranslation(res, keys, options, lastKey);\n      } else {\n        var usedDefault = false;\n        var usedKey = false;\n        var needsPluralHandling = options.count !== undefined && typeof options.count !== 'string';\n        var hasDefaultValue = Translator.hasDefaultValue(options);\n        var defaultValueSuffix = needsPluralHandling ? this.pluralResolver.getSuffix(lng, options.count, options) : '';\n        var defaultValue = options[\"defaultValue\".concat(defaultValueSuffix)] || options.defaultValue;\n        if (!this.isValidLookup(res) && hasDefaultValue) {\n          usedDefault = true;\n          res = defaultValue;\n        }\n        if (!this.isValidLookup(res)) {\n          usedKey = true;\n          res = key;\n        }\n        var missingKeyNoValueFallbackToKey = options.missingKeyNoValueFallbackToKey || this.options.missingKeyNoValueFallbackToKey;\n        var resForMissing = missingKeyNoValueFallbackToKey && usedKey ? undefined : res;\n        var updateMissing = hasDefaultValue && defaultValue !== res && this.options.updateMissing;\n        if (usedKey || usedDefault || updateMissing) {\n          this.logger.log(updateMissing ? 'updateKey' : 'missingKey', lng, namespace, key, updateMissing ? defaultValue : res);\n          if (keySeparator) {\n            var fk = this.resolve(key, _objectSpread$4(_objectSpread$4({}, options), {}, {\n              keySeparator: false\n            }));\n            if (fk && fk.res) this.logger.warn('Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.');\n          }\n          var lngs = [];\n          var fallbackLngs = this.languageUtils.getFallbackCodes(this.options.fallbackLng, options.lng || this.language);\n          if (this.options.saveMissingTo === 'fallback' && fallbackLngs && fallbackLngs[0]) {\n            for (var i = 0; i < fallbackLngs.length; i++) {\n              lngs.push(fallbackLngs[i]);\n            }\n          } else if (this.options.saveMissingTo === 'all') {\n            lngs = this.languageUtils.toResolveHierarchy(options.lng || this.language);\n          } else {\n            lngs.push(options.lng || this.language);\n          }\n          var send = function send(l, k, specificDefaultValue) {\n            var defaultForMissing = hasDefaultValue && specificDefaultValue !== res ? specificDefaultValue : resForMissing;\n            if (_this2.options.missingKeyHandler) {\n              _this2.options.missingKeyHandler(l, namespace, k, defaultForMissing, updateMissing, options);\n            } else if (_this2.backendConnector && _this2.backendConnector.saveMissing) {\n              _this2.backendConnector.saveMissing(l, namespace, k, defaultForMissing, updateMissing, options);\n            }\n            _this2.emit('missingKey', l, namespace, k, res);\n          };\n          if (this.options.saveMissing) {\n            if (this.options.saveMissingPlurals && needsPluralHandling) {\n              lngs.forEach(function (language) {\n                _this2.pluralResolver.getSuffixes(language, options).forEach(function (suffix) {\n                  send([language], key + suffix, options[\"defaultValue\".concat(suffix)] || defaultValue);\n                });\n              });\n            } else {\n              send(lngs, key, defaultValue);\n            }\n          }\n        }\n        res = this.extendTranslation(res, keys, options, resolved, lastKey);\n        if (usedKey && res === key && this.options.appendNamespaceToMissingKey) res = \"\".concat(namespace, \":\").concat(key);\n        if ((usedKey || usedDefault) && this.options.parseMissingKeyHandler) {\n          if (this.options.compatibilityAPI !== 'v1') {\n            res = this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey ? \"\".concat(namespace, \":\").concat(key) : key, usedDefault ? res : undefined);\n          } else {\n            res = this.options.parseMissingKeyHandler(res);\n          }\n        }\n      }\n      if (returnDetails) {\n        resolved.res = res;\n        return resolved;\n      }\n      return res;\n    }\n  }, {\n    key: \"extendTranslation\",\n    value: function extendTranslation(res, key, options, resolved, lastKey) {\n      var _this3 = this;\n      if (this.i18nFormat && this.i18nFormat.parse) {\n        res = this.i18nFormat.parse(res, _objectSpread$4(_objectSpread$4({}, this.options.interpolation.defaultVariables), options), resolved.usedLng, resolved.usedNS, resolved.usedKey, {\n          resolved: resolved\n        });\n      } else if (!options.skipInterpolation) {\n        if (options.interpolation) this.interpolator.init(_objectSpread$4(_objectSpread$4({}, options), {\n          interpolation: _objectSpread$4(_objectSpread$4({}, this.options.interpolation), options.interpolation)\n        }));\n        var skipOnVariables = typeof res === 'string' && (options && options.interpolation && options.interpolation.skipOnVariables !== undefined ? options.interpolation.skipOnVariables : this.options.interpolation.skipOnVariables);\n        var nestBef;\n        if (skipOnVariables) {\n          var nb = res.match(this.interpolator.nestingRegexp);\n          nestBef = nb && nb.length;\n        }\n        var data = options.replace && typeof options.replace !== 'string' ? options.replace : options;\n        if (this.options.interpolation.defaultVariables) data = _objectSpread$4(_objectSpread$4({}, this.options.interpolation.defaultVariables), data);\n        res = this.interpolator.interpolate(res, data, options.lng || this.language, options);\n        if (skipOnVariables) {\n          var na = res.match(this.interpolator.nestingRegexp);\n          var nestAft = na && na.length;\n          if (nestBef < nestAft) options.nest = false;\n        }\n        if (!options.lng && this.options.compatibilityAPI !== 'v1' && resolved && resolved.res) options.lng = resolved.usedLng;\n        if (options.nest !== false) res = this.interpolator.nest(res, function () {\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n          if (lastKey && lastKey[0] === args[0] && !options.context) {\n            _this3.logger.warn(\"It seems you are nesting recursively key: \".concat(args[0], \" in key: \").concat(key[0]));\n            return null;\n          }\n          return _this3.translate.apply(_this3, args.concat([key]));\n        }, options);\n        if (options.interpolation) this.interpolator.reset();\n      }\n      var postProcess = options.postProcess || this.options.postProcess;\n      var postProcessorNames = typeof postProcess === 'string' ? [postProcess] : postProcess;\n      if (res !== undefined && res !== null && postProcessorNames && postProcessorNames.length && options.applyPostProcessor !== false) {\n        res = postProcessor.handle(postProcessorNames, res, key, this.options && this.options.postProcessPassResolved ? _objectSpread$4({\n          i18nResolved: resolved\n        }, options) : options, this);\n      }\n      return res;\n    }\n  }, {\n    key: \"resolve\",\n    value: function resolve(keys) {\n      var _this4 = this;\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var found;\n      var usedKey;\n      var exactUsedKey;\n      var usedLng;\n      var usedNS;\n      if (typeof keys === 'string') keys = [keys];\n      keys.forEach(function (k) {\n        if (_this4.isValidLookup(found)) return;\n        var extracted = _this4.extractFromKey(k, options);\n        var key = extracted.key;\n        usedKey = key;\n        var namespaces = extracted.namespaces;\n        if (_this4.options.fallbackNS) namespaces = namespaces.concat(_this4.options.fallbackNS);\n        var needsPluralHandling = options.count !== undefined && typeof options.count !== 'string';\n        var needsZeroSuffixLookup = needsPluralHandling && !options.ordinal && options.count === 0 && _this4.pluralResolver.shouldUseIntlApi();\n        var needsContextHandling = options.context !== undefined && (typeof options.context === 'string' || typeof options.context === 'number') && options.context !== '';\n        var codes = options.lngs ? options.lngs : _this4.languageUtils.toResolveHierarchy(options.lng || _this4.language, options.fallbackLng);\n        namespaces.forEach(function (ns) {\n          if (_this4.isValidLookup(found)) return;\n          usedNS = ns;\n          if (!checkedLoadedFor[\"\".concat(codes[0], \"-\").concat(ns)] && _this4.utils && _this4.utils.hasLoadedNamespace && !_this4.utils.hasLoadedNamespace(usedNS)) {\n            checkedLoadedFor[\"\".concat(codes[0], \"-\").concat(ns)] = true;\n            _this4.logger.warn(\"key \\\"\".concat(usedKey, \"\\\" for languages \\\"\").concat(codes.join(', '), \"\\\" won't get resolved as namespace \\\"\").concat(usedNS, \"\\\" was not yet loaded\"), 'This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!');\n          }\n          codes.forEach(function (code) {\n            if (_this4.isValidLookup(found)) return;\n            usedLng = code;\n            var finalKeys = [key];\n            if (_this4.i18nFormat && _this4.i18nFormat.addLookupKeys) {\n              _this4.i18nFormat.addLookupKeys(finalKeys, key, code, ns, options);\n            } else {\n              var pluralSuffix;\n              if (needsPluralHandling) pluralSuffix = _this4.pluralResolver.getSuffix(code, options.count, options);\n              var zeroSuffix = \"\".concat(_this4.options.pluralSeparator, \"zero\");\n              if (needsPluralHandling) {\n                finalKeys.push(key + pluralSuffix);\n                if (needsZeroSuffixLookup) {\n                  finalKeys.push(key + zeroSuffix);\n                }\n              }\n              if (needsContextHandling) {\n                var contextKey = \"\".concat(key).concat(_this4.options.contextSeparator).concat(options.context);\n                finalKeys.push(contextKey);\n                if (needsPluralHandling) {\n                  finalKeys.push(contextKey + pluralSuffix);\n                  if (needsZeroSuffixLookup) {\n                    finalKeys.push(contextKey + zeroSuffix);\n                  }\n                }\n              }\n            }\n            var possibleKey;\n            while (possibleKey = finalKeys.pop()) {\n              if (!_this4.isValidLookup(found)) {\n                exactUsedKey = possibleKey;\n                found = _this4.getResource(code, ns, possibleKey, options);\n              }\n            }\n          });\n        });\n      });\n      return {\n        res: found,\n        usedKey: usedKey,\n        exactUsedKey: exactUsedKey,\n        usedLng: usedLng,\n        usedNS: usedNS\n      };\n    }\n  }, {\n    key: \"isValidLookup\",\n    value: function isValidLookup(res) {\n      return res !== undefined && !(!this.options.returnNull && res === null) && !(!this.options.returnEmptyString && res === '');\n    }\n  }, {\n    key: \"getResource\",\n    value: function getResource(code, ns, key) {\n      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n      if (this.i18nFormat && this.i18nFormat.getResource) return this.i18nFormat.getResource(code, ns, key, options);\n      return this.resourceStore.getResource(code, ns, key, options);\n    }\n  }], [{\n    key: \"hasDefaultValue\",\n    value: function hasDefaultValue(options) {\n      var prefix = 'defaultValue';\n      for (var option in options) {\n        if (Object.prototype.hasOwnProperty.call(options, option) && prefix === option.substring(0, prefix.length) && undefined !== options[option]) {\n          return true;\n        }\n      }\n      return false;\n    }\n  }]);\n  return Translator;\n}(EventEmitter);\n\nfunction capitalize(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\nvar LanguageUtil = function () {\n  function LanguageUtil(options) {\n    _classCallCheck(this, LanguageUtil);\n    this.options = options;\n    this.supportedLngs = this.options.supportedLngs || false;\n    this.logger = baseLogger.create('languageUtils');\n  }\n  _createClass(LanguageUtil, [{\n    key: \"getScriptPartFromCode\",\n    value: function getScriptPartFromCode(code) {\n      if (!code || code.indexOf('-') < 0) return null;\n      var p = code.split('-');\n      if (p.length === 2) return null;\n      p.pop();\n      if (p[p.length - 1].toLowerCase() === 'x') return null;\n      return this.formatLanguageCode(p.join('-'));\n    }\n  }, {\n    key: \"getLanguagePartFromCode\",\n    value: function getLanguagePartFromCode(code) {\n      if (!code || code.indexOf('-') < 0) return code;\n      var p = code.split('-');\n      return this.formatLanguageCode(p[0]);\n    }\n  }, {\n    key: \"formatLanguageCode\",\n    value: function formatLanguageCode(code) {\n      if (typeof code === 'string' && code.indexOf('-') > -1) {\n        var specialCases = ['hans', 'hant', 'latn', 'cyrl', 'cans', 'mong', 'arab'];\n        var p = code.split('-');\n        if (this.options.lowerCaseLng) {\n          p = p.map(function (part) {\n            return part.toLowerCase();\n          });\n        } else if (p.length === 2) {\n          p[0] = p[0].toLowerCase();\n          p[1] = p[1].toUpperCase();\n          if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());\n        } else if (p.length === 3) {\n          p[0] = p[0].toLowerCase();\n          if (p[1].length === 2) p[1] = p[1].toUpperCase();\n          if (p[0] !== 'sgn' && p[2].length === 2) p[2] = p[2].toUpperCase();\n          if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());\n          if (specialCases.indexOf(p[2].toLowerCase()) > -1) p[2] = capitalize(p[2].toLowerCase());\n        }\n        return p.join('-');\n      }\n      return this.options.cleanCode || this.options.lowerCaseLng ? code.toLowerCase() : code;\n    }\n  }, {\n    key: \"isSupportedCode\",\n    value: function isSupportedCode(code) {\n      if (this.options.load === 'languageOnly' || this.options.nonExplicitSupportedLngs) {\n        code = this.getLanguagePartFromCode(code);\n      }\n      return !this.supportedLngs || !this.supportedLngs.length || this.supportedLngs.indexOf(code) > -1;\n    }\n  }, {\n    key: \"getBestMatchFromCodes\",\n    value: function getBestMatchFromCodes(codes) {\n      var _this = this;\n      if (!codes) return null;\n      var found;\n      codes.forEach(function (code) {\n        if (found) return;\n        var cleanedLng = _this.formatLanguageCode(code);\n        if (!_this.options.supportedLngs || _this.isSupportedCode(cleanedLng)) found = cleanedLng;\n      });\n      if (!found && this.options.supportedLngs) {\n        codes.forEach(function (code) {\n          if (found) return;\n          var lngOnly = _this.getLanguagePartFromCode(code);\n          if (_this.isSupportedCode(lngOnly)) return found = lngOnly;\n          found = _this.options.supportedLngs.find(function (supportedLng) {\n            if (supportedLng === lngOnly) return supportedLng;\n            if (supportedLng.indexOf('-') < 0 && lngOnly.indexOf('-') < 0) return;\n            if (supportedLng.indexOf(lngOnly) === 0) return supportedLng;\n          });\n        });\n      }\n      if (!found) found = this.getFallbackCodes(this.options.fallbackLng)[0];\n      return found;\n    }\n  }, {\n    key: \"getFallbackCodes\",\n    value: function getFallbackCodes(fallbacks, code) {\n      if (!fallbacks) return [];\n      if (typeof fallbacks === 'function') fallbacks = fallbacks(code);\n      if (typeof fallbacks === 'string') fallbacks = [fallbacks];\n      if (Object.prototype.toString.apply(fallbacks) === '[object Array]') return fallbacks;\n      if (!code) return fallbacks[\"default\"] || [];\n      var found = fallbacks[code];\n      if (!found) found = fallbacks[this.getScriptPartFromCode(code)];\n      if (!found) found = fallbacks[this.formatLanguageCode(code)];\n      if (!found) found = fallbacks[this.getLanguagePartFromCode(code)];\n      if (!found) found = fallbacks[\"default\"];\n      return found || [];\n    }\n  }, {\n    key: \"toResolveHierarchy\",\n    value: function toResolveHierarchy(code, fallbackCode) {\n      var _this2 = this;\n      var fallbackCodes = this.getFallbackCodes(fallbackCode || this.options.fallbackLng || [], code);\n      var codes = [];\n      var addCode = function addCode(c) {\n        if (!c) return;\n        if (_this2.isSupportedCode(c)) {\n          codes.push(c);\n        } else {\n          _this2.logger.warn(\"rejecting language code not found in supportedLngs: \".concat(c));\n        }\n      };\n      if (typeof code === 'string' && code.indexOf('-') > -1) {\n        if (this.options.load !== 'languageOnly') addCode(this.formatLanguageCode(code));\n        if (this.options.load !== 'languageOnly' && this.options.load !== 'currentOnly') addCode(this.getScriptPartFromCode(code));\n        if (this.options.load !== 'currentOnly') addCode(this.getLanguagePartFromCode(code));\n      } else if (typeof code === 'string') {\n        addCode(this.formatLanguageCode(code));\n      }\n      fallbackCodes.forEach(function (fc) {\n        if (codes.indexOf(fc) < 0) addCode(_this2.formatLanguageCode(fc));\n      });\n      return codes;\n    }\n  }]);\n  return LanguageUtil;\n}();\n\nvar sets = [{\n  lngs: ['ach', 'ak', 'am', 'arn', 'br', 'fil', 'gun', 'ln', 'mfe', 'mg', 'mi', 'oc', 'pt', 'pt-BR', 'tg', 'tl', 'ti', 'tr', 'uz', 'wa'],\n  nr: [1, 2],\n  fc: 1\n}, {\n  lngs: ['af', 'an', 'ast', 'az', 'bg', 'bn', 'ca', 'da', 'de', 'dev', 'el', 'en', 'eo', 'es', 'et', 'eu', 'fi', 'fo', 'fur', 'fy', 'gl', 'gu', 'ha', 'hi', 'hu', 'hy', 'ia', 'it', 'kk', 'kn', 'ku', 'lb', 'mai', 'ml', 'mn', 'mr', 'nah', 'nap', 'nb', 'ne', 'nl', 'nn', 'no', 'nso', 'pa', 'pap', 'pms', 'ps', 'pt-PT', 'rm', 'sco', 'se', 'si', 'so', 'son', 'sq', 'sv', 'sw', 'ta', 'te', 'tk', 'ur', 'yo'],\n  nr: [1, 2],\n  fc: 2\n}, {\n  lngs: ['ay', 'bo', 'cgg', 'fa', 'ht', 'id', 'ja', 'jbo', 'ka', 'km', 'ko', 'ky', 'lo', 'ms', 'sah', 'su', 'th', 'tt', 'ug', 'vi', 'wo', 'zh'],\n  nr: [1],\n  fc: 3\n}, {\n  lngs: ['be', 'bs', 'cnr', 'dz', 'hr', 'ru', 'sr', 'uk'],\n  nr: [1, 2, 5],\n  fc: 4\n}, {\n  lngs: ['ar'],\n  nr: [0, 1, 2, 3, 11, 100],\n  fc: 5\n}, {\n  lngs: ['cs', 'sk'],\n  nr: [1, 2, 5],\n  fc: 6\n}, {\n  lngs: ['csb', 'pl'],\n  nr: [1, 2, 5],\n  fc: 7\n}, {\n  lngs: ['cy'],\n  nr: [1, 2, 3, 8],\n  fc: 8\n}, {\n  lngs: ['fr'],\n  nr: [1, 2],\n  fc: 9\n}, {\n  lngs: ['ga'],\n  nr: [1, 2, 3, 7, 11],\n  fc: 10\n}, {\n  lngs: ['gd'],\n  nr: [1, 2, 3, 20],\n  fc: 11\n}, {\n  lngs: ['is'],\n  nr: [1, 2],\n  fc: 12\n}, {\n  lngs: ['jv'],\n  nr: [0, 1],\n  fc: 13\n}, {\n  lngs: ['kw'],\n  nr: [1, 2, 3, 4],\n  fc: 14\n}, {\n  lngs: ['lt'],\n  nr: [1, 2, 10],\n  fc: 15\n}, {\n  lngs: ['lv'],\n  nr: [1, 2, 0],\n  fc: 16\n}, {\n  lngs: ['mk'],\n  nr: [1, 2],\n  fc: 17\n}, {\n  lngs: ['mnk'],\n  nr: [0, 1, 2],\n  fc: 18\n}, {\n  lngs: ['mt'],\n  nr: [1, 2, 11, 20],\n  fc: 19\n}, {\n  lngs: ['or'],\n  nr: [2, 1],\n  fc: 2\n}, {\n  lngs: ['ro'],\n  nr: [1, 2, 20],\n  fc: 20\n}, {\n  lngs: ['sl'],\n  nr: [5, 1, 2, 3],\n  fc: 21\n}, {\n  lngs: ['he', 'iw'],\n  nr: [1, 2, 20, 21],\n  fc: 22\n}];\nvar _rulesPluralsTypes = {\n  1: function _(n) {\n    return Number(n > 1);\n  },\n  2: function _(n) {\n    return Number(n != 1);\n  },\n  3: function _(n) {\n    return 0;\n  },\n  4: function _(n) {\n    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n  },\n  5: function _(n) {\n    return Number(n == 0 ? 0 : n == 1 ? 1 : n == 2 ? 2 : n % 100 >= 3 && n % 100 <= 10 ? 3 : n % 100 >= 11 ? 4 : 5);\n  },\n  6: function _(n) {\n    return Number(n == 1 ? 0 : n >= 2 && n <= 4 ? 1 : 2);\n  },\n  7: function _(n) {\n    return Number(n == 1 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n  },\n  8: function _(n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : n != 8 && n != 11 ? 2 : 3);\n  },\n  9: function _(n) {\n    return Number(n >= 2);\n  },\n  10: function _(n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : n < 7 ? 2 : n < 11 ? 3 : 4);\n  },\n  11: function _(n) {\n    return Number(n == 1 || n == 11 ? 0 : n == 2 || n == 12 ? 1 : n > 2 && n < 20 ? 2 : 3);\n  },\n  12: function _(n) {\n    return Number(n % 10 != 1 || n % 100 == 11);\n  },\n  13: function _(n) {\n    return Number(n !== 0);\n  },\n  14: function _(n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : n == 3 ? 2 : 3);\n  },\n  15: function _(n) {\n    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n  },\n  16: function _(n) {\n    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n !== 0 ? 1 : 2);\n  },\n  17: function _(n) {\n    return Number(n == 1 || n % 10 == 1 && n % 100 != 11 ? 0 : 1);\n  },\n  18: function _(n) {\n    return Number(n == 0 ? 0 : n == 1 ? 1 : 2);\n  },\n  19: function _(n) {\n    return Number(n == 1 ? 0 : n == 0 || n % 100 > 1 && n % 100 < 11 ? 1 : n % 100 > 10 && n % 100 < 20 ? 2 : 3);\n  },\n  20: function _(n) {\n    return Number(n == 1 ? 0 : n == 0 || n % 100 > 0 && n % 100 < 20 ? 1 : 2);\n  },\n  21: function _(n) {\n    return Number(n % 100 == 1 ? 1 : n % 100 == 2 ? 2 : n % 100 == 3 || n % 100 == 4 ? 3 : 0);\n  },\n  22: function _(n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : (n < 0 || n > 10) && n % 10 == 0 ? 2 : 3);\n  }\n};\nvar deprecatedJsonVersions = ['v1', 'v2', 'v3'];\nvar suffixesOrder = {\n  zero: 0,\n  one: 1,\n  two: 2,\n  few: 3,\n  many: 4,\n  other: 5\n};\nfunction createRules() {\n  var rules = {};\n  sets.forEach(function (set) {\n    set.lngs.forEach(function (l) {\n      rules[l] = {\n        numbers: set.nr,\n        plurals: _rulesPluralsTypes[set.fc]\n      };\n    });\n  });\n  return rules;\n}\nvar PluralResolver = function () {\n  function PluralResolver(languageUtils) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    _classCallCheck(this, PluralResolver);\n    this.languageUtils = languageUtils;\n    this.options = options;\n    this.logger = baseLogger.create('pluralResolver');\n    if ((!this.options.compatibilityJSON || this.options.compatibilityJSON === 'v4') && (typeof Intl === 'undefined' || !Intl.PluralRules)) {\n      this.options.compatibilityJSON = 'v3';\n      this.logger.error('Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.');\n    }\n    this.rules = createRules();\n  }\n  _createClass(PluralResolver, [{\n    key: \"addRule\",\n    value: function addRule(lng, obj) {\n      this.rules[lng] = obj;\n    }\n  }, {\n    key: \"getRule\",\n    value: function getRule(code) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      if (this.shouldUseIntlApi()) {\n        try {\n          return new Intl.PluralRules(code, {\n            type: options.ordinal ? 'ordinal' : 'cardinal'\n          });\n        } catch (_unused) {\n          return;\n        }\n      }\n      return this.rules[code] || this.rules[this.languageUtils.getLanguagePartFromCode(code)];\n    }\n  }, {\n    key: \"needsPlural\",\n    value: function needsPlural(code) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var rule = this.getRule(code, options);\n      if (this.shouldUseIntlApi()) {\n        return rule && rule.resolvedOptions().pluralCategories.length > 1;\n      }\n      return rule && rule.numbers.length > 1;\n    }\n  }, {\n    key: \"getPluralFormsOfKey\",\n    value: function getPluralFormsOfKey(code, key) {\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      return this.getSuffixes(code, options).map(function (suffix) {\n        return \"\".concat(key).concat(suffix);\n      });\n    }\n  }, {\n    key: \"getSuffixes\",\n    value: function getSuffixes(code) {\n      var _this = this;\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var rule = this.getRule(code, options);\n      if (!rule) {\n        return [];\n      }\n      if (this.shouldUseIntlApi()) {\n        return rule.resolvedOptions().pluralCategories.sort(function (pluralCategory1, pluralCategory2) {\n          return suffixesOrder[pluralCategory1] - suffixesOrder[pluralCategory2];\n        }).map(function (pluralCategory) {\n          return \"\".concat(_this.options.prepend).concat(pluralCategory);\n        });\n      }\n      return rule.numbers.map(function (number) {\n        return _this.getSuffix(code, number, options);\n      });\n    }\n  }, {\n    key: \"getSuffix\",\n    value: function getSuffix(code, count) {\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var rule = this.getRule(code, options);\n      if (rule) {\n        if (this.shouldUseIntlApi()) {\n          return \"\".concat(this.options.prepend).concat(rule.select(count));\n        }\n        return this.getSuffixRetroCompatible(rule, count);\n      }\n      this.logger.warn(\"no plural rule found for: \".concat(code));\n      return '';\n    }\n  }, {\n    key: \"getSuffixRetroCompatible\",\n    value: function getSuffixRetroCompatible(rule, count) {\n      var _this2 = this;\n      var idx = rule.noAbs ? rule.plurals(count) : rule.plurals(Math.abs(count));\n      var suffix = rule.numbers[idx];\n      if (this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {\n        if (suffix === 2) {\n          suffix = 'plural';\n        } else if (suffix === 1) {\n          suffix = '';\n        }\n      }\n      var returnSuffix = function returnSuffix() {\n        return _this2.options.prepend && suffix.toString() ? _this2.options.prepend + suffix.toString() : suffix.toString();\n      };\n      if (this.options.compatibilityJSON === 'v1') {\n        if (suffix === 1) return '';\n        if (typeof suffix === 'number') return \"_plural_\".concat(suffix.toString());\n        return returnSuffix();\n      } else if (this.options.compatibilityJSON === 'v2') {\n        return returnSuffix();\n      } else if (this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {\n        return returnSuffix();\n      }\n      return this.options.prepend && idx.toString() ? this.options.prepend + idx.toString() : idx.toString();\n    }\n  }, {\n    key: \"shouldUseIntlApi\",\n    value: function shouldUseIntlApi() {\n      return !deprecatedJsonVersions.includes(this.options.compatibilityJSON);\n    }\n  }]);\n  return PluralResolver;\n}();\n\nfunction ownKeys$3(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread$3(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$3(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$3(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction deepFindWithDefaults(data, defaultData, key) {\n  var keySeparator = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '.';\n  var ignoreJSONStructure = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n  var path = getPathWithDefaults(data, defaultData, key);\n  if (!path && ignoreJSONStructure && typeof key === 'string') {\n    path = deepFind(data, key, keySeparator);\n    if (path === undefined) path = deepFind(defaultData, key, keySeparator);\n  }\n  return path;\n}\nvar Interpolator = function () {\n  function Interpolator() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _classCallCheck(this, Interpolator);\n    this.logger = baseLogger.create('interpolator');\n    this.options = options;\n    this.format = options.interpolation && options.interpolation.format || function (value) {\n      return value;\n    };\n    this.init(options);\n  }\n  _createClass(Interpolator, [{\n    key: \"init\",\n    value: function init() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      if (!options.interpolation) options.interpolation = {\n        escapeValue: true\n      };\n      var iOpts = options.interpolation;\n      this.escape = iOpts.escape !== undefined ? iOpts.escape : escape;\n      this.escapeValue = iOpts.escapeValue !== undefined ? iOpts.escapeValue : true;\n      this.useRawValueToEscape = iOpts.useRawValueToEscape !== undefined ? iOpts.useRawValueToEscape : false;\n      this.prefix = iOpts.prefix ? regexEscape(iOpts.prefix) : iOpts.prefixEscaped || '{{';\n      this.suffix = iOpts.suffix ? regexEscape(iOpts.suffix) : iOpts.suffixEscaped || '}}';\n      this.formatSeparator = iOpts.formatSeparator ? iOpts.formatSeparator : iOpts.formatSeparator || ',';\n      this.unescapePrefix = iOpts.unescapeSuffix ? '' : iOpts.unescapePrefix || '-';\n      this.unescapeSuffix = this.unescapePrefix ? '' : iOpts.unescapeSuffix || '';\n      this.nestingPrefix = iOpts.nestingPrefix ? regexEscape(iOpts.nestingPrefix) : iOpts.nestingPrefixEscaped || regexEscape('$t(');\n      this.nestingSuffix = iOpts.nestingSuffix ? regexEscape(iOpts.nestingSuffix) : iOpts.nestingSuffixEscaped || regexEscape(')');\n      this.nestingOptionsSeparator = iOpts.nestingOptionsSeparator ? iOpts.nestingOptionsSeparator : iOpts.nestingOptionsSeparator || ',';\n      this.maxReplaces = iOpts.maxReplaces ? iOpts.maxReplaces : 1000;\n      this.alwaysFormat = iOpts.alwaysFormat !== undefined ? iOpts.alwaysFormat : false;\n      this.resetRegExp();\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      if (this.options) this.init(this.options);\n    }\n  }, {\n    key: \"resetRegExp\",\n    value: function resetRegExp() {\n      var regexpStr = \"\".concat(this.prefix, \"(.+?)\").concat(this.suffix);\n      this.regexp = new RegExp(regexpStr, 'g');\n      var regexpUnescapeStr = \"\".concat(this.prefix).concat(this.unescapePrefix, \"(.+?)\").concat(this.unescapeSuffix).concat(this.suffix);\n      this.regexpUnescape = new RegExp(regexpUnescapeStr, 'g');\n      var nestingRegexpStr = \"\".concat(this.nestingPrefix, \"(.+?)\").concat(this.nestingSuffix);\n      this.nestingRegexp = new RegExp(nestingRegexpStr, 'g');\n    }\n  }, {\n    key: \"interpolate\",\n    value: function interpolate(str, data, lng, options) {\n      var _this = this;\n      var match;\n      var value;\n      var replaces;\n      var defaultData = this.options && this.options.interpolation && this.options.interpolation.defaultVariables || {};\n      function regexSafe(val) {\n        return val.replace(/\\$/g, '$$$$');\n      }\n      var handleFormat = function handleFormat(key) {\n        if (key.indexOf(_this.formatSeparator) < 0) {\n          var path = deepFindWithDefaults(data, defaultData, key, _this.options.keySeparator, _this.options.ignoreJSONStructure);\n          return _this.alwaysFormat ? _this.format(path, undefined, lng, _objectSpread$3(_objectSpread$3(_objectSpread$3({}, options), data), {}, {\n            interpolationkey: key\n          })) : path;\n        }\n        var p = key.split(_this.formatSeparator);\n        var k = p.shift().trim();\n        var f = p.join(_this.formatSeparator).trim();\n        return _this.format(deepFindWithDefaults(data, defaultData, k, _this.options.keySeparator, _this.options.ignoreJSONStructure), f, lng, _objectSpread$3(_objectSpread$3(_objectSpread$3({}, options), data), {}, {\n          interpolationkey: k\n        }));\n      };\n      this.resetRegExp();\n      var missingInterpolationHandler = options && options.missingInterpolationHandler || this.options.missingInterpolationHandler;\n      var skipOnVariables = options && options.interpolation && options.interpolation.skipOnVariables !== undefined ? options.interpolation.skipOnVariables : this.options.interpolation.skipOnVariables;\n      var todos = [{\n        regex: this.regexpUnescape,\n        safeValue: function safeValue(val) {\n          return regexSafe(val);\n        }\n      }, {\n        regex: this.regexp,\n        safeValue: function safeValue(val) {\n          return _this.escapeValue ? regexSafe(_this.escape(val)) : regexSafe(val);\n        }\n      }];\n      todos.forEach(function (todo) {\n        replaces = 0;\n        while (match = todo.regex.exec(str)) {\n          var matchedVar = match[1].trim();\n          value = handleFormat(matchedVar);\n          if (value === undefined) {\n            if (typeof missingInterpolationHandler === 'function') {\n              var temp = missingInterpolationHandler(str, match, options);\n              value = typeof temp === 'string' ? temp : '';\n            } else if (options && Object.prototype.hasOwnProperty.call(options, matchedVar)) {\n              value = '';\n            } else if (skipOnVariables) {\n              value = match[0];\n              continue;\n            } else {\n              _this.logger.warn(\"missed to pass in variable \".concat(matchedVar, \" for interpolating \").concat(str));\n              value = '';\n            }\n          } else if (typeof value !== 'string' && !_this.useRawValueToEscape) {\n            value = makeString(value);\n          }\n          var safeValue = todo.safeValue(value);\n          str = str.replace(match[0], safeValue);\n          if (skipOnVariables) {\n            todo.regex.lastIndex += value.length;\n            todo.regex.lastIndex -= match[0].length;\n          } else {\n            todo.regex.lastIndex = 0;\n          }\n          replaces++;\n          if (replaces >= _this.maxReplaces) {\n            break;\n          }\n        }\n      });\n      return str;\n    }\n  }, {\n    key: \"nest\",\n    value: function nest(str, fc) {\n      var _this2 = this;\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var match;\n      var value;\n      var clonedOptions;\n      function handleHasOptions(key, inheritedOptions) {\n        var sep = this.nestingOptionsSeparator;\n        if (key.indexOf(sep) < 0) return key;\n        var c = key.split(new RegExp(\"\".concat(sep, \"[ ]*{\")));\n        var optionsString = \"{\".concat(c[1]);\n        key = c[0];\n        optionsString = this.interpolate(optionsString, clonedOptions);\n        var matchedSingleQuotes = optionsString.match(/'/g);\n        var matchedDoubleQuotes = optionsString.match(/\"/g);\n        if (matchedSingleQuotes && matchedSingleQuotes.length % 2 === 0 && !matchedDoubleQuotes || matchedDoubleQuotes.length % 2 !== 0) {\n          optionsString = optionsString.replace(/'/g, '\"');\n        }\n        try {\n          clonedOptions = JSON.parse(optionsString);\n          if (inheritedOptions) clonedOptions = _objectSpread$3(_objectSpread$3({}, inheritedOptions), clonedOptions);\n        } catch (e) {\n          this.logger.warn(\"failed parsing options string in nesting for key \".concat(key), e);\n          return \"\".concat(key).concat(sep).concat(optionsString);\n        }\n        delete clonedOptions.defaultValue;\n        return key;\n      }\n      while (match = this.nestingRegexp.exec(str)) {\n        var formatters = [];\n        clonedOptions = _objectSpread$3({}, options);\n        clonedOptions = clonedOptions.replace && typeof clonedOptions.replace !== 'string' ? clonedOptions.replace : clonedOptions;\n        clonedOptions.applyPostProcessor = false;\n        delete clonedOptions.defaultValue;\n        var doReduce = false;\n        if (match[0].indexOf(this.formatSeparator) !== -1 && !/{.*}/.test(match[1])) {\n          var r = match[1].split(this.formatSeparator).map(function (elem) {\n            return elem.trim();\n          });\n          match[1] = r.shift();\n          formatters = r;\n          doReduce = true;\n        }\n        value = fc(handleHasOptions.call(this, match[1].trim(), clonedOptions), clonedOptions);\n        if (value && match[0] === str && typeof value !== 'string') return value;\n        if (typeof value !== 'string') value = makeString(value);\n        if (!value) {\n          this.logger.warn(\"missed to resolve \".concat(match[1], \" for nesting \").concat(str));\n          value = '';\n        }\n        if (doReduce) {\n          value = formatters.reduce(function (v, f) {\n            return _this2.format(v, f, options.lng, _objectSpread$3(_objectSpread$3({}, options), {}, {\n              interpolationkey: match[1].trim()\n            }));\n          }, value.trim());\n        }\n        str = str.replace(match[0], value);\n        this.regexp.lastIndex = 0;\n      }\n      return str;\n    }\n  }]);\n  return Interpolator;\n}();\n\nfunction ownKeys$2(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread$2(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$2(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$2(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction parseFormatStr(formatStr) {\n  var formatName = formatStr.toLowerCase().trim();\n  var formatOptions = {};\n  if (formatStr.indexOf('(') > -1) {\n    var p = formatStr.split('(');\n    formatName = p[0].toLowerCase().trim();\n    var optStr = p[1].substring(0, p[1].length - 1);\n    if (formatName === 'currency' && optStr.indexOf(':') < 0) {\n      if (!formatOptions.currency) formatOptions.currency = optStr.trim();\n    } else if (formatName === 'relativetime' && optStr.indexOf(':') < 0) {\n      if (!formatOptions.range) formatOptions.range = optStr.trim();\n    } else {\n      var opts = optStr.split(';');\n      opts.forEach(function (opt) {\n        if (!opt) return;\n        var _opt$split = opt.split(':'),\n          _opt$split2 = _toArray(_opt$split),\n          key = _opt$split2[0],\n          rest = _opt$split2.slice(1);\n        var val = rest.join(':').trim().replace(/^'+|'+$/g, '');\n        if (!formatOptions[key.trim()]) formatOptions[key.trim()] = val;\n        if (val === 'false') formatOptions[key.trim()] = false;\n        if (val === 'true') formatOptions[key.trim()] = true;\n        if (!isNaN(val)) formatOptions[key.trim()] = parseInt(val, 10);\n      });\n    }\n  }\n  return {\n    formatName: formatName,\n    formatOptions: formatOptions\n  };\n}\nfunction createCachedFormatter(fn) {\n  var cache = {};\n  return function invokeFormatter(val, lng, options) {\n    var key = lng + JSON.stringify(options);\n    var formatter = cache[key];\n    if (!formatter) {\n      formatter = fn(lng, options);\n      cache[key] = formatter;\n    }\n    return formatter(val);\n  };\n}\nvar Formatter = function () {\n  function Formatter() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _classCallCheck(this, Formatter);\n    this.logger = baseLogger.create('formatter');\n    this.options = options;\n    this.formats = {\n      number: createCachedFormatter(function (lng, opt) {\n        var formatter = new Intl.NumberFormat(lng, _objectSpread$2({}, opt));\n        return function (val) {\n          return formatter.format(val);\n        };\n      }),\n      currency: createCachedFormatter(function (lng, opt) {\n        var formatter = new Intl.NumberFormat(lng, _objectSpread$2(_objectSpread$2({}, opt), {}, {\n          style: 'currency'\n        }));\n        return function (val) {\n          return formatter.format(val);\n        };\n      }),\n      datetime: createCachedFormatter(function (lng, opt) {\n        var formatter = new Intl.DateTimeFormat(lng, _objectSpread$2({}, opt));\n        return function (val) {\n          return formatter.format(val);\n        };\n      }),\n      relativetime: createCachedFormatter(function (lng, opt) {\n        var formatter = new Intl.RelativeTimeFormat(lng, _objectSpread$2({}, opt));\n        return function (val) {\n          return formatter.format(val, opt.range || 'day');\n        };\n      }),\n      list: createCachedFormatter(function (lng, opt) {\n        var formatter = new Intl.ListFormat(lng, _objectSpread$2({}, opt));\n        return function (val) {\n          return formatter.format(val);\n        };\n      })\n    };\n    this.init(options);\n  }\n  _createClass(Formatter, [{\n    key: \"init\",\n    value: function init(services) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        interpolation: {}\n      };\n      var iOpts = options.interpolation;\n      this.formatSeparator = iOpts.formatSeparator ? iOpts.formatSeparator : iOpts.formatSeparator || ',';\n    }\n  }, {\n    key: \"add\",\n    value: function add(name, fc) {\n      this.formats[name.toLowerCase().trim()] = fc;\n    }\n  }, {\n    key: \"addCached\",\n    value: function addCached(name, fc) {\n      this.formats[name.toLowerCase().trim()] = createCachedFormatter(fc);\n    }\n  }, {\n    key: \"format\",\n    value: function format(value, _format, lng) {\n      var _this = this;\n      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n      var formats = _format.split(this.formatSeparator);\n      var result = formats.reduce(function (mem, f) {\n        var _parseFormatStr = parseFormatStr(f),\n          formatName = _parseFormatStr.formatName,\n          formatOptions = _parseFormatStr.formatOptions;\n        if (_this.formats[formatName]) {\n          var formatted = mem;\n          try {\n            var valOptions = options && options.formatParams && options.formatParams[options.interpolationkey] || {};\n            var l = valOptions.locale || valOptions.lng || options.locale || options.lng || lng;\n            formatted = _this.formats[formatName](mem, l, _objectSpread$2(_objectSpread$2(_objectSpread$2({}, formatOptions), options), valOptions));\n          } catch (error) {\n            _this.logger.warn(error);\n          }\n          return formatted;\n        } else {\n          _this.logger.warn(\"there was no format function for \".concat(formatName));\n        }\n        return mem;\n      }, value);\n      return result;\n    }\n  }]);\n  return Formatter;\n}();\n\nfunction ownKeys$1(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread$1(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$1(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$1(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _createSuper$1(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$1(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct$1() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction removePending(q, name) {\n  if (q.pending[name] !== undefined) {\n    delete q.pending[name];\n    q.pendingCount--;\n  }\n}\nvar Connector = function (_EventEmitter) {\n  _inherits(Connector, _EventEmitter);\n  var _super = _createSuper$1(Connector);\n  function Connector(backend, store, services) {\n    var _this;\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    _classCallCheck(this, Connector);\n    _this = _super.call(this);\n    if (isIE10) {\n      EventEmitter.call(_assertThisInitialized(_this));\n    }\n    _this.backend = backend;\n    _this.store = store;\n    _this.services = services;\n    _this.languageUtils = services.languageUtils;\n    _this.options = options;\n    _this.logger = baseLogger.create('backendConnector');\n    _this.waitingReads = [];\n    _this.maxParallelReads = options.maxParallelReads || 10;\n    _this.readingCalls = 0;\n    _this.maxRetries = options.maxRetries >= 0 ? options.maxRetries : 5;\n    _this.retryTimeout = options.retryTimeout >= 1 ? options.retryTimeout : 350;\n    _this.state = {};\n    _this.queue = [];\n    if (_this.backend && _this.backend.init) {\n      _this.backend.init(services, options.backend, options);\n    }\n    return _this;\n  }\n  _createClass(Connector, [{\n    key: \"queueLoad\",\n    value: function queueLoad(languages, namespaces, options, callback) {\n      var _this2 = this;\n      var toLoad = {};\n      var pending = {};\n      var toLoadLanguages = {};\n      var toLoadNamespaces = {};\n      languages.forEach(function (lng) {\n        var hasAllNamespaces = true;\n        namespaces.forEach(function (ns) {\n          var name = \"\".concat(lng, \"|\").concat(ns);\n          if (!options.reload && _this2.store.hasResourceBundle(lng, ns)) {\n            _this2.state[name] = 2;\n          } else if (_this2.state[name] < 0) ; else if (_this2.state[name] === 1) {\n            if (pending[name] === undefined) pending[name] = true;\n          } else {\n            _this2.state[name] = 1;\n            hasAllNamespaces = false;\n            if (pending[name] === undefined) pending[name] = true;\n            if (toLoad[name] === undefined) toLoad[name] = true;\n            if (toLoadNamespaces[ns] === undefined) toLoadNamespaces[ns] = true;\n          }\n        });\n        if (!hasAllNamespaces) toLoadLanguages[lng] = true;\n      });\n      if (Object.keys(toLoad).length || Object.keys(pending).length) {\n        this.queue.push({\n          pending: pending,\n          pendingCount: Object.keys(pending).length,\n          loaded: {},\n          errors: [],\n          callback: callback\n        });\n      }\n      return {\n        toLoad: Object.keys(toLoad),\n        pending: Object.keys(pending),\n        toLoadLanguages: Object.keys(toLoadLanguages),\n        toLoadNamespaces: Object.keys(toLoadNamespaces)\n      };\n    }\n  }, {\n    key: \"loaded\",\n    value: function loaded(name, err, data) {\n      var s = name.split('|');\n      var lng = s[0];\n      var ns = s[1];\n      if (err) this.emit('failedLoading', lng, ns, err);\n      if (data) {\n        this.store.addResourceBundle(lng, ns, data);\n      }\n      this.state[name] = err ? -1 : 2;\n      var loaded = {};\n      this.queue.forEach(function (q) {\n        pushPath(q.loaded, [lng], ns);\n        removePending(q, name);\n        if (err) q.errors.push(err);\n        if (q.pendingCount === 0 && !q.done) {\n          Object.keys(q.loaded).forEach(function (l) {\n            if (!loaded[l]) loaded[l] = {};\n            var loadedKeys = q.loaded[l];\n            if (loadedKeys.length) {\n              loadedKeys.forEach(function (n) {\n                if (loaded[l][n] === undefined) loaded[l][n] = true;\n              });\n            }\n          });\n          q.done = true;\n          if (q.errors.length) {\n            q.callback(q.errors);\n          } else {\n            q.callback();\n          }\n        }\n      });\n      this.emit('loaded', loaded);\n      this.queue = this.queue.filter(function (q) {\n        return !q.done;\n      });\n    }\n  }, {\n    key: \"read\",\n    value: function read(lng, ns, fcName) {\n      var _this3 = this;\n      var tried = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      var wait = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : this.retryTimeout;\n      var callback = arguments.length > 5 ? arguments[5] : undefined;\n      if (!lng.length) return callback(null, {});\n      if (this.readingCalls >= this.maxParallelReads) {\n        this.waitingReads.push({\n          lng: lng,\n          ns: ns,\n          fcName: fcName,\n          tried: tried,\n          wait: wait,\n          callback: callback\n        });\n        return;\n      }\n      this.readingCalls++;\n      var resolver = function resolver(err, data) {\n        _this3.readingCalls--;\n        if (_this3.waitingReads.length > 0) {\n          var next = _this3.waitingReads.shift();\n          _this3.read(next.lng, next.ns, next.fcName, next.tried, next.wait, next.callback);\n        }\n        if (err && data && tried < _this3.maxRetries) {\n          setTimeout(function () {\n            _this3.read.call(_this3, lng, ns, fcName, tried + 1, wait * 2, callback);\n          }, wait);\n          return;\n        }\n        callback(err, data);\n      };\n      var fc = this.backend[fcName].bind(this.backend);\n      if (fc.length === 2) {\n        try {\n          var r = fc(lng, ns);\n          if (r && typeof r.then === 'function') {\n            r.then(function (data) {\n              return resolver(null, data);\n            })[\"catch\"](resolver);\n          } else {\n            resolver(null, r);\n          }\n        } catch (err) {\n          resolver(err);\n        }\n        return;\n      }\n      return fc(lng, ns, resolver);\n    }\n  }, {\n    key: \"prepareLoading\",\n    value: function prepareLoading(languages, namespaces) {\n      var _this4 = this;\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var callback = arguments.length > 3 ? arguments[3] : undefined;\n      if (!this.backend) {\n        this.logger.warn('No backend was added via i18next.use. Will not load resources.');\n        return callback && callback();\n      }\n      if (typeof languages === 'string') languages = this.languageUtils.toResolveHierarchy(languages);\n      if (typeof namespaces === 'string') namespaces = [namespaces];\n      var toLoad = this.queueLoad(languages, namespaces, options, callback);\n      if (!toLoad.toLoad.length) {\n        if (!toLoad.pending.length) callback();\n        return null;\n      }\n      toLoad.toLoad.forEach(function (name) {\n        _this4.loadOne(name);\n      });\n    }\n  }, {\n    key: \"load\",\n    value: function load(languages, namespaces, callback) {\n      this.prepareLoading(languages, namespaces, {}, callback);\n    }\n  }, {\n    key: \"reload\",\n    value: function reload(languages, namespaces, callback) {\n      this.prepareLoading(languages, namespaces, {\n        reload: true\n      }, callback);\n    }\n  }, {\n    key: \"loadOne\",\n    value: function loadOne(name) {\n      var _this5 = this;\n      var prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n      var s = name.split('|');\n      var lng = s[0];\n      var ns = s[1];\n      this.read(lng, ns, 'read', undefined, undefined, function (err, data) {\n        if (err) _this5.logger.warn(\"\".concat(prefix, \"loading namespace \").concat(ns, \" for language \").concat(lng, \" failed\"), err);\n        if (!err && data) _this5.logger.log(\"\".concat(prefix, \"loaded namespace \").concat(ns, \" for language \").concat(lng), data);\n        _this5.loaded(name, err, data);\n      });\n    }\n  }, {\n    key: \"saveMissing\",\n    value: function saveMissing(languages, namespace, key, fallbackValue, isUpdate) {\n      var options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {};\n      var clb = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : function () {};\n      if (this.services.utils && this.services.utils.hasLoadedNamespace && !this.services.utils.hasLoadedNamespace(namespace)) {\n        this.logger.warn(\"did not save key \\\"\".concat(key, \"\\\" as the namespace \\\"\").concat(namespace, \"\\\" was not yet loaded\"), 'This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!');\n        return;\n      }\n      if (key === undefined || key === null || key === '') return;\n      if (this.backend && this.backend.create) {\n        var opts = _objectSpread$1(_objectSpread$1({}, options), {}, {\n          isUpdate: isUpdate\n        });\n        var fc = this.backend.create.bind(this.backend);\n        if (fc.length < 6) {\n          try {\n            var r;\n            if (fc.length === 5) {\n              r = fc(languages, namespace, key, fallbackValue, opts);\n            } else {\n              r = fc(languages, namespace, key, fallbackValue);\n            }\n            if (r && typeof r.then === 'function') {\n              r.then(function (data) {\n                return clb(null, data);\n              })[\"catch\"](clb);\n            } else {\n              clb(null, r);\n            }\n          } catch (err) {\n            clb(err);\n          }\n        } else {\n          fc(languages, namespace, key, fallbackValue, clb, opts);\n        }\n      }\n      if (!languages || !languages[0]) return;\n      this.store.addResource(languages[0], namespace, key, fallbackValue);\n    }\n  }]);\n  return Connector;\n}(EventEmitter);\n\nfunction get() {\n  return {\n    debug: false,\n    initImmediate: true,\n    ns: ['translation'],\n    defaultNS: ['translation'],\n    fallbackLng: ['dev'],\n    fallbackNS: false,\n    supportedLngs: false,\n    nonExplicitSupportedLngs: false,\n    load: 'all',\n    preload: false,\n    simplifyPluralSuffix: true,\n    keySeparator: '.',\n    nsSeparator: ':',\n    pluralSeparator: '_',\n    contextSeparator: '_',\n    partialBundledLanguages: false,\n    saveMissing: false,\n    updateMissing: false,\n    saveMissingTo: 'fallback',\n    saveMissingPlurals: true,\n    missingKeyHandler: false,\n    missingInterpolationHandler: false,\n    postProcess: false,\n    postProcessPassResolved: false,\n    returnNull: true,\n    returnEmptyString: true,\n    returnObjects: false,\n    joinArrays: false,\n    returnedObjectHandler: false,\n    parseMissingKeyHandler: false,\n    appendNamespaceToMissingKey: false,\n    appendNamespaceToCIMode: false,\n    overloadTranslationOptionHandler: function handle(args) {\n      var ret = {};\n      if (_typeof(args[1]) === 'object') ret = args[1];\n      if (typeof args[1] === 'string') ret.defaultValue = args[1];\n      if (typeof args[2] === 'string') ret.tDescription = args[2];\n      if (_typeof(args[2]) === 'object' || _typeof(args[3]) === 'object') {\n        var options = args[3] || args[2];\n        Object.keys(options).forEach(function (key) {\n          ret[key] = options[key];\n        });\n      }\n      return ret;\n    },\n    interpolation: {\n      escapeValue: true,\n      format: function format(value, _format, lng, options) {\n        return value;\n      },\n      prefix: '{{',\n      suffix: '}}',\n      formatSeparator: ',',\n      unescapePrefix: '-',\n      nestingPrefix: '$t(',\n      nestingSuffix: ')',\n      nestingOptionsSeparator: ',',\n      maxReplaces: 1000,\n      skipOnVariables: true\n    }\n  };\n}\nfunction transformOptions(options) {\n  if (typeof options.ns === 'string') options.ns = [options.ns];\n  if (typeof options.fallbackLng === 'string') options.fallbackLng = [options.fallbackLng];\n  if (typeof options.fallbackNS === 'string') options.fallbackNS = [options.fallbackNS];\n  if (options.supportedLngs && options.supportedLngs.indexOf('cimode') < 0) {\n    options.supportedLngs = options.supportedLngs.concat(['cimode']);\n  }\n  return options;\n}\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction noop() {}\nfunction bindMemberFunctions(inst) {\n  var mems = Object.getOwnPropertyNames(Object.getPrototypeOf(inst));\n  mems.forEach(function (mem) {\n    if (typeof inst[mem] === 'function') {\n      inst[mem] = inst[mem].bind(inst);\n    }\n  });\n}\nvar I18n = function (_EventEmitter) {\n  _inherits(I18n, _EventEmitter);\n  var _super = _createSuper(I18n);\n  function I18n() {\n    var _this;\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var callback = arguments.length > 1 ? arguments[1] : undefined;\n    _classCallCheck(this, I18n);\n    _this = _super.call(this);\n    if (isIE10) {\n      EventEmitter.call(_assertThisInitialized(_this));\n    }\n    _this.options = transformOptions(options);\n    _this.services = {};\n    _this.logger = baseLogger;\n    _this.modules = {\n      external: []\n    };\n    bindMemberFunctions(_assertThisInitialized(_this));\n    if (callback && !_this.isInitialized && !options.isClone) {\n      if (!_this.options.initImmediate) {\n        _this.init(options, callback);\n        return _possibleConstructorReturn(_this, _assertThisInitialized(_this));\n      }\n      setTimeout(function () {\n        _this.init(options, callback);\n      }, 0);\n    }\n    return _this;\n  }\n  _createClass(I18n, [{\n    key: \"init\",\n    value: function init() {\n      var _this2 = this;\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var callback = arguments.length > 1 ? arguments[1] : undefined;\n      if (typeof options === 'function') {\n        callback = options;\n        options = {};\n      }\n      if (!options.defaultNS && options.defaultNS !== false && options.ns) {\n        if (typeof options.ns === 'string') {\n          options.defaultNS = options.ns;\n        } else if (options.ns.indexOf('translation') < 0) {\n          options.defaultNS = options.ns[0];\n        }\n      }\n      var defOpts = get();\n      this.options = _objectSpread(_objectSpread(_objectSpread({}, defOpts), this.options), transformOptions(options));\n      if (this.options.compatibilityAPI !== 'v1') {\n        this.options.interpolation = _objectSpread(_objectSpread({}, defOpts.interpolation), this.options.interpolation);\n      }\n      if (options.keySeparator !== undefined) {\n        this.options.userDefinedKeySeparator = options.keySeparator;\n      }\n      if (options.nsSeparator !== undefined) {\n        this.options.userDefinedNsSeparator = options.nsSeparator;\n      }\n      function createClassOnDemand(ClassOrObject) {\n        if (!ClassOrObject) return null;\n        if (typeof ClassOrObject === 'function') return new ClassOrObject();\n        return ClassOrObject;\n      }\n      if (!this.options.isClone) {\n        if (this.modules.logger) {\n          baseLogger.init(createClassOnDemand(this.modules.logger), this.options);\n        } else {\n          baseLogger.init(null, this.options);\n        }\n        var formatter;\n        if (this.modules.formatter) {\n          formatter = this.modules.formatter;\n        } else if (typeof Intl !== 'undefined') {\n          formatter = Formatter;\n        }\n        var lu = new LanguageUtil(this.options);\n        this.store = new ResourceStore(this.options.resources, this.options);\n        var s = this.services;\n        s.logger = baseLogger;\n        s.resourceStore = this.store;\n        s.languageUtils = lu;\n        s.pluralResolver = new PluralResolver(lu, {\n          prepend: this.options.pluralSeparator,\n          compatibilityJSON: this.options.compatibilityJSON,\n          simplifyPluralSuffix: this.options.simplifyPluralSuffix\n        });\n        if (formatter && (!this.options.interpolation.format || this.options.interpolation.format === defOpts.interpolation.format)) {\n          s.formatter = createClassOnDemand(formatter);\n          s.formatter.init(s, this.options);\n          this.options.interpolation.format = s.formatter.format.bind(s.formatter);\n        }\n        s.interpolator = new Interpolator(this.options);\n        s.utils = {\n          hasLoadedNamespace: this.hasLoadedNamespace.bind(this)\n        };\n        s.backendConnector = new Connector(createClassOnDemand(this.modules.backend), s.resourceStore, s, this.options);\n        s.backendConnector.on('*', function (event) {\n          for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n            args[_key - 1] = arguments[_key];\n          }\n          _this2.emit.apply(_this2, [event].concat(args));\n        });\n        if (this.modules.languageDetector) {\n          s.languageDetector = createClassOnDemand(this.modules.languageDetector);\n          if (s.languageDetector.init) s.languageDetector.init(s, this.options.detection, this.options);\n        }\n        if (this.modules.i18nFormat) {\n          s.i18nFormat = createClassOnDemand(this.modules.i18nFormat);\n          if (s.i18nFormat.init) s.i18nFormat.init(this);\n        }\n        this.translator = new Translator(this.services, this.options);\n        this.translator.on('*', function (event) {\n          for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n            args[_key2 - 1] = arguments[_key2];\n          }\n          _this2.emit.apply(_this2, [event].concat(args));\n        });\n        this.modules.external.forEach(function (m) {\n          if (m.init) m.init(_this2);\n        });\n      }\n      this.format = this.options.interpolation.format;\n      if (!callback) callback = noop;\n      if (this.options.fallbackLng && !this.services.languageDetector && !this.options.lng) {\n        var codes = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);\n        if (codes.length > 0 && codes[0] !== 'dev') this.options.lng = codes[0];\n      }\n      if (!this.services.languageDetector && !this.options.lng) {\n        this.logger.warn('init: no languageDetector is used and no lng is defined');\n      }\n      var storeApi = ['getResource', 'hasResourceBundle', 'getResourceBundle', 'getDataByLanguage'];\n      storeApi.forEach(function (fcName) {\n        _this2[fcName] = function () {\n          var _this2$store;\n          return (_this2$store = _this2.store)[fcName].apply(_this2$store, arguments);\n        };\n      });\n      var storeApiChained = ['addResource', 'addResources', 'addResourceBundle', 'removeResourceBundle'];\n      storeApiChained.forEach(function (fcName) {\n        _this2[fcName] = function () {\n          var _this2$store2;\n          (_this2$store2 = _this2.store)[fcName].apply(_this2$store2, arguments);\n          return _this2;\n        };\n      });\n      var deferred = defer();\n      var load = function load() {\n        var finish = function finish(err, t) {\n          if (_this2.isInitialized && !_this2.initializedStoreOnce) _this2.logger.warn('init: i18next is already initialized. You should call init just once!');\n          _this2.isInitialized = true;\n          if (!_this2.options.isClone) _this2.logger.log('initialized', _this2.options);\n          _this2.emit('initialized', _this2.options);\n          deferred.resolve(t);\n          callback(err, t);\n        };\n        if (_this2.languages && _this2.options.compatibilityAPI !== 'v1' && !_this2.isInitialized) return finish(null, _this2.t.bind(_this2));\n        _this2.changeLanguage(_this2.options.lng, finish);\n      };\n      if (this.options.resources || !this.options.initImmediate) {\n        load();\n      } else {\n        setTimeout(load, 0);\n      }\n      return deferred;\n    }\n  }, {\n    key: \"loadResources\",\n    value: function loadResources(language) {\n      var _this3 = this;\n      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n      var usedCallback = callback;\n      var usedLng = typeof language === 'string' ? language : this.language;\n      if (typeof language === 'function') usedCallback = language;\n      if (!this.options.resources || this.options.partialBundledLanguages) {\n        if (usedLng && usedLng.toLowerCase() === 'cimode') return usedCallback();\n        var toLoad = [];\n        var append = function append(lng) {\n          if (!lng) return;\n          var lngs = _this3.services.languageUtils.toResolveHierarchy(lng);\n          lngs.forEach(function (l) {\n            if (toLoad.indexOf(l) < 0) toLoad.push(l);\n          });\n        };\n        if (!usedLng) {\n          var fallbacks = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);\n          fallbacks.forEach(function (l) {\n            return append(l);\n          });\n        } else {\n          append(usedLng);\n        }\n        if (this.options.preload) {\n          this.options.preload.forEach(function (l) {\n            return append(l);\n          });\n        }\n        this.services.backendConnector.load(toLoad, this.options.ns, function (e) {\n          if (!e && !_this3.resolvedLanguage && _this3.language) _this3.setResolvedLanguage(_this3.language);\n          usedCallback(e);\n        });\n      } else {\n        usedCallback(null);\n      }\n    }\n  }, {\n    key: \"reloadResources\",\n    value: function reloadResources(lngs, ns, callback) {\n      var deferred = defer();\n      if (!lngs) lngs = this.languages;\n      if (!ns) ns = this.options.ns;\n      if (!callback) callback = noop;\n      this.services.backendConnector.reload(lngs, ns, function (err) {\n        deferred.resolve();\n        callback(err);\n      });\n      return deferred;\n    }\n  }, {\n    key: \"use\",\n    value: function use(module) {\n      if (!module) throw new Error('You are passing an undefined module! Please check the object you are passing to i18next.use()');\n      if (!module.type) throw new Error('You are passing a wrong module! Please check the object you are passing to i18next.use()');\n      if (module.type === 'backend') {\n        this.modules.backend = module;\n      }\n      if (module.type === 'logger' || module.log && module.warn && module.error) {\n        this.modules.logger = module;\n      }\n      if (module.type === 'languageDetector') {\n        this.modules.languageDetector = module;\n      }\n      if (module.type === 'i18nFormat') {\n        this.modules.i18nFormat = module;\n      }\n      if (module.type === 'postProcessor') {\n        postProcessor.addPostProcessor(module);\n      }\n      if (module.type === 'formatter') {\n        this.modules.formatter = module;\n      }\n      if (module.type === '3rdParty') {\n        this.modules.external.push(module);\n      }\n      return this;\n    }\n  }, {\n    key: \"setResolvedLanguage\",\n    value: function setResolvedLanguage(l) {\n      if (!l || !this.languages) return;\n      if (['cimode', 'dev'].indexOf(l) > -1) return;\n      for (var li = 0; li < this.languages.length; li++) {\n        var lngInLngs = this.languages[li];\n        if (['cimode', 'dev'].indexOf(lngInLngs) > -1) continue;\n        if (this.store.hasLanguageSomeTranslations(lngInLngs)) {\n          this.resolvedLanguage = lngInLngs;\n          break;\n        }\n      }\n    }\n  }, {\n    key: \"changeLanguage\",\n    value: function changeLanguage(lng, callback) {\n      var _this4 = this;\n      this.isLanguageChangingTo = lng;\n      var deferred = defer();\n      this.emit('languageChanging', lng);\n      var setLngProps = function setLngProps(l) {\n        _this4.language = l;\n        _this4.languages = _this4.services.languageUtils.toResolveHierarchy(l);\n        _this4.resolvedLanguage = undefined;\n        _this4.setResolvedLanguage(l);\n      };\n      var done = function done(err, l) {\n        if (l) {\n          setLngProps(l);\n          _this4.translator.changeLanguage(l);\n          _this4.isLanguageChangingTo = undefined;\n          _this4.emit('languageChanged', l);\n          _this4.logger.log('languageChanged', l);\n        } else {\n          _this4.isLanguageChangingTo = undefined;\n        }\n        deferred.resolve(function () {\n          return _this4.t.apply(_this4, arguments);\n        });\n        if (callback) callback(err, function () {\n          return _this4.t.apply(_this4, arguments);\n        });\n      };\n      var setLng = function setLng(lngs) {\n        if (!lng && !lngs && _this4.services.languageDetector) lngs = [];\n        var l = typeof lngs === 'string' ? lngs : _this4.services.languageUtils.getBestMatchFromCodes(lngs);\n        if (l) {\n          if (!_this4.language) {\n            setLngProps(l);\n          }\n          if (!_this4.translator.language) _this4.translator.changeLanguage(l);\n          if (_this4.services.languageDetector && _this4.services.languageDetector.cacheUserLanguage) _this4.services.languageDetector.cacheUserLanguage(l);\n        }\n        _this4.loadResources(l, function (err) {\n          done(err, l);\n        });\n      };\n      if (!lng && this.services.languageDetector && !this.services.languageDetector.async) {\n        setLng(this.services.languageDetector.detect());\n      } else if (!lng && this.services.languageDetector && this.services.languageDetector.async) {\n        if (this.services.languageDetector.detect.length === 0) {\n          this.services.languageDetector.detect().then(setLng);\n        } else {\n          this.services.languageDetector.detect(setLng);\n        }\n      } else {\n        setLng(lng);\n      }\n      return deferred;\n    }\n  }, {\n    key: \"getFixedT\",\n    value: function getFixedT(lng, ns, keyPrefix) {\n      var _this5 = this;\n      var fixedT = function fixedT(key, opts) {\n        var options;\n        if (_typeof(opts) !== 'object') {\n          for (var _len3 = arguments.length, rest = new Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {\n            rest[_key3 - 2] = arguments[_key3];\n          }\n          options = _this5.options.overloadTranslationOptionHandler([key, opts].concat(rest));\n        } else {\n          options = _objectSpread({}, opts);\n        }\n        options.lng = options.lng || fixedT.lng;\n        options.lngs = options.lngs || fixedT.lngs;\n        options.ns = options.ns || fixedT.ns;\n        options.keyPrefix = options.keyPrefix || keyPrefix || fixedT.keyPrefix;\n        var keySeparator = _this5.options.keySeparator || '.';\n        var resultKey;\n        if (options.keyPrefix && Array.isArray(key)) {\n          resultKey = key.map(function (k) {\n            return \"\".concat(options.keyPrefix).concat(keySeparator).concat(k);\n          });\n        } else {\n          resultKey = options.keyPrefix ? \"\".concat(options.keyPrefix).concat(keySeparator).concat(key) : key;\n        }\n        return _this5.t(resultKey, options);\n      };\n      if (typeof lng === 'string') {\n        fixedT.lng = lng;\n      } else {\n        fixedT.lngs = lng;\n      }\n      fixedT.ns = ns;\n      fixedT.keyPrefix = keyPrefix;\n      return fixedT;\n    }\n  }, {\n    key: \"t\",\n    value: function t() {\n      var _this$translator;\n      return this.translator && (_this$translator = this.translator).translate.apply(_this$translator, arguments);\n    }\n  }, {\n    key: \"exists\",\n    value: function exists() {\n      var _this$translator2;\n      return this.translator && (_this$translator2 = this.translator).exists.apply(_this$translator2, arguments);\n    }\n  }, {\n    key: \"setDefaultNamespace\",\n    value: function setDefaultNamespace(ns) {\n      this.options.defaultNS = ns;\n    }\n  }, {\n    key: \"hasLoadedNamespace\",\n    value: function hasLoadedNamespace(ns) {\n      var _this6 = this;\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      if (!this.isInitialized) {\n        this.logger.warn('hasLoadedNamespace: i18next was not initialized', this.languages);\n        return false;\n      }\n      if (!this.languages || !this.languages.length) {\n        this.logger.warn('hasLoadedNamespace: i18n.languages were undefined or empty', this.languages);\n        return false;\n      }\n      var lng = options.lng || this.resolvedLanguage || this.languages[0];\n      var fallbackLng = this.options ? this.options.fallbackLng : false;\n      var lastLng = this.languages[this.languages.length - 1];\n      if (lng.toLowerCase() === 'cimode') return true;\n      var loadNotPending = function loadNotPending(l, n) {\n        var loadState = _this6.services.backendConnector.state[\"\".concat(l, \"|\").concat(n)];\n        return loadState === -1 || loadState === 2;\n      };\n      if (options.precheck) {\n        var preResult = options.precheck(this, loadNotPending);\n        if (preResult !== undefined) return preResult;\n      }\n      if (this.hasResourceBundle(lng, ns)) return true;\n      if (!this.services.backendConnector.backend || this.options.resources && !this.options.partialBundledLanguages) return true;\n      if (loadNotPending(lng, ns) && (!fallbackLng || loadNotPending(lastLng, ns))) return true;\n      return false;\n    }\n  }, {\n    key: \"loadNamespaces\",\n    value: function loadNamespaces(ns, callback) {\n      var _this7 = this;\n      var deferred = defer();\n      if (!this.options.ns) {\n        if (callback) callback();\n        return Promise.resolve();\n      }\n      if (typeof ns === 'string') ns = [ns];\n      ns.forEach(function (n) {\n        if (_this7.options.ns.indexOf(n) < 0) _this7.options.ns.push(n);\n      });\n      this.loadResources(function (err) {\n        deferred.resolve();\n        if (callback) callback(err);\n      });\n      return deferred;\n    }\n  }, {\n    key: \"loadLanguages\",\n    value: function loadLanguages(lngs, callback) {\n      var deferred = defer();\n      if (typeof lngs === 'string') lngs = [lngs];\n      var preloaded = this.options.preload || [];\n      var newLngs = lngs.filter(function (lng) {\n        return preloaded.indexOf(lng) < 0;\n      });\n      if (!newLngs.length) {\n        if (callback) callback();\n        return Promise.resolve();\n      }\n      this.options.preload = preloaded.concat(newLngs);\n      this.loadResources(function (err) {\n        deferred.resolve();\n        if (callback) callback(err);\n      });\n      return deferred;\n    }\n  }, {\n    key: \"dir\",\n    value: function dir(lng) {\n      if (!lng) lng = this.resolvedLanguage || (this.languages && this.languages.length > 0 ? this.languages[0] : this.language);\n      if (!lng) return 'rtl';\n      var rtlLngs = ['ar', 'shu', 'sqr', 'ssh', 'xaa', 'yhd', 'yud', 'aao', 'abh', 'abv', 'acm', 'acq', 'acw', 'acx', 'acy', 'adf', 'ads', 'aeb', 'aec', 'afb', 'ajp', 'apc', 'apd', 'arb', 'arq', 'ars', 'ary', 'arz', 'auz', 'avl', 'ayh', 'ayl', 'ayn', 'ayp', 'bbz', 'pga', 'he', 'iw', 'ps', 'pbt', 'pbu', 'pst', 'prp', 'prd', 'ug', 'ur', 'ydd', 'yds', 'yih', 'ji', 'yi', 'hbo', 'men', 'xmn', 'fa', 'jpr', 'peo', 'pes', 'prs', 'dv', 'sam', 'ckb'];\n      var languageUtils = this.services && this.services.languageUtils || new LanguageUtil(get());\n      return rtlLngs.indexOf(languageUtils.getLanguagePartFromCode(lng)) > -1 || lng.toLowerCase().indexOf('-arab') > 1 ? 'rtl' : 'ltr';\n    }\n  }, {\n    key: \"cloneInstance\",\n    value: function cloneInstance() {\n      var _this8 = this;\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n      var mergedOptions = _objectSpread(_objectSpread(_objectSpread({}, this.options), options), {\n        isClone: true\n      });\n      var clone = new I18n(mergedOptions);\n      if (options.debug !== undefined || options.prefix !== undefined) {\n        clone.logger = clone.logger.clone(options);\n      }\n      var membersToCopy = ['store', 'services', 'language'];\n      membersToCopy.forEach(function (m) {\n        clone[m] = _this8[m];\n      });\n      clone.services = _objectSpread({}, this.services);\n      clone.services.utils = {\n        hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)\n      };\n      clone.translator = new Translator(clone.services, clone.options);\n      clone.translator.on('*', function (event) {\n        for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n          args[_key4 - 1] = arguments[_key4];\n        }\n        clone.emit.apply(clone, [event].concat(args));\n      });\n      clone.init(mergedOptions, callback);\n      clone.translator.options = clone.options;\n      clone.translator.backendConnector.services.utils = {\n        hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)\n      };\n      return clone;\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      return {\n        options: this.options,\n        store: this.store,\n        language: this.language,\n        languages: this.languages,\n        resolvedLanguage: this.resolvedLanguage\n      };\n    }\n  }]);\n  return I18n;\n}(EventEmitter);\n_defineProperty(I18n, \"createInstance\", function () {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var callback = arguments.length > 1 ? arguments[1] : undefined;\n  return new I18n(options, callback);\n});\nvar instance = I18n.createInstance();\ninstance.createInstance = I18n.createInstance;\n\nvar createInstance = instance.createInstance;\nvar dir = instance.dir;\nvar init = instance.init;\nvar loadResources = instance.loadResources;\nvar reloadResources = instance.reloadResources;\nvar use = instance.use;\nvar changeLanguage = instance.changeLanguage;\nvar getFixedT = instance.getFixedT;\nvar t = instance.t;\nvar exists = instance.exists;\nvar setDefaultNamespace = instance.setDefaultNamespace;\nvar hasLoadedNamespace = instance.hasLoadedNamespace;\nvar loadNamespaces = instance.loadNamespaces;\nvar loadLanguages = instance.loadLanguages;\n\nexport { changeLanguage, createInstance, instance as default, dir, exists, getFixedT, hasLoadedNamespace, init, loadLanguages, loadNamespaces, loadResources, reloadResources, setDefaultNamespace, t, use };\n","import React, { useContext, createContext, useEffect, useState, Children, isValidElement, useMemo, useRef, Suspense } from 'react';\nimport PropTypes from 'prop-types';\nimport { createVersionedContext, createVersionedValueMap, getOrCreateGlobalSingleton } from '@backstage/version-bridge';\nimport ObservableImpl from 'zen-observable';\nimport { SessionState, FeatureFlagState, AnalyticsContext, useAnalytics, attachComponentData, useApp, useApi, configApiRef, getComponentData, featureFlagsApiRef, appThemeApiRef, identityApiRef, useElementFilter } from '@backstage/core-plugin-api';\nimport { z } from 'zod';\nimport { ConfigReader } from '@backstage/config';\nexport { ConfigReader } from '@backstage/config';\nimport { createRoutesFromChildren, Route, useLocation, matchRoutes, Routes, generatePath, useRoutes } from 'react-router-dom';\nimport useAsync from 'react-use/lib/useAsync';\nimport { appLanguageApiRef, translationApiRef } from '@backstage/core-plugin-api/alpha';\nimport mapValues from 'lodash/mapValues';\nimport useObservable from 'react-use/lib/useObservable';\nimport { createInstance } from 'i18next';\n\nvar __defProp$l = Object.defineProperty;\nvar __defNormalProp$l = (obj, key, value) => key in obj ? __defProp$l(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$l = (obj, key, value) => {\n  __defNormalProp$l(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass ApiAggregator {\n  constructor(...holders) {\n    __publicField$l(this, \"holders\");\n    this.holders = holders;\n  }\n  get(apiRef) {\n    for (const holder of this.holders) {\n      const api = holder.get(apiRef);\n      if (api) {\n        return api;\n      }\n    }\n    return void 0;\n  }\n}\n\nconst ApiContext = createVersionedContext(\"api-context\");\nconst ApiProvider = (props) => {\n  var _a;\n  const { apis, children } = props;\n  const parentHolder = (_a = useContext(ApiContext)) == null ? void 0 : _a.atVersion(1);\n  const holder = parentHolder ? new ApiAggregator(apis, parentHolder) : apis;\n  return /* @__PURE__ */ React.createElement(\n    ApiContext.Provider,\n    {\n      value: createVersionedValueMap({ 1: holder }),\n      children\n    }\n  );\n};\nApiProvider.propTypes = {\n  apis: PropTypes.shape({ get: PropTypes.func.isRequired }).isRequired,\n  children: PropTypes.node\n};\n\nvar __defProp$k = Object.defineProperty;\nvar __defNormalProp$k = (obj, key, value) => key in obj ? __defProp$k(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$k = (obj, key, value) => {\n  __defNormalProp$k(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass ApiResolver {\n  constructor(factories) {\n    this.factories = factories;\n    __publicField$k(this, \"apis\", /* @__PURE__ */ new Map());\n  }\n  /**\n   * Validate factories by making sure that each of the apis can be created\n   * without hitting any circular dependencies.\n   */\n  static validateFactories(factories, apis) {\n    for (const api of apis) {\n      const heap = [api];\n      const allDeps = /* @__PURE__ */ new Set();\n      while (heap.length) {\n        const apiRef = heap.shift();\n        const factory = factories.get(apiRef);\n        if (!factory) {\n          continue;\n        }\n        for (const dep of Object.values(factory.deps)) {\n          if (dep.id === api.id) {\n            throw new Error(`Circular dependency of api factory for ${api}`);\n          }\n          if (!allDeps.has(dep)) {\n            allDeps.add(dep);\n            heap.push(dep);\n          }\n        }\n      }\n    }\n  }\n  get(ref) {\n    return this.load(ref);\n  }\n  load(ref, loading = []) {\n    const impl = this.apis.get(ref.id);\n    if (impl) {\n      return impl;\n    }\n    const factory = this.factories.get(ref);\n    if (!factory) {\n      return void 0;\n    }\n    if (loading.includes(factory.api)) {\n      throw new Error(`Circular dependency of api factory for ${factory.api}`);\n    }\n    const deps = this.loadDeps(ref, factory.deps, [...loading, factory.api]);\n    const api = factory.factory(deps);\n    this.apis.set(ref.id, api);\n    return api;\n  }\n  loadDeps(dependent, apis, loading) {\n    const impls = {};\n    for (const key in apis) {\n      if (apis.hasOwnProperty(key)) {\n        const ref = apis[key];\n        const api = this.load(ref, loading);\n        if (!api) {\n          throw new Error(\n            `No API factory available for dependency ${ref} of dependent ${dependent}`\n          );\n        }\n        impls[key] = api;\n      }\n    }\n    return impls;\n  }\n}\n\nvar __defProp$j = Object.defineProperty;\nvar __defNormalProp$j = (obj, key, value) => key in obj ? __defProp$j(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$j = (obj, key, value) => {\n  __defNormalProp$j(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nvar ScopePriority = /* @__PURE__ */ ((ScopePriority2) => {\n  ScopePriority2[ScopePriority2[\"default\"] = 10] = \"default\";\n  ScopePriority2[ScopePriority2[\"app\"] = 50] = \"app\";\n  ScopePriority2[ScopePriority2[\"static\"] = 100] = \"static\";\n  return ScopePriority2;\n})(ScopePriority || {});\nclass ApiFactoryRegistry {\n  constructor() {\n    __publicField$j(this, \"factories\", /* @__PURE__ */ new Map());\n  }\n  /**\n   * Register a new API factory. Returns true if the factory was added\n   * to the registry.\n   *\n   * A factory will not be added to the registry if there is already\n   * an existing factory with the same or higher priority.\n   */\n  register(scope, factory) {\n    const priority = ScopePriority[scope];\n    const existing = this.factories.get(factory.api.id);\n    if (existing && existing.priority >= priority) {\n      return false;\n    }\n    this.factories.set(factory.api.id, { priority, factory });\n    return true;\n  }\n  get(api) {\n    const tuple = this.factories.get(api.id);\n    if (!tuple) {\n      return void 0;\n    }\n    return tuple.factory;\n  }\n  getAllApis() {\n    const refs = /* @__PURE__ */ new Set();\n    for (const { factory } of this.factories.values()) {\n      refs.add(factory.api);\n    }\n    return refs;\n  }\n}\n\nfunction showLoginPopup(options) {\n  return new Promise((resolve, reject) => {\n    const width = options.width || 500;\n    const height = options.height || 700;\n    const left = window.screen.width / 2 - width / 2;\n    const top = window.screen.height / 2 - height / 2;\n    const popup = window.open(\n      options.url,\n      options.name,\n      `menubar=no,location=no,resizable=no,scrollbars=no,status=no,width=${width},height=${height},top=${top},left=${left}`\n    );\n    let targetOrigin = \"\";\n    if (!popup || typeof popup.closed === \"undefined\" || popup.closed) {\n      const error = new Error(\"Failed to open auth popup.\");\n      error.name = \"PopupRejectedError\";\n      reject(error);\n      return;\n    }\n    const messageListener = (event) => {\n      if (event.source !== popup) {\n        return;\n      }\n      if (event.origin !== options.origin) {\n        return;\n      }\n      const { data } = event;\n      if (data.type === \"config_info\") {\n        targetOrigin = data.targetOrigin;\n        return;\n      }\n      if (data.type !== \"authorization_response\") {\n        return;\n      }\n      const authResult = data;\n      if (\"error\" in authResult) {\n        const error = new Error(authResult.error.message);\n        error.name = authResult.error.name;\n        reject(error);\n      } else {\n        resolve(authResult.response);\n      }\n      done();\n    };\n    const intervalId = setInterval(() => {\n      if (popup.closed) {\n        const errMessage = `Login failed, ${targetOrigin && targetOrigin !== window.location.origin ? `Incorrect app origin, expected ${targetOrigin}` : \"popup was closed\"}`;\n        const error = new Error(errMessage);\n        error.name = \"PopupClosedError\";\n        reject(error);\n        done();\n      }\n    }, 100);\n    function done() {\n      window.removeEventListener(\"message\", messageListener);\n      clearInterval(intervalId);\n    }\n    window.addEventListener(\"message\", messageListener);\n  });\n}\n\nvar __defProp$i = Object.defineProperty;\nvar __defNormalProp$i = (obj, key, value) => key in obj ? __defProp$i(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$i = (obj, key, value) => {\n  __defNormalProp$i(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nlet warned$1 = false;\nfunction defaultJoinScopes(scopes) {\n  return [...scopes].join(\" \");\n}\nclass DefaultAuthConnector {\n  constructor(options) {\n    __publicField$i(this, \"discoveryApi\");\n    __publicField$i(this, \"environment\");\n    __publicField$i(this, \"provider\");\n    __publicField$i(this, \"joinScopesFunc\");\n    __publicField$i(this, \"authRequester\");\n    __publicField$i(this, \"sessionTransform\");\n    __publicField$i(this, \"enableExperimentalRedirectFlow\");\n    __publicField$i(this, \"popupOptions\");\n    var _a;\n    const {\n      configApi,\n      discoveryApi,\n      environment,\n      provider,\n      joinScopes = defaultJoinScopes,\n      oauthRequestApi,\n      sessionTransform = (id) => id,\n      popupOptions\n    } = options;\n    if (!warned$1 && !configApi) {\n      console.warn(\n        \"DEPRECATION WARNING: Authentication providers require a configApi instance to configure the authentication flow. Please provide one to the authentication provider constructor.\"\n      );\n      warned$1 = true;\n    }\n    this.enableExperimentalRedirectFlow = configApi ? (_a = configApi.getOptionalBoolean(\"enableExperimentalRedirectFlow\")) != null ? _a : false : false;\n    this.authRequester = oauthRequestApi.createAuthRequester({\n      provider,\n      onAuthRequest: async (scopes) => {\n        if (!this.enableExperimentalRedirectFlow) {\n          return this.showPopup(scopes);\n        }\n        return this.executeRedirect(scopes);\n      }\n    });\n    this.discoveryApi = discoveryApi;\n    this.environment = environment;\n    this.provider = provider;\n    this.joinScopesFunc = joinScopes;\n    this.sessionTransform = sessionTransform;\n    this.popupOptions = popupOptions;\n  }\n  async createSession(options) {\n    if (options.instantPopup) {\n      if (this.enableExperimentalRedirectFlow) {\n        return this.executeRedirect(options.scopes);\n      }\n      return this.showPopup(options.scopes);\n    }\n    return this.authRequester(options.scopes);\n  }\n  async refreshSession(scopes) {\n    const res = await fetch(\n      await this.buildUrl(\"/refresh\", {\n        optional: true,\n        ...scopes && { scope: this.joinScopesFunc(scopes) }\n      }),\n      {\n        headers: {\n          \"x-requested-with\": \"XMLHttpRequest\"\n        },\n        credentials: \"include\"\n      }\n    ).catch((error) => {\n      throw new Error(`Auth refresh request failed, ${error}`);\n    });\n    if (!res.ok) {\n      const error = new Error(\n        `Auth refresh request failed, ${res.statusText}`\n      );\n      error.status = res.status;\n      throw error;\n    }\n    const authInfo = await res.json();\n    if (authInfo.error) {\n      const error = new Error(authInfo.error.message);\n      if (authInfo.error.name) {\n        error.name = authInfo.error.name;\n      }\n      throw error;\n    }\n    return await this.sessionTransform(authInfo);\n  }\n  async removeSession() {\n    const res = await fetch(await this.buildUrl(\"/logout\"), {\n      method: \"POST\",\n      headers: {\n        \"x-requested-with\": \"XMLHttpRequest\"\n      },\n      credentials: \"include\"\n    }).catch((error) => {\n      throw new Error(`Logout request failed, ${error}`);\n    });\n    if (!res.ok) {\n      const error = new Error(`Logout request failed, ${res.statusText}`);\n      error.status = res.status;\n      throw error;\n    }\n  }\n  async showPopup(scopes) {\n    var _a, _b, _c, _d, _e, _f, _g, _h;\n    const scope = this.joinScopesFunc(scopes);\n    const popupUrl = await this.buildUrl(\"/start\", {\n      scope,\n      origin: window.location.origin,\n      flow: \"popup\"\n    });\n    const width = ((_b = (_a = this.popupOptions) == null ? void 0 : _a.size) == null ? void 0 : _b.fullscreen) ? window.screen.width : ((_d = (_c = this.popupOptions) == null ? void 0 : _c.size) == null ? void 0 : _d.width) || 450;\n    const height = ((_f = (_e = this.popupOptions) == null ? void 0 : _e.size) == null ? void 0 : _f.fullscreen) ? window.screen.height : ((_h = (_g = this.popupOptions) == null ? void 0 : _g.size) == null ? void 0 : _h.height) || 730;\n    const payload = await showLoginPopup({\n      url: popupUrl,\n      name: `${this.provider.title} Login`,\n      origin: new URL(popupUrl).origin,\n      width,\n      height\n    });\n    return await this.sessionTransform(payload);\n  }\n  async executeRedirect(scopes) {\n    const scope = this.joinScopesFunc(scopes);\n    window.location.href = await this.buildUrl(\"/start\", {\n      scope,\n      origin: window.location.origin,\n      redirectUrl: window.location.href,\n      flow: \"redirect\"\n    });\n    return new Promise(() => {\n    });\n  }\n  async buildUrl(path, query) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"auth\");\n    const queryString = this.buildQueryString({\n      ...query,\n      env: this.environment\n    });\n    return `${baseUrl}/${this.provider.id}${path}${queryString}`;\n  }\n  buildQueryString(query) {\n    if (!query) {\n      return \"\";\n    }\n    const queryString = Object.entries(query).map(([key, value]) => {\n      if (typeof value === \"string\") {\n        return `${encodeURIComponent(key)}=${encodeURIComponent(value)}`;\n      } else if (value) {\n        return encodeURIComponent(key);\n      }\n      return void 0;\n    }).filter(Boolean).join(\"&\");\n    if (!queryString) {\n      return \"\";\n    }\n    return `?${queryString}`;\n  }\n}\n\nvar __defProp$h = Object.defineProperty;\nvar __defNormalProp$h = (obj, key, value) => key in obj ? __defProp$h(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$h = (obj, key, value) => {\n  __defNormalProp$h(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass DirectAuthConnector {\n  constructor(options) {\n    __publicField$h(this, \"discoveryApi\");\n    __publicField$h(this, \"environment\");\n    __publicField$h(this, \"provider\");\n    const { discoveryApi, environment, provider } = options;\n    this.discoveryApi = discoveryApi;\n    this.environment = environment;\n    this.provider = provider;\n  }\n  async createSession() {\n    const popupUrl = await this.buildUrl(\"/start\");\n    const payload = await showLoginPopup({\n      url: popupUrl,\n      name: `${this.provider.title} Login`,\n      origin: new URL(popupUrl).origin,\n      width: 450,\n      height: 730\n    });\n    return {\n      ...payload,\n      id: payload.profile.email\n    };\n  }\n  async refreshSession() {\n  }\n  async removeSession() {\n    const res = await fetch(await this.buildUrl(\"/logout\"), {\n      method: \"POST\",\n      headers: {\n        \"x-requested-with\": \"XMLHttpRequest\"\n      },\n      credentials: \"include\"\n    }).catch((error) => {\n      throw new Error(`Logout request failed, ${error}`);\n    });\n    if (!res.ok) {\n      const error = new Error(`Logout request failed, ${res.statusText}`);\n      error.status = res.status;\n      throw error;\n    }\n  }\n  async buildUrl(path) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"auth\");\n    return `${baseUrl}/${this.provider.id}${path}?env=${this.environment}`;\n  }\n}\n\nfunction hasScopes$1(searched, searchFor) {\n  for (const scope of searchFor) {\n    if (!searched.has(scope)) {\n      return false;\n    }\n  }\n  return true;\n}\nclass SessionScopeHelper {\n  constructor(options) {\n    this.options = options;\n  }\n  sessionExistsAndHasScope(session, scopes) {\n    if (!session) {\n      return false;\n    }\n    if (!scopes) {\n      return true;\n    }\n    if (this.options.sessionScopes === void 0) {\n      return true;\n    }\n    const sessionScopes = this.options.sessionScopes(session);\n    return hasScopes$1(sessionScopes, scopes);\n  }\n  getExtendedScope(session, scopes) {\n    const newScope = new Set(this.options.defaultScopes);\n    if (session && this.options.sessionScopes !== void 0) {\n      const sessionScopes = this.options.sessionScopes(session);\n      for (const scope of sessionScopes) {\n        newScope.add(scope);\n      }\n    }\n    if (scopes) {\n      for (const scope of scopes) {\n        newScope.add(scope);\n      }\n    }\n    return newScope;\n  }\n}\n\nvar __defProp$g = Object.defineProperty;\nvar __defNormalProp$g = (obj, key, value) => key in obj ? __defProp$g(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$g = (obj, key, value) => {\n  __defNormalProp$g(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass PublishSubject {\n  constructor() {\n    __publicField$g(this, \"isClosed\", false);\n    __publicField$g(this, \"terminatingError\");\n    __publicField$g(this, \"observable\", new ObservableImpl((subscriber) => {\n      if (this.isClosed) {\n        if (this.terminatingError) {\n          subscriber.error(this.terminatingError);\n        } else {\n          subscriber.complete();\n        }\n        return () => {\n        };\n      }\n      this.subscribers.add(subscriber);\n      return () => {\n        this.subscribers.delete(subscriber);\n      };\n    }));\n    __publicField$g(this, \"subscribers\", /* @__PURE__ */ new Set());\n  }\n  [Symbol.observable]() {\n    return this;\n  }\n  get closed() {\n    return this.isClosed;\n  }\n  next(value) {\n    if (this.isClosed) {\n      throw new Error(\"PublishSubject is closed\");\n    }\n    this.subscribers.forEach((subscriber) => subscriber.next(value));\n  }\n  error(error) {\n    if (this.isClosed) {\n      throw new Error(\"PublishSubject is closed\");\n    }\n    this.isClosed = true;\n    this.terminatingError = error;\n    this.subscribers.forEach((subscriber) => subscriber.error(error));\n  }\n  complete() {\n    if (this.isClosed) {\n      throw new Error(\"PublishSubject is closed\");\n    }\n    this.isClosed = true;\n    this.subscribers.forEach((subscriber) => subscriber.complete());\n  }\n  subscribe(onNext, onError, onComplete) {\n    const observer = typeof onNext === \"function\" ? {\n      next: onNext,\n      error: onError,\n      complete: onComplete\n    } : onNext;\n    return this.observable.subscribe(observer);\n  }\n}\nclass BehaviorSubject {\n  constructor(value) {\n    __publicField$g(this, \"isClosed\");\n    __publicField$g(this, \"currentValue\");\n    __publicField$g(this, \"terminatingError\");\n    __publicField$g(this, \"observable\");\n    __publicField$g(this, \"subscribers\", /* @__PURE__ */ new Set());\n    this.isClosed = false;\n    this.currentValue = value;\n    this.terminatingError = void 0;\n    this.observable = new ObservableImpl((subscriber) => {\n      if (this.isClosed) {\n        if (this.terminatingError) {\n          subscriber.error(this.terminatingError);\n        } else {\n          subscriber.complete();\n        }\n        return () => {\n        };\n      }\n      subscriber.next(this.currentValue);\n      this.subscribers.add(subscriber);\n      return () => {\n        this.subscribers.delete(subscriber);\n      };\n    });\n  }\n  [Symbol.observable]() {\n    return this;\n  }\n  get closed() {\n    return this.isClosed;\n  }\n  next(value) {\n    if (this.isClosed) {\n      throw new Error(\"BehaviorSubject is closed\");\n    }\n    this.currentValue = value;\n    this.subscribers.forEach((subscriber) => subscriber.next(value));\n  }\n  error(error) {\n    if (this.isClosed) {\n      throw new Error(\"BehaviorSubject is closed\");\n    }\n    this.isClosed = true;\n    this.terminatingError = error;\n    this.subscribers.forEach((subscriber) => subscriber.error(error));\n  }\n  complete() {\n    if (this.isClosed) {\n      throw new Error(\"BehaviorSubject is closed\");\n    }\n    this.isClosed = true;\n    this.subscribers.forEach((subscriber) => subscriber.complete());\n  }\n  subscribe(onNext, onError, onComplete) {\n    const observer = typeof onNext === \"function\" ? {\n      next: onNext,\n      error: onError,\n      complete: onComplete\n    } : onNext;\n    return this.observable.subscribe(observer);\n  }\n}\n\nvar __defProp$f = Object.defineProperty;\nvar __defNormalProp$f = (obj, key, value) => key in obj ? __defProp$f(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$f = (obj, key, value) => {\n  __defNormalProp$f(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass SessionStateTracker {\n  constructor() {\n    __publicField$f(this, \"subject\", new BehaviorSubject(\n      SessionState.SignedOut\n    ));\n    __publicField$f(this, \"signedIn\", false);\n  }\n  setIsSignedIn(isSignedIn) {\n    if (this.signedIn !== isSignedIn) {\n      this.signedIn = isSignedIn;\n      this.subject.next(\n        this.signedIn ? SessionState.SignedIn : SessionState.SignedOut\n      );\n    }\n  }\n  sessionState$() {\n    return this.subject;\n  }\n}\n\nvar __defProp$e = Object.defineProperty;\nvar __defNormalProp$e = (obj, key, value) => key in obj ? __defProp$e(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$e = (obj, key, value) => {\n  __defNormalProp$e(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass RefreshingAuthSessionManager {\n  constructor(options) {\n    __publicField$e(this, \"connector\");\n    __publicField$e(this, \"helper\");\n    __publicField$e(this, \"sessionScopesFunc\");\n    __publicField$e(this, \"sessionShouldRefreshFunc\");\n    __publicField$e(this, \"stateTracker\", new SessionStateTracker());\n    __publicField$e(this, \"refreshPromise\");\n    __publicField$e(this, \"currentSession\");\n    const {\n      connector,\n      defaultScopes = /* @__PURE__ */ new Set(),\n      sessionScopes,\n      sessionShouldRefresh\n    } = options;\n    this.connector = connector;\n    this.sessionScopesFunc = sessionScopes;\n    this.sessionShouldRefreshFunc = sessionShouldRefresh;\n    this.helper = new SessionScopeHelper({ sessionScopes, defaultScopes });\n  }\n  async getSession(options) {\n    if (this.helper.sessionExistsAndHasScope(this.currentSession, options.scopes)) {\n      const shouldRefresh = this.sessionShouldRefreshFunc(this.currentSession);\n      if (!shouldRefresh) {\n        return this.currentSession;\n      }\n      try {\n        const refreshedSession = await this.collapsedSessionRefresh(\n          options.scopes\n        );\n        const currentScopes = this.sessionScopesFunc(this.currentSession);\n        const refreshedScopes = this.sessionScopesFunc(refreshedSession);\n        if (hasScopes$1(refreshedScopes, currentScopes)) {\n          this.currentSession = refreshedSession;\n        }\n        return refreshedSession;\n      } catch (error) {\n        if (options.optional) {\n          return void 0;\n        }\n        throw error;\n      }\n    }\n    if (!this.currentSession && !options.instantPopup) {\n      try {\n        const newSession = await this.collapsedSessionRefresh(options.scopes);\n        this.currentSession = newSession;\n        return this.getSession(options);\n      } catch {\n      }\n    }\n    if (options.optional) {\n      return void 0;\n    }\n    this.currentSession = await this.connector.createSession({\n      ...options,\n      scopes: this.helper.getExtendedScope(this.currentSession, options.scopes)\n    });\n    this.stateTracker.setIsSignedIn(true);\n    return this.currentSession;\n  }\n  async removeSession() {\n    this.currentSession = void 0;\n    await this.connector.removeSession();\n    this.stateTracker.setIsSignedIn(false);\n  }\n  sessionState$() {\n    return this.stateTracker.sessionState$();\n  }\n  async collapsedSessionRefresh(scopes) {\n    if (this.refreshPromise) {\n      return this.refreshPromise;\n    }\n    this.refreshPromise = this.connector.refreshSession(\n      this.helper.getExtendedScope(this.currentSession, scopes)\n    );\n    try {\n      const session = await this.refreshPromise;\n      this.stateTracker.setIsSignedIn(true);\n      return session;\n    } finally {\n      delete this.refreshPromise;\n    }\n  }\n}\n\nvar __defProp$d = Object.defineProperty;\nvar __defNormalProp$d = (obj, key, value) => key in obj ? __defProp$d(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$d = (obj, key, value) => {\n  __defNormalProp$d(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass StaticAuthSessionManager {\n  constructor(options) {\n    __publicField$d(this, \"connector\");\n    __publicField$d(this, \"helper\");\n    __publicField$d(this, \"stateTracker\", new SessionStateTracker());\n    __publicField$d(this, \"currentSession\");\n    const { connector, defaultScopes = /* @__PURE__ */ new Set(), sessionScopes } = options;\n    this.connector = connector;\n    this.helper = new SessionScopeHelper({ sessionScopes, defaultScopes });\n  }\n  setSession(session) {\n    this.currentSession = session;\n    this.stateTracker.setIsSignedIn(Boolean(session));\n  }\n  async getSession(options) {\n    if (this.helper.sessionExistsAndHasScope(this.currentSession, options.scopes)) {\n      return this.currentSession;\n    }\n    if (options.optional) {\n      return void 0;\n    }\n    this.currentSession = await this.connector.createSession({\n      ...options,\n      scopes: this.helper.getExtendedScope(this.currentSession, options.scopes)\n    });\n    this.stateTracker.setIsSignedIn(true);\n    return this.currentSession;\n  }\n  /**\n   * We don't call this.connector.removeSession here, since this session manager\n   * is intended to be static. As such there's no need to hit the remote logout\n   * endpoint - simply discarding the local session state when signing out is\n   * enough.\n   */\n  async removeSession() {\n    this.currentSession = void 0;\n    this.stateTracker.setIsSignedIn(false);\n  }\n  sessionState$() {\n    return this.stateTracker.sessionState$();\n  }\n}\n\nvar __defProp$c = Object.defineProperty;\nvar __defNormalProp$c = (obj, key, value) => key in obj ? __defProp$c(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$c = (obj, key, value) => {\n  __defNormalProp$c(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass AuthSessionStore {\n  constructor(options) {\n    __publicField$c(this, \"manager\");\n    __publicField$c(this, \"storageKey\");\n    __publicField$c(this, \"schema\");\n    __publicField$c(this, \"sessionShouldRefreshFunc\");\n    __publicField$c(this, \"helper\");\n    const {\n      manager,\n      storageKey,\n      schema,\n      sessionScopes,\n      sessionShouldRefresh = () => false\n    } = options;\n    this.manager = manager;\n    this.storageKey = storageKey;\n    this.schema = schema;\n    this.sessionShouldRefreshFunc = sessionShouldRefresh;\n    this.helper = new SessionScopeHelper({\n      sessionScopes,\n      defaultScopes: /* @__PURE__ */ new Set()\n    });\n  }\n  setSession(session) {\n    this.manager.setSession(session);\n    this.saveSession(session);\n  }\n  async getSession(options) {\n    const { scopes } = options;\n    const session = this.loadSession();\n    if (this.helper.sessionExistsAndHasScope(session, scopes)) {\n      const shouldRefresh = this.sessionShouldRefreshFunc(session);\n      if (!shouldRefresh) {\n        this.manager.setSession(session);\n        return session;\n      }\n    }\n    const newSession = await this.manager.getSession(options);\n    this.saveSession(newSession);\n    return newSession;\n  }\n  async removeSession() {\n    localStorage.removeItem(this.storageKey);\n    await this.manager.removeSession();\n  }\n  sessionState$() {\n    return this.manager.sessionState$();\n  }\n  loadSession() {\n    try {\n      const sessionJson = localStorage.getItem(this.storageKey);\n      if (sessionJson) {\n        const session = JSON.parse(sessionJson, (_key, value) => {\n          if ((value == null ? void 0 : value.__type) === \"Set\") {\n            return new Set(value.__value);\n          }\n          return value;\n        });\n        try {\n          return this.schema.parse(session);\n        } catch (e) {\n          console.log(\n            `Failed to load session from local storage because it did not conform to the expected schema, ${e}`\n          );\n          throw e;\n        }\n      }\n      return void 0;\n    } catch (error) {\n      localStorage.removeItem(this.storageKey);\n      return void 0;\n    }\n  }\n  saveSession(session) {\n    if (session === void 0) {\n      localStorage.removeItem(this.storageKey);\n      return;\n    }\n    try {\n      this.schema.parse(session);\n    } catch (e) {\n      console.warn(\n        `Failed to save session to local storage because it did not conform to the expected schema, ${e}`\n      );\n      return;\n    }\n    localStorage.setItem(\n      this.storageKey,\n      JSON.stringify(session, (_key, value) => {\n        if (value instanceof Set) {\n          return {\n            __type: \"Set\",\n            __value: Array.from(value)\n          };\n        }\n        return value;\n      })\n    );\n  }\n}\n\nvar __defProp$b = Object.defineProperty;\nvar __defNormalProp$b = (obj, key, value) => key in obj ? __defProp$b(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$b = (obj, key, value) => {\n  __defNormalProp$b(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst DEFAULT_PROVIDER$b = {\n  id: \"oauth2\",\n  title: \"Your Identity Provider\",\n  icon: () => null\n};\nclass OAuth2 {\n  constructor(options) {\n    __publicField$b(this, \"sessionManager\");\n    __publicField$b(this, \"scopeTransform\");\n    this.sessionManager = options.sessionManager;\n    this.scopeTransform = options.scopeTransform;\n  }\n  static create(options) {\n    const {\n      configApi,\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$b,\n      oauthRequestApi,\n      defaultScopes = [],\n      scopeTransform = (x) => x,\n      popupOptions\n    } = options;\n    const connector = new DefaultAuthConnector({\n      configApi,\n      discoveryApi,\n      environment,\n      provider,\n      oauthRequestApi,\n      sessionTransform({\n        backstageIdentity,\n        ...res\n      }) {\n        var _a;\n        const session = {\n          ...res,\n          providerInfo: {\n            idToken: res.providerInfo.idToken,\n            accessToken: res.providerInfo.accessToken,\n            scopes: OAuth2.normalizeScopes(\n              scopeTransform,\n              res.providerInfo.scope\n            ),\n            expiresAt: res.providerInfo.expiresInSeconds ? new Date(Date.now() + res.providerInfo.expiresInSeconds * 1e3) : void 0\n          }\n        };\n        if (backstageIdentity) {\n          const expInSec = (_a = backstageIdentity.expiresInSeconds) != null ? _a : res.providerInfo.expiresInSeconds;\n          session.backstageIdentity = {\n            token: backstageIdentity.token,\n            identity: backstageIdentity.identity,\n            expiresAt: expInSec ? new Date(Date.now() + expInSec * 1e3) : void 0\n          };\n        }\n        return session;\n      },\n      popupOptions\n    });\n    const sessionManager = new RefreshingAuthSessionManager({\n      connector,\n      defaultScopes: new Set(defaultScopes),\n      sessionScopes: (session) => session.providerInfo.scopes,\n      sessionShouldRefresh: (session) => {\n        var _a, _b;\n        let min = Infinity;\n        if ((_a = session.providerInfo) == null ? void 0 : _a.expiresAt) {\n          min = Math.min(\n            min,\n            (session.providerInfo.expiresAt.getTime() - Date.now()) / 1e3\n          );\n        }\n        if ((_b = session.backstageIdentity) == null ? void 0 : _b.expiresAt) {\n          min = Math.min(\n            min,\n            (session.backstageIdentity.expiresAt.getTime() - Date.now()) / 1e3\n          );\n        }\n        return min < 60 * 5;\n      }\n    });\n    return new OAuth2({ sessionManager, scopeTransform });\n  }\n  async signIn() {\n    await this.getAccessToken();\n  }\n  async signOut() {\n    await this.sessionManager.removeSession();\n  }\n  sessionState$() {\n    return this.sessionManager.sessionState$();\n  }\n  async getAccessToken(scope, options) {\n    var _a;\n    const normalizedScopes = OAuth2.normalizeScopes(this.scopeTransform, scope);\n    const session = await this.sessionManager.getSession({\n      ...options,\n      scopes: normalizedScopes\n    });\n    return (_a = session == null ? void 0 : session.providerInfo.accessToken) != null ? _a : \"\";\n  }\n  async getIdToken(options = {}) {\n    var _a;\n    const session = await this.sessionManager.getSession({\n      ...options,\n      scopes: /* @__PURE__ */ new Set([\"openid\"])\n    });\n    return (_a = session == null ? void 0 : session.providerInfo.idToken) != null ? _a : \"\";\n  }\n  async getBackstageIdentity(options = {}) {\n    const session = await this.sessionManager.getSession(options);\n    return session == null ? void 0 : session.backstageIdentity;\n  }\n  async getProfile(options = {}) {\n    const session = await this.sessionManager.getSession(options);\n    return session == null ? void 0 : session.profile;\n  }\n  static normalizeScopes(scopeTransform, scopes) {\n    if (!scopes) {\n      return /* @__PURE__ */ new Set();\n    }\n    const scopeList = Array.isArray(scopes) ? scopes : scopes.split(/[\\s|,]/).filter(Boolean);\n    return new Set(scopeTransform(scopeList));\n  }\n}\n\nconst DEFAULT_PROVIDER$a = {\n  id: \"github\",\n  title: \"GitHub\",\n  icon: () => null\n};\nclass GithubAuth {\n  static create(options) {\n    const {\n      configApi,\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$a,\n      oauthRequestApi,\n      defaultScopes = [\"read:user\"]\n    } = options;\n    return OAuth2.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes\n    });\n  }\n}\n\nconst DEFAULT_PROVIDER$9 = {\n  id: \"gitlab\",\n  title: \"GitLab\",\n  icon: () => null\n};\nclass GitlabAuth {\n  static create(options) {\n    const {\n      configApi,\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$9,\n      oauthRequestApi,\n      defaultScopes = [\"read_user\"]\n    } = options;\n    return OAuth2.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes\n    });\n  }\n}\n\nconst DEFAULT_PROVIDER$8 = {\n  id: \"google\",\n  title: \"Google\",\n  icon: () => null\n};\nconst SCOPE_PREFIX$1 = \"https://www.googleapis.com/auth/\";\nclass GoogleAuth {\n  static create(options) {\n    const {\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$8,\n      defaultScopes = [\n        \"openid\",\n        `${SCOPE_PREFIX$1}userinfo.email`,\n        `${SCOPE_PREFIX$1}userinfo.profile`\n      ]\n    } = options;\n    return OAuth2.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes,\n      scopeTransform(scopes) {\n        return scopes.map((scope) => {\n          if (scope === \"openid\") {\n            return scope;\n          }\n          if (scope === \"profile\" || scope === \"email\") {\n            return `${SCOPE_PREFIX$1}userinfo.${scope}`;\n          }\n          if (scope.startsWith(SCOPE_PREFIX$1)) {\n            return scope;\n          }\n          return `${SCOPE_PREFIX$1}${scope}`;\n        });\n      }\n    });\n  }\n}\n\nconst DEFAULT_PROVIDER$7 = {\n  id: \"okta\",\n  title: \"Okta\",\n  icon: () => null\n};\nconst OKTA_OIDC_SCOPES = /* @__PURE__ */ new Set([\n  \"openid\",\n  \"profile\",\n  \"email\",\n  \"phone\",\n  \"address\",\n  \"groups\",\n  \"offline_access\"\n]);\nconst OKTA_SCOPE_PREFIX = \"okta.\";\nclass OktaAuth {\n  static create(options) {\n    const {\n      configApi,\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$7,\n      oauthRequestApi,\n      defaultScopes = [\"openid\", \"email\", \"profile\", \"offline_access\"]\n    } = options;\n    return OAuth2.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes,\n      scopeTransform(scopes) {\n        return scopes.map((scope) => {\n          if (OKTA_OIDC_SCOPES.has(scope)) {\n            return scope;\n          }\n          if (scope.startsWith(OKTA_SCOPE_PREFIX)) {\n            return scope;\n          }\n          return `${OKTA_SCOPE_PREFIX}${scope}`;\n        });\n      }\n    });\n  }\n}\n\nconst samlSessionSchema = z.object({\n  profile: z.object({\n    email: z.string().optional(),\n    displayName: z.string().optional(),\n    picture: z.string().optional()\n  }),\n  backstageIdentity: z.object({\n    token: z.string(),\n    identity: z.object({\n      type: z.literal(\"user\"),\n      userEntityRef: z.string(),\n      ownershipEntityRefs: z.array(z.string())\n    })\n  })\n});\n\nconst DEFAULT_PROVIDER$6 = {\n  id: \"saml\",\n  title: \"SAML\",\n  icon: () => null\n};\nclass SamlAuth {\n  constructor(sessionManager) {\n    this.sessionManager = sessionManager;\n  }\n  static create(options) {\n    const {\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$6\n    } = options;\n    const connector = new DirectAuthConnector({\n      discoveryApi,\n      environment,\n      provider\n    });\n    const sessionManager = new StaticAuthSessionManager({\n      connector\n    });\n    const authSessionStore = new AuthSessionStore({\n      manager: sessionManager,\n      storageKey: `${provider.id}Session`,\n      schema: samlSessionSchema\n    });\n    return new SamlAuth(authSessionStore);\n  }\n  sessionState$() {\n    return this.sessionManager.sessionState$();\n  }\n  async signIn() {\n    await this.getBackstageIdentity({});\n  }\n  async signOut() {\n    await this.sessionManager.removeSession();\n  }\n  async getBackstageIdentity(options = {}) {\n    const session = await this.sessionManager.getSession(options);\n    return session == null ? void 0 : session.backstageIdentity;\n  }\n  async getProfile(options = {}) {\n    const session = await this.sessionManager.getSession(options);\n    return session == null ? void 0 : session.profile;\n  }\n}\n\nvar __defProp$a = Object.defineProperty;\nvar __defNormalProp$a = (obj, key, value) => key in obj ? __defProp$a(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$a = (obj, key, value) => {\n  __defNormalProp$a(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst DEFAULT_PROVIDER$5 = {\n  id: \"microsoft\",\n  title: \"Microsoft\",\n  icon: () => null\n};\nconst _MicrosoftAuth = class _MicrosoftAuth {\n  constructor(options) {\n    __publicField$a(this, \"oauth2\");\n    __publicField$a(this, \"configApi\");\n    __publicField$a(this, \"environment\");\n    __publicField$a(this, \"provider\");\n    __publicField$a(this, \"oauthRequestApi\");\n    __publicField$a(this, \"discoveryApi\");\n    __publicField$a(this, \"scopeTransform\");\n    const {\n      configApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$5,\n      oauthRequestApi,\n      discoveryApi,\n      defaultScopes = [\n        \"openid\",\n        \"offline_access\",\n        \"profile\",\n        \"email\",\n        \"User.Read\"\n      ],\n      scopeTransform = (scopes) => scopes.concat(\"offline_access\")\n    } = options;\n    this.configApi = configApi;\n    this.environment = environment;\n    this.provider = provider;\n    this.oauthRequestApi = oauthRequestApi;\n    this.discoveryApi = discoveryApi;\n    this.scopeTransform = scopeTransform;\n    this.oauth2 = {\n      [_MicrosoftAuth.MicrosoftGraphID]: OAuth2.create({\n        configApi: this.configApi,\n        discoveryApi: this.discoveryApi,\n        oauthRequestApi: this.oauthRequestApi,\n        provider: this.provider,\n        environment: this.environment,\n        scopeTransform: this.scopeTransform,\n        defaultScopes\n      })\n    };\n  }\n  static create(options) {\n    return new _MicrosoftAuth(options);\n  }\n  microsoftGraph() {\n    return this.oauth2[_MicrosoftAuth.MicrosoftGraphID];\n  }\n  static resourceForScopes(scope) {\n    var _a;\n    const audiences = [\n      ...new Set(\n        scope.split(\" \").map(_MicrosoftAuth.resourceForScope).filter((aud) => aud !== \"openid\")\n      )\n    ];\n    if (audiences.length > 1) {\n      return Promise.reject(\n        new Error(\n          `Requested access token with scopes from multiple Azure resources: ${audiences.join(\n            \", \"\n          )}. Access tokens can only have a single audience.`\n        )\n      );\n    }\n    const audience = (_a = audiences[0]) != null ? _a : _MicrosoftAuth.MicrosoftGraphID;\n    return Promise.resolve(audience);\n  }\n  static resourceForScope(scope) {\n    var _a;\n    const groups = (_a = scope.match(/^(?<resourceURI>.*)\\/(?<scp>[^\\/]*)$/)) == null ? void 0 : _a.groups;\n    if (groups) {\n      const { resourceURI } = groups;\n      const aud = resourceURI.replace(/^api:\\/\\//, \"\");\n      return aud;\n    }\n    switch (scope) {\n      case \"email\":\n      case \"openid\":\n      case \"offline_access\":\n      case \"profile\": {\n        return \"openid\";\n      }\n      default:\n        return _MicrosoftAuth.MicrosoftGraphID;\n    }\n  }\n  async getAccessToken(scope, options) {\n    const aud = scope === void 0 ? _MicrosoftAuth.MicrosoftGraphID : await _MicrosoftAuth.resourceForScopes(\n      Array.isArray(scope) ? scope.join(\" \") : scope\n    );\n    if (!(aud in this.oauth2)) {\n      this.oauth2[aud] = OAuth2.create({\n        configApi: this.configApi,\n        discoveryApi: this.discoveryApi,\n        oauthRequestApi: this.oauthRequestApi,\n        provider: this.provider,\n        environment: this.environment,\n        scopeTransform: this.scopeTransform\n      });\n    }\n    return this.oauth2[aud].getAccessToken(scope, options);\n  }\n  getIdToken(options) {\n    return this.microsoftGraph().getIdToken(options);\n  }\n  getProfile(options) {\n    return this.microsoftGraph().getProfile(options);\n  }\n  getBackstageIdentity(options) {\n    return this.microsoftGraph().getBackstageIdentity(options);\n  }\n  signIn() {\n    return this.microsoftGraph().signIn();\n  }\n  signOut() {\n    return this.microsoftGraph().signOut();\n  }\n  sessionState$() {\n    return this.microsoftGraph().sessionState$();\n  }\n};\n__publicField$a(_MicrosoftAuth, \"MicrosoftGraphID\", \"00000003-0000-0000-c000-000000000000\");\nlet MicrosoftAuth = _MicrosoftAuth;\n\nconst DEFAULT_PROVIDER$4 = {\n  id: \"onelogin\",\n  title: \"onelogin\",\n  icon: () => null\n};\nconst OIDC_SCOPES = /* @__PURE__ */ new Set([\n  \"openid\",\n  \"profile\",\n  \"email\",\n  \"phone\",\n  \"address\",\n  \"groups\",\n  \"offline_access\"\n]);\nconst SCOPE_PREFIX = \"onelogin.\";\nclass OneLoginAuth {\n  static create(options) {\n    const {\n      configApi,\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$4,\n      oauthRequestApi\n    } = options;\n    return OAuth2.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes: [\"openid\", \"email\", \"profile\", \"offline_access\"],\n      scopeTransform(scopes) {\n        return scopes.map((scope) => {\n          if (OIDC_SCOPES.has(scope)) {\n            return scope;\n          }\n          if (scope.startsWith(SCOPE_PREFIX)) {\n            return scope;\n          }\n          return `${SCOPE_PREFIX}${scope}`;\n        });\n      }\n    });\n  }\n}\n\nconst DEFAULT_PROVIDER$3 = {\n  id: \"bitbucket\",\n  title: \"Bitbucket\",\n  icon: () => null\n};\nclass BitbucketAuth {\n  static create(options) {\n    const {\n      configApi,\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$3,\n      oauthRequestApi,\n      defaultScopes = [\"account\"]\n    } = options;\n    return OAuth2.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes\n    });\n  }\n}\n\nconst DEFAULT_PROVIDER$2 = {\n  id: \"bitbucketServer\",\n  title: \"Bitbucket Server\",\n  icon: () => null\n};\nclass BitbucketServerAuth {\n  static create(options) {\n    const {\n      configApi,\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$2,\n      oauthRequestApi,\n      defaultScopes = [\"PROJECT_ADMIN\"]\n    } = options;\n    return OAuth2.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes\n    });\n  }\n}\n\nconst DEFAULT_PROVIDER$1 = {\n  id: \"atlassian\",\n  title: \"Atlassian\",\n  icon: () => null\n};\nclass AtlassianAuth {\n  static create(options) {\n    const {\n      configApi,\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$1,\n      oauthRequestApi\n    } = options;\n    return OAuth2.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment\n    });\n  }\n}\n\nconst DEFAULT_PROVIDER = {\n  id: \"vmwareCloudServices\",\n  title: \"VMware Cloud\",\n  icon: () => null\n};\nclass VMwareCloudAuth {\n  static create(options) {\n    const {\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER,\n      defaultScopes = [\"openid\"]\n    } = options;\n    return OAuth2.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes\n    });\n  }\n}\n\nvar __defProp$9 = Object.defineProperty;\nvar __defNormalProp$9 = (obj, key, value) => key in obj ? __defProp$9(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$9 = (obj, key, value) => {\n  __defNormalProp$9(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass AlertApiForwarder {\n  constructor() {\n    __publicField$9(this, \"subject\", new PublishSubject());\n  }\n  post(alert) {\n    this.subject.next(alert);\n  }\n  alert$() {\n    return this.subject;\n  }\n}\n\nclass MultipleAnalyticsApi {\n  constructor(actualApis) {\n    this.actualApis = actualApis;\n  }\n  /**\n   * Create an AnalyticsApi implementation from an array of concrete\n   * implementations.\n   *\n   * @example\n   *\n   * ```jsx\n   * MultipleAnalyticsApi.fromApis([\n   *   SomeAnalyticsApi.fromConfig(configApi),\n   *   new CustomAnalyticsApi(),\n   * ]);\n   * ```\n   */\n  static fromApis(actualApis) {\n    return new MultipleAnalyticsApi(actualApis);\n  }\n  /**\n   * Forward the event to all configured analytics API implementations.\n   */\n  captureEvent(event) {\n    this.actualApis.forEach((analyticsApi) => {\n      try {\n        analyticsApi.captureEvent(event);\n      } catch {\n      }\n    });\n  }\n}\n\nclass NoOpAnalyticsApi {\n  captureEvent(_event) {\n  }\n}\n\nvar __defProp$8 = Object.defineProperty;\nvar __defNormalProp$8 = (obj, key, value) => key in obj ? __defProp$8(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$8 = (obj, key, value) => {\n  __defNormalProp$8(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst STORAGE_KEY$1 = \"theme\";\nclass AppThemeSelector {\n  constructor(themes) {\n    this.themes = themes;\n    __publicField$8(this, \"activeThemeId\");\n    __publicField$8(this, \"subject\", new BehaviorSubject(void 0));\n  }\n  static createWithStorage(themes) {\n    var _a;\n    const selector = new AppThemeSelector(themes);\n    if (!window.localStorage) {\n      return selector;\n    }\n    const initialThemeId = (_a = window.localStorage.getItem(STORAGE_KEY$1)) != null ? _a : void 0;\n    selector.setActiveThemeId(initialThemeId);\n    selector.activeThemeId$().subscribe((themeId) => {\n      if (themeId) {\n        window.localStorage.setItem(STORAGE_KEY$1, themeId);\n      } else {\n        window.localStorage.removeItem(STORAGE_KEY$1);\n      }\n    });\n    window.addEventListener(\"storage\", (event) => {\n      var _a2;\n      if (event.key === STORAGE_KEY$1) {\n        const themeId = (_a2 = localStorage.getItem(STORAGE_KEY$1)) != null ? _a2 : void 0;\n        selector.setActiveThemeId(themeId);\n      }\n    });\n    return selector;\n  }\n  getInstalledThemes() {\n    return this.themes.slice();\n  }\n  activeThemeId$() {\n    return this.subject;\n  }\n  getActiveThemeId() {\n    return this.activeThemeId;\n  }\n  setActiveThemeId(themeId) {\n    this.activeThemeId = themeId;\n    this.subject.next(themeId);\n  }\n}\n\nconst ERROR_PREFIX = \"Invalid discovery URL pattern,\";\nclass UrlPatternDiscovery {\n  constructor(parts) {\n    this.parts = parts;\n  }\n  /**\n   * Creates a new UrlPatternDiscovery given a template. The the only\n   * interpolation done for the template is to replace instances of `{{pluginId}}`\n   * with the ID of the plugin being requested.\n   *\n   * Example pattern: `http://localhost:7007/api/{{ pluginId }}`\n   */\n  static compile(pattern) {\n    const parts = pattern.split(/\\{\\{\\s*pluginId\\s*\\}\\}/);\n    const urlStr = parts.join(\"pluginId\");\n    let url;\n    try {\n      url = new URL(urlStr);\n    } catch {\n      throw new Error(`${ERROR_PREFIX} URL '${urlStr}' is invalid`);\n    }\n    if (url.hash) {\n      throw new Error(`${ERROR_PREFIX} URL must not have a hash`);\n    }\n    if (url.search) {\n      throw new Error(`${ERROR_PREFIX} URL must not have a query`);\n    }\n    if (urlStr.endsWith(\"/\")) {\n      throw new Error(`${ERROR_PREFIX} URL must not end with a slash`);\n    }\n    return new UrlPatternDiscovery(parts);\n  }\n  async getBaseUrl(pluginId) {\n    return this.parts.join(encodeURIComponent(pluginId));\n  }\n}\n\nclass FrontendHostDiscovery {\n  constructor(endpoints, defaultEndpoint) {\n    this.endpoints = endpoints;\n    this.defaultEndpoint = defaultEndpoint;\n  }\n  /**\n   * Creates a new FrontendHostDiscovery discovery instance by reading\n   * the external target URL from the `discovery.endpoints` config section.\n   *\n   * eg.\n   * ```yaml\n   * discovery:\n   *  endpoints:\n   *    - target: https://internal.example.com/internal-catalog\n   *      plugins: [catalog]\n   *    - target: https://internal.example.com/secure/api/{{pluginId}}\n   *      plugins: [auth, permissions]\n   *    - target:\n   *        internal: https://internal.example.com/search\n   *        external: https://example.com/search\n   *      plugins: [search]\n   * ```\n   *\n   * If a plugin is not declared in the config, the discovery will fall back to using the baseUrl with\n   * the provided `pathPattern` appended. The default path pattern is `\"/api/{{ pluginId }}\"`.\n   */\n  static fromConfig(config, options) {\n    var _a, _b;\n    const path = (_a = options == null ? void 0 : options.pathPattern) != null ? _a : \"/api/{{ pluginId }}\";\n    const baseUrl = config.getString(\"backend.baseUrl\");\n    const endpoints = (_b = config.getOptionalConfigArray(\"discovery.endpoints\")) == null ? void 0 : _b.flatMap((e) => {\n      const target = typeof e.get(\"target\") === \"object\" ? e.getString(\"target.external\") : e.getString(\"target\");\n      const discovery = UrlPatternDiscovery.compile(target);\n      return e.getStringArray(\"plugins\").map((pluginId) => [pluginId, discovery]);\n    });\n    return new FrontendHostDiscovery(\n      new Map(endpoints),\n      UrlPatternDiscovery.compile(`${baseUrl}${path}`)\n    );\n  }\n  async getBaseUrl(pluginId) {\n    const endpoint = this.endpoints.get(pluginId);\n    if (endpoint) {\n      return endpoint.getBaseUrl(pluginId);\n    }\n    return this.defaultEndpoint.getBaseUrl(pluginId);\n  }\n}\n\nclass ErrorAlerter {\n  constructor(alertApi, errorApi) {\n    this.alertApi = alertApi;\n    this.errorApi = errorApi;\n  }\n  post(error, context) {\n    if (!(context == null ? void 0 : context.hidden)) {\n      this.alertApi.post({ message: error.message, severity: \"error\" });\n    }\n    return this.errorApi.post(error, context);\n  }\n  error$() {\n    return this.errorApi.error$();\n  }\n}\n\nvar __defProp$7 = Object.defineProperty;\nvar __defNormalProp$7 = (obj, key, value) => key in obj ? __defProp$7(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$7 = (obj, key, value) => {\n  __defNormalProp$7(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass ErrorApiForwarder {\n  constructor() {\n    __publicField$7(this, \"subject\", new PublishSubject());\n  }\n  post(error, context) {\n    this.subject.next({ error, context });\n  }\n  error$() {\n    return this.subject;\n  }\n}\n\nclass UnhandledErrorForwarder {\n  /**\n   * Add event listener, such that unhandled errors can be forwarded using an given `ErrorApi` instance\n   */\n  static forward(errorApi, errorContext) {\n    window.addEventListener(\n      \"unhandledrejection\",\n      (e) => {\n        errorApi.post(e.reason, errorContext);\n      }\n    );\n  }\n}\n\nvar __defProp$6 = Object.defineProperty;\nvar __defNormalProp$6 = (obj, key, value) => key in obj ? __defProp$6(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$6 = (obj, key, value) => {\n  __defNormalProp$6(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nfunction validateFlagName(name) {\n  if (name.length < 3) {\n    throw new Error(\n      `The '${name}' feature flag must have a minimum length of three characters.`\n    );\n  }\n  if (name.length > 150) {\n    throw new Error(\n      `The '${name}' feature flag must not exceed 150 characters.`\n    );\n  }\n  if (!name.match(/^[a-z]+[a-z0-9-]+$/)) {\n    throw new Error(\n      `The '${name}' feature flag must start with a lowercase letter and only contain lowercase letters, numbers and hyphens. Examples: feature-flag-one, alpha, release-2020`\n    );\n  }\n}\nclass LocalStorageFeatureFlags {\n  constructor() {\n    __publicField$6(this, \"registeredFeatureFlags\", []);\n    __publicField$6(this, \"flags\");\n  }\n  registerFlag(flag) {\n    validateFlagName(flag.name);\n    this.registeredFeatureFlags.push(flag);\n  }\n  getRegisteredFlags() {\n    return this.registeredFeatureFlags.slice();\n  }\n  isActive(name) {\n    if (!this.flags) {\n      this.flags = this.load();\n    }\n    return this.flags.get(name) === FeatureFlagState.Active;\n  }\n  save(options) {\n    if (!this.flags) {\n      this.flags = this.load();\n    }\n    if (!options.merge) {\n      this.flags.clear();\n    }\n    for (const [name, state] of Object.entries(options.states)) {\n      this.flags.set(name, state);\n    }\n    const enabled = Array.from(this.flags.entries()).filter(\n      ([, state]) => state === FeatureFlagState.Active\n    );\n    window.localStorage.setItem(\n      \"featureFlags\",\n      JSON.stringify(Object.fromEntries(enabled))\n    );\n  }\n  load() {\n    try {\n      const jsonStr = window.localStorage.getItem(\"featureFlags\");\n      if (!jsonStr) {\n        return /* @__PURE__ */ new Map();\n      }\n      const json = JSON.parse(jsonStr);\n      if (typeof json !== \"object\" || json === null || Array.isArray(json)) {\n        return /* @__PURE__ */ new Map();\n      }\n      const entries = Object.entries(json).filter(([name, value]) => {\n        validateFlagName(name);\n        return value === FeatureFlagState.Active;\n      });\n      return new Map(entries);\n    } catch {\n      return /* @__PURE__ */ new Map();\n    }\n  }\n}\n\nfunction createFetchApi(options) {\n  var _a;\n  let result = options.baseImplementation || global.fetch;\n  const middleware = [(_a = options.middleware) != null ? _a : []].flat().reverse();\n  for (const m of middleware) {\n    result = m.apply(result);\n  }\n  return {\n    fetch: result\n  };\n}\n\nclass IdentityAuthInjectorFetchMiddleware {\n  constructor(identityApi, allowUrl, headerName, headerValue) {\n    this.identityApi = identityApi;\n    this.allowUrl = allowUrl;\n    this.headerName = headerName;\n    this.headerValue = headerValue;\n  }\n  static create(options) {\n    var _a, _b;\n    const matcher = buildMatcher(options);\n    const headerName = ((_a = options.header) == null ? void 0 : _a.name) || \"authorization\";\n    const headerValue = ((_b = options.header) == null ? void 0 : _b.value) || ((token) => `Bearer ${token}`);\n    return new IdentityAuthInjectorFetchMiddleware(\n      options.identityApi,\n      matcher,\n      headerName,\n      headerValue\n    );\n  }\n  apply(next) {\n    return async (input, init) => {\n      const request = new Request(input, init);\n      const { token } = await this.identityApi.getCredentials();\n      if (request.headers.get(this.headerName) || typeof token !== \"string\" || !token || !this.allowUrl(request.url)) {\n        return next(input, init);\n      }\n      request.headers.set(this.headerName, this.headerValue(token));\n      return next(request);\n    };\n  }\n}\nfunction buildMatcher(options) {\n  if (options.allowUrl) {\n    return options.allowUrl;\n  } else if (options.urlPrefixAllowlist) {\n    return buildPrefixMatcher(options.urlPrefixAllowlist);\n  } else if (options.config) {\n    return buildPrefixMatcher([options.config.getString(\"backend.baseUrl\")]);\n  }\n  return () => false;\n}\nfunction buildPrefixMatcher(prefixes) {\n  const trimmedPrefixes = prefixes.map((prefix) => prefix.replace(/\\/$/, \"\"));\n  return (url) => trimmedPrefixes.some(\n    (prefix) => url === prefix || url.startsWith(`${prefix}/`)\n  );\n}\n\nfunction join(left, right) {\n  if (!right || right === \"/\") {\n    return left;\n  }\n  return `${left.replace(/\\/$/, \"\")}/${right.replace(/^\\//, \"\")}`;\n}\nclass PluginProtocolResolverFetchMiddleware {\n  constructor(discoveryApi) {\n    this.discoveryApi = discoveryApi;\n  }\n  apply(next) {\n    return async (input, init) => {\n      const request = new Request(input, init);\n      const prefix = \"plugin://\";\n      if (!request.url.startsWith(prefix)) {\n        return next(input, init);\n      }\n      const { hostname, pathname, search, hash, username, password } = new URL(\n        `http://${request.url.substring(prefix.length)}`\n      );\n      let base = await this.discoveryApi.getBaseUrl(hostname);\n      if (username || password) {\n        const baseUrl = new URL(base);\n        const authority = `${username}${password ? `:${password}` : \"\"}@`;\n        base = `${baseUrl.protocol}//${authority}${baseUrl.host}${baseUrl.pathname}`;\n      }\n      const target = `${join(base, pathname)}${search}${hash}`;\n      return next(\n        target,\n        typeof input === \"string\" || isUrl(input) ? init : input\n      );\n    };\n  }\n}\nfunction isUrl(a) {\n  return typeof a === \"object\" && (a == null ? void 0 : a.constructor) === URL;\n}\n\nclass FetchMiddlewares {\n  /**\n   * Handles translation from `plugin://` URLs to concrete http(s) URLs based on\n   * the discovery API.\n   *\n   * @remarks\n   *\n   * If the request is for `plugin://catalog/entities?filter=x=y`, the discovery\n   * API will be queried for `'catalog'`. If it returned\n   * `https://backstage.example.net/api/catalog`, the resulting query would be\n   * `https://backstage.example.net/api/catalog/entities?filter=x=y`.\n   *\n   * If the incoming URL protocol was not `plugin`, the request is just passed\n   * through verbatim to the underlying implementation.\n   */\n  static resolvePluginProtocol(options) {\n    return new PluginProtocolResolverFetchMiddleware(options.discoveryApi);\n  }\n  /**\n   * Injects a Backstage token header when the user is signed in.\n   *\n   * @remarks\n   *\n   * Per default, an `Authorization: Bearer <token>` is generated. This can be\n   * customized using the `header` option.\n   *\n   * The header injection only happens on allowlisted URLs. Per default, if the\n   * `config` option is passed in, the `backend.baseUrl` is allowlisted, unless\n   * the `urlPrefixAllowlist` or `allowUrl` options are passed in, in which case\n   * they take precedence. If you pass in neither config nor an\n   * allowlist/callback, the middleware will have no effect since effectively no\n   * request will match the (nonexistent) rules.\n   */\n  static injectIdentityAuth(options) {\n    return IdentityAuthInjectorFetchMiddleware.create(options);\n  }\n  constructor() {\n  }\n}\n\nvar __defProp$5 = Object.defineProperty;\nvar __defNormalProp$5 = (obj, key, value) => key in obj ? __defProp$5(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$5 = (obj, key, value) => {\n  __defNormalProp$5(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nfunction hasScopes(searched, searchFor) {\n  for (const scope of searchFor) {\n    if (!searched.has(scope)) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction joinScopes(scopes, ...moreScopess) {\n  const result = new Set(scopes);\n  for (const moreScopes of moreScopess) {\n    for (const scope of moreScopes) {\n      result.add(scope);\n    }\n  }\n  return result;\n}\nclass OAuthPendingRequests {\n  constructor() {\n    __publicField$5(this, \"requests\", []);\n    __publicField$5(this, \"subject\", new BehaviorSubject(\n      this.getCurrentPending()\n    ));\n  }\n  request(scopes) {\n    return new Promise((resolve, reject) => {\n      this.requests.push({ scopes, resolve, reject });\n      this.subject.next(this.getCurrentPending());\n    });\n  }\n  resolve(scopes, result) {\n    this.requests = this.requests.filter((request) => {\n      if (hasScopes(scopes, request.scopes)) {\n        request.resolve(result);\n        return false;\n      }\n      return true;\n    });\n    this.subject.next(this.getCurrentPending());\n  }\n  reject(error) {\n    this.requests.forEach((request) => request.reject(error));\n    this.requests = [];\n    this.subject.next(this.getCurrentPending());\n  }\n  pending() {\n    return this.subject;\n  }\n  getCurrentPending() {\n    const currentScopes = this.requests.length === 0 ? void 0 : this.requests.slice(1).reduce(\n      (acc, current) => joinScopes(acc, current.scopes),\n      this.requests[0].scopes\n    );\n    return {\n      scopes: currentScopes,\n      resolve: (value) => {\n        if (currentScopes) {\n          this.resolve(currentScopes, value);\n        }\n      },\n      reject: (reason) => {\n        if (currentScopes) {\n          this.reject(reason);\n        }\n      }\n    };\n  }\n}\n\nvar __defProp$4 = Object.defineProperty;\nvar __defNormalProp$4 = (obj, key, value) => key in obj ? __defProp$4(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$4 = (obj, key, value) => {\n  __defNormalProp$4(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass OAuthRequestManager {\n  constructor() {\n    __publicField$4(this, \"subject\", new BehaviorSubject([]));\n    __publicField$4(this, \"currentRequests\", []);\n    __publicField$4(this, \"handlerCount\", 0);\n  }\n  createAuthRequester(options) {\n    const handler = new OAuthPendingRequests();\n    const index = this.handlerCount;\n    this.handlerCount++;\n    handler.pending().subscribe({\n      next: (scopeRequest) => {\n        const newRequests = this.currentRequests.slice();\n        const request = this.makeAuthRequest(scopeRequest, options);\n        if (!request) {\n          delete newRequests[index];\n        } else {\n          newRequests[index] = request;\n        }\n        this.currentRequests = newRequests;\n        this.subject.next(newRequests.filter(Boolean));\n      }\n    });\n    return (scopes) => {\n      return handler.request(scopes);\n    };\n  }\n  // Converts the pending request and popup options into a popup request that we can forward to subscribers.\n  makeAuthRequest(request, options) {\n    const { scopes } = request;\n    if (!scopes) {\n      return void 0;\n    }\n    return {\n      provider: options.provider,\n      trigger: async () => {\n        const result = await options.onAuthRequest(scopes);\n        request.resolve(result);\n      },\n      reject: () => {\n        const error = new Error(\"Login failed, rejected by user\");\n        error.name = \"RejectedError\";\n        request.reject(error);\n      }\n    };\n  }\n  authRequest$() {\n    return this.subject;\n  }\n}\n\nvar __defProp$3 = Object.defineProperty;\nvar __defNormalProp$3 = (obj, key, value) => key in obj ? __defProp$3(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$3 = (obj, key, value) => {\n  __defNormalProp$3(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst buckets = /* @__PURE__ */ new Map();\nconst _WebStorage = class _WebStorage {\n  constructor(namespace, errorApi) {\n    this.namespace = namespace;\n    this.errorApi = errorApi;\n    __publicField$3(this, \"subscribers\", /* @__PURE__ */ new Set());\n    __publicField$3(this, \"observable\", new ObservableImpl((subscriber) => {\n      this.subscribers.add(subscriber);\n      return () => {\n        this.subscribers.delete(subscriber);\n      };\n    }));\n  }\n  static create(options) {\n    var _a;\n    return new _WebStorage((_a = options.namespace) != null ? _a : \"\", options.errorApi);\n  }\n  static addStorageEventListener() {\n    window.addEventListener(\"storage\", (event) => {\n      var _a;\n      for (const [bucketPath, webStorage] of buckets.entries()) {\n        if ((_a = event.key) == null ? void 0 : _a.startsWith(bucketPath)) {\n          webStorage.handleStorageChange(event.key);\n        }\n      }\n    });\n  }\n  get(key) {\n    return this.snapshot(key).value;\n  }\n  snapshot(key) {\n    let value = void 0;\n    let presence = \"absent\";\n    try {\n      const item = localStorage.getItem(this.getKeyName(key));\n      if (item) {\n        value = JSON.parse(item, (_key, val) => {\n          if (typeof val === \"object\" && val !== null) {\n            Object.freeze(val);\n          }\n          return val;\n        });\n        presence = \"present\";\n      }\n    } catch (e) {\n      this.errorApi.post(\n        new Error(`Error when parsing JSON config from storage for: ${key}`)\n      );\n    }\n    return { key, value, presence };\n  }\n  forBucket(name) {\n    const bucketPath = `${this.namespace}/${name}`;\n    if (!buckets.has(bucketPath)) {\n      buckets.set(bucketPath, new _WebStorage(bucketPath, this.errorApi));\n    }\n    return buckets.get(bucketPath);\n  }\n  async set(key, data) {\n    localStorage.setItem(this.getKeyName(key), JSON.stringify(data));\n    this.notifyChanges(key);\n  }\n  async remove(key) {\n    localStorage.removeItem(this.getKeyName(key));\n    this.notifyChanges(key);\n  }\n  observe$(key) {\n    if (!_WebStorage.hasSubscribed) {\n      _WebStorage.addStorageEventListener();\n      _WebStorage.hasSubscribed = true;\n    }\n    return this.observable.filter(({ key: messageKey }) => messageKey === key);\n  }\n  handleStorageChange(eventKey) {\n    if (!(eventKey == null ? void 0 : eventKey.startsWith(this.namespace))) {\n      return;\n    }\n    const trimmedKey = eventKey == null ? void 0 : eventKey.slice(`${this.namespace}/`.length);\n    if (!trimmedKey.includes(\"/\")) {\n      this.notifyChanges(decodeURIComponent(trimmedKey));\n    }\n  }\n  getKeyName(key) {\n    return `${this.namespace}/${encodeURIComponent(key)}`;\n  }\n  notifyChanges(key) {\n    const snapshot = this.snapshot(key);\n    for (const subscription of this.subscribers) {\n      subscription.next(snapshot);\n    }\n  }\n};\n__publicField$3(_WebStorage, \"hasSubscribed\", false);\nlet WebStorage = _WebStorage;\n\nconst InternalAppContext = createContext(void 0);\n\nfunction isReactRouterBeta() {\n  const [obj] = createRoutesFromChildren(/* @__PURE__ */ React.createElement(Route, { index: true, element: /* @__PURE__ */ React.createElement(\"div\", null) }));\n  return !obj.index;\n}\n\nconst getExtensionContext = (pathname, routes) => {\n  try {\n    const matches = matchRoutes(routes, { pathname });\n    const routeMatch = matches == null ? void 0 : matches.filter((match) => {\n      var _a;\n      return ((_a = match == null ? void 0 : match.route.routeRefs) == null ? void 0 : _a.size) > 0;\n    }).pop();\n    const routeObject = routeMatch == null ? void 0 : routeMatch.route;\n    if (!routeObject) {\n      return void 0;\n    }\n    if (routeObject.path === \"\" && pathname !== \"/\") {\n      return void 0;\n    }\n    let routeRef;\n    if (routeObject.routeRefs.size === 1) {\n      routeRef = routeObject.routeRefs.values().next().value;\n    }\n    let plugin;\n    if (routeObject.plugins.size === 1) {\n      plugin = routeObject.plugins.values().next().value;\n    }\n    const params = Object.entries(\n      (routeMatch == null ? void 0 : routeMatch.params) || {}\n    ).reduce((acc, [key, value]) => {\n      if (value !== void 0 && key !== \"*\") {\n        acc[key] = value;\n      }\n      return acc;\n    }, {});\n    return {\n      extension: \"App\",\n      pluginId: (plugin == null ? void 0 : plugin.getId()) || \"root\",\n      ...routeRef ? { routeRef: routeRef.id } : {},\n      _routeNodeType: routeObject.element,\n      params\n    };\n  } catch {\n    return void 0;\n  }\n};\nconst TrackNavigation = ({\n  pathname,\n  search,\n  hash,\n  attributes\n}) => {\n  const analytics = useAnalytics();\n  useEffect(() => {\n    analytics.captureEvent(\"navigate\", `${pathname}${search}${hash}`, {\n      attributes\n    });\n  }, [analytics, pathname, search, hash, attributes]);\n  return null;\n};\nconst RouteTracker = ({\n  routeObjects\n}) => {\n  const { pathname, search, hash } = useLocation();\n  const { params, ...attributes } = getExtensionContext(\n    pathname,\n    routeObjects\n  ) || { params: {} };\n  return /* @__PURE__ */ React.createElement(AnalyticsContext, { attributes }, /* @__PURE__ */ React.createElement(\n    TrackNavigation,\n    {\n      pathname,\n      search,\n      hash,\n      attributes: params\n    }\n  ));\n};\n\nfunction getBasePath(configApi) {\n  if (!isReactRouterBeta()) {\n    return \"\";\n  }\n  return readBasePath(configApi);\n}\nfunction readBasePath(configApi) {\n  var _a;\n  let { pathname } = new URL(\n    (_a = configApi.getOptionalString(\"app.baseUrl\")) != null ? _a : \"/\",\n    \"http://sample.dev\"\n    // baseUrl can be specified as just a path\n  );\n  pathname = pathname.replace(/\\/*$/, \"\");\n  return pathname;\n}\nfunction SignInPageWrapper({\n  component: Component,\n  appIdentityProxy,\n  children\n}) {\n  const [identityApi, setIdentityApi] = useState();\n  const configApi = useApi(configApiRef);\n  const basePath = readBasePath(configApi);\n  if (!identityApi) {\n    return /* @__PURE__ */ React.createElement(Component, { onSignInSuccess: setIdentityApi });\n  }\n  appIdentityProxy.setTarget(identityApi, {\n    signOutTargetUrl: basePath || \"/\"\n  });\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n}\nfunction AppRouter(props) {\n  const { Router: RouterComponent, SignInPage: SignInPageComponent } = useApp().getComponents();\n  const configApi = useApi(configApiRef);\n  const basePath = readBasePath(configApi);\n  const mountPath = `${basePath}/*`;\n  const internalAppContext = useContext(InternalAppContext);\n  if (!internalAppContext) {\n    throw new Error(\"AppRouter must be rendered within the AppProvider\");\n  }\n  const { routeObjects, appIdentityProxy } = internalAppContext;\n  if (!SignInPageComponent) {\n    appIdentityProxy.setTarget(\n      {\n        getUserId: () => \"guest\",\n        getIdToken: async () => void 0,\n        getProfile: () => ({\n          email: \"guest@example.com\",\n          displayName: \"Guest\"\n        }),\n        getProfileInfo: async () => ({\n          email: \"guest@example.com\",\n          displayName: \"Guest\"\n        }),\n        getBackstageIdentity: async () => ({\n          type: \"user\",\n          userEntityRef: \"user:default/guest\",\n          ownershipEntityRefs: [\"user:default/guest\"]\n        }),\n        getCredentials: async () => ({}),\n        signOut: async () => {\n        }\n      },\n      { signOutTargetUrl: basePath || \"/\" }\n    );\n    if (isReactRouterBeta()) {\n      return /* @__PURE__ */ React.createElement(RouterComponent, null, /* @__PURE__ */ React.createElement(RouteTracker, { routeObjects }), /* @__PURE__ */ React.createElement(Routes, null, /* @__PURE__ */ React.createElement(Route, { path: mountPath, element: /* @__PURE__ */ React.createElement(React.Fragment, null, props.children) })));\n    }\n    return /* @__PURE__ */ React.createElement(RouterComponent, { basename: basePath }, /* @__PURE__ */ React.createElement(RouteTracker, { routeObjects }), props.children);\n  }\n  if (isReactRouterBeta()) {\n    return /* @__PURE__ */ React.createElement(RouterComponent, null, /* @__PURE__ */ React.createElement(RouteTracker, { routeObjects }), /* @__PURE__ */ React.createElement(\n      SignInPageWrapper,\n      {\n        component: SignInPageComponent,\n        appIdentityProxy\n      },\n      /* @__PURE__ */ React.createElement(Routes, null, /* @__PURE__ */ React.createElement(Route, { path: mountPath, element: /* @__PURE__ */ React.createElement(React.Fragment, null, props.children) }))\n    ));\n  }\n  return /* @__PURE__ */ React.createElement(RouterComponent, { basename: basePath }, /* @__PURE__ */ React.createElement(RouteTracker, { routeObjects }), /* @__PURE__ */ React.createElement(\n    SignInPageWrapper,\n    {\n      component: SignInPageComponent,\n      appIdentityProxy\n    },\n    props.children\n  ));\n}\nattachComponentData(AppRouter, \"core.type\", \"AppRouter\");\n\nfunction traverseElementTree(options) {\n  const collectors = {};\n  for (const name in options.collectors) {\n    if (options.collectors.hasOwnProperty(name)) {\n      collectors[name] = options.collectors[name]();\n    }\n  }\n  const queue = [\n    {\n      node: Children.toArray(options.root),\n      parent: void 0,\n      contexts: {}\n    }\n  ];\n  while (queue.length !== 0) {\n    const { node, parent, contexts } = queue.shift();\n    Children.forEach(node, (element) => {\n      if (!isValidElement(element)) {\n        return;\n      }\n      const nextContexts = {};\n      for (const name in collectors) {\n        if (collectors.hasOwnProperty(name)) {\n          const collector = collectors[name];\n          nextContexts[name] = collector.visit(\n            collector.accumulator,\n            element,\n            parent,\n            contexts[name]\n          );\n        }\n      }\n      for (const discoverer of options.discoverers) {\n        const children = discoverer(element);\n        if (children) {\n          queue.push({\n            node: children,\n            parent: element,\n            contexts: nextContexts\n          });\n        }\n      }\n    });\n  }\n  return Object.fromEntries(\n    Object.entries(collectors).map(([name, c]) => [name, c.accumulator])\n  );\n}\nfunction createCollector(accumulatorFactory, visit) {\n  return () => ({ accumulator: accumulatorFactory(), visit });\n}\nfunction childDiscoverer(element) {\n  var _a;\n  return (_a = element.props) == null ? void 0 : _a.children;\n}\nfunction routeElementDiscoverer(element) {\n  var _a, _b, _c;\n  if (((_a = element.props) == null ? void 0 : _a.path) && ((_b = element.props) == null ? void 0 : _b.element)) {\n    return (_c = element.props) == null ? void 0 : _c.element;\n  }\n  return void 0;\n}\n\nconst pluginCollector = createCollector(\n  () => /* @__PURE__ */ new Set(),\n  (acc, node) => {\n    const plugin = getComponentData(node, \"core.plugin\");\n    if (plugin) {\n      acc.add(plugin);\n    }\n  }\n);\n\nconst FeatureFlagged = (props) => {\n  const { children } = props;\n  const featureFlagApi = useApi(featureFlagsApiRef);\n  const isEnabled = \"with\" in props ? featureFlagApi.isActive(props.with) : !featureFlagApi.isActive(props.without);\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, isEnabled ? children : null);\n};\nattachComponentData(FeatureFlagged, \"core.featureFlagged\", true);\n\nconst MATCH_ALL_ROUTE = {\n  caseSensitive: false,\n  path: \"*\",\n  element: \"match-all\",\n  // These elements aren't used, so we add in a bit of debug information\n  routeRefs: /* @__PURE__ */ new Set(),\n  plugins: /* @__PURE__ */ new Set()\n};\nfunction stringifyNode(node) {\n  var _a, _b;\n  const anyNode = node;\n  if (anyNode == null ? void 0 : anyNode.type) {\n    return (_b = (_a = anyNode.type.displayName) != null ? _a : anyNode.type.name) != null ? _b : String(anyNode.type);\n  }\n  return String(anyNode);\n}\nconst pluginSet = (plugin) => {\n  const set = /* @__PURE__ */ new Set();\n  if (plugin) {\n    set.add(plugin);\n  }\n  return set;\n};\nfunction collectSubTree(node, entries = new Array()) {\n  Children.forEach(node, (element) => {\n    if (!isValidElement(element)) {\n      return;\n    }\n    const routeRef = getComponentData(element, \"core.mountPoint\");\n    if (routeRef) {\n      const plugin = getComponentData(element, \"core.plugin\");\n      entries.push({ routeRef, plugin });\n    }\n    collectSubTree(element.props.children, entries);\n  });\n  return entries;\n}\nconst routingV2Collector = createCollector(\n  () => ({\n    paths: /* @__PURE__ */ new Map(),\n    parents: /* @__PURE__ */ new Map(),\n    objects: new Array()\n  }),\n  (acc, node, parent, ctx) => {\n    var _a, _b, _c, _d, _e, _f, _g;\n    if (ctx == null ? void 0 : ctx.isElementAncestor) {\n      return ctx;\n    }\n    if ((parent == null ? void 0 : parent.props.element) === node) {\n      return { ...ctx, isElementAncestor: true };\n    }\n    const pathProp = (_a = node.props) == null ? void 0 : _a.path;\n    const mountPoint = getComponentData(node, \"core.mountPoint\");\n    if (mountPoint && pathProp) {\n      throw new Error(\n        `Path property may not be set directly on a routable extension \"${stringifyNode(\n          node\n        )}\"`\n      );\n    }\n    const parentChildren = (_c = (_b = ctx == null ? void 0 : ctx.obj) == null ? void 0 : _b.children) != null ? _c : acc.objects;\n    if (pathProp !== void 0) {\n      if (typeof pathProp !== \"string\") {\n        throw new Error(\n          `Element path must be a string at \"${stringifyNode(node)}\"`\n        );\n      }\n      const path = pathProp.startsWith(\"/\") ? pathProp.slice(1) : pathProp;\n      const elementProp = node.props.element;\n      if (getComponentData(node, \"core.gatherMountPoints\")) {\n        if (elementProp) {\n          throw new Error(\n            `Mount point gatherers may not have an element prop \"${stringifyNode(\n              node\n            )}\"`\n          );\n        }\n        const newObj = {\n          path,\n          element: \"gathered\",\n          routeRefs: /* @__PURE__ */ new Set(),\n          caseSensitive: Boolean((_d = node.props) == null ? void 0 : _d.caseSensitive),\n          children: [MATCH_ALL_ROUTE],\n          plugins: /* @__PURE__ */ new Set()\n        };\n        parentChildren.push(newObj);\n        return {\n          obj: newObj,\n          gatherPath: path,\n          routeRef: ctx == null ? void 0 : ctx.routeRef,\n          gatherRouteRef: ctx == null ? void 0 : ctx.routeRef\n        };\n      }\n      if (elementProp) {\n        const [extension, ...others] = collectSubTree(elementProp);\n        if (others.length > 0) {\n          throw new Error(\n            `Route element with path \"${pathProp}\" may not contain multiple routable extensions`\n          );\n        }\n        if (!extension) {\n          return ctx;\n        }\n        const { routeRef, plugin } = extension;\n        const newObj = {\n          path,\n          element: \"mounted\",\n          routeRefs: /* @__PURE__ */ new Set([routeRef]),\n          caseSensitive: Boolean((_e = node.props) == null ? void 0 : _e.caseSensitive),\n          children: [MATCH_ALL_ROUTE],\n          plugins: pluginSet(plugin)\n        };\n        parentChildren.push(newObj);\n        acc.paths.set(routeRef, path);\n        acc.parents.set(routeRef, ctx == null ? void 0 : ctx.routeRef);\n        return {\n          obj: newObj,\n          routeRef: routeRef != null ? routeRef : ctx == null ? void 0 : ctx.routeRef,\n          gatherPath: path,\n          gatherRouteRef: ctx == null ? void 0 : ctx.gatherRouteRef\n        };\n      }\n    }\n    if (mountPoint) {\n      if ((ctx == null ? void 0 : ctx.gatherPath) === void 0) {\n        throw new Error(\n          `Routable extension \"${stringifyNode(\n            node\n          )}\" with mount point \"${mountPoint}\" must be assigned a path`\n        );\n      }\n      (_f = ctx == null ? void 0 : ctx.obj) == null ? void 0 : _f.routeRefs.add(mountPoint);\n      const mountPointPlugin = getComponentData(\n        node,\n        \"core.plugin\"\n      );\n      if (mountPointPlugin) {\n        (_g = ctx == null ? void 0 : ctx.obj) == null ? void 0 : _g.plugins.add(mountPointPlugin);\n      }\n      acc.paths.set(mountPoint, ctx.gatherPath);\n      acc.parents.set(mountPoint, ctx == null ? void 0 : ctx.gatherRouteRef);\n      return {\n        ...ctx,\n        routeRef: mountPoint\n      };\n    }\n    return ctx;\n  }\n);\nconst routingV1Collector = createCollector(\n  () => ({\n    paths: /* @__PURE__ */ new Map(),\n    parents: /* @__PURE__ */ new Map(),\n    objects: new Array()\n  }),\n  (acc, node, parent, ctx) => {\n    var _a, _b, _c, _d, _e;\n    if ((parent == null ? void 0 : parent.props.element) === node) {\n      return ctx;\n    }\n    let currentObj = ctx == null ? void 0 : ctx.obj;\n    let currentParentRouteRef = ctx == null ? void 0 : ctx.routeRef;\n    let sticky = ctx == null ? void 0 : ctx.sticky;\n    const path = (_a = node.props) == null ? void 0 : _a.path;\n    const parentChildren = (_b = currentObj == null ? void 0 : currentObj.children) != null ? _b : acc.objects;\n    const caseSensitive = Boolean((_c = node.props) == null ? void 0 : _c.caseSensitive);\n    let currentCtxPath = ctx == null ? void 0 : ctx.path;\n    if (getComponentData(node, \"core.gatherMountPoints\")) {\n      if (!path) {\n        throw new Error(\"Mount point gatherer must have a path\");\n      }\n      currentCtxPath = path;\n    }\n    const element = (_d = node.props) == null ? void 0 : _d.element;\n    let routeRef = getComponentData(node, \"core.mountPoint\");\n    if (!routeRef && isValidElement(element)) {\n      routeRef = getComponentData(element, \"core.mountPoint\");\n    }\n    if (routeRef) {\n      let routePath = path;\n      if (currentCtxPath) {\n        if (routePath) {\n          currentCtxPath = void 0;\n        } else {\n          routePath = currentCtxPath;\n        }\n      }\n      if (!routePath) {\n        throw new Error(\"Mounted routable extension must have a path\");\n      }\n      acc.paths.set(routeRef, routePath);\n      if (currentParentRouteRef && sticky) {\n        acc.parents.set(routeRef, currentParentRouteRef);\n        if (path) {\n          currentParentRouteRef = routeRef;\n          sticky = false;\n        }\n      } else {\n        acc.parents.set(routeRef, currentParentRouteRef);\n        currentParentRouteRef = routeRef;\n      }\n      if (path) {\n        currentObj = {\n          caseSensitive,\n          path,\n          element: \"mounted\",\n          routeRefs: /* @__PURE__ */ new Set([routeRef]),\n          children: [MATCH_ALL_ROUTE],\n          plugins: pluginSet(\n            getComponentData(\n              node.props.element,\n              \"core.plugin\"\n            )\n          )\n        };\n        parentChildren.push(currentObj);\n      } else {\n        currentObj == null ? void 0 : currentObj.routeRefs.add(routeRef);\n      }\n    }\n    if (getComponentData(node, \"core.gatherMountPoints\")) {\n      sticky = true;\n    }\n    const isGatherer = getComponentData(\n      node,\n      \"core.gatherMountPoints\"\n    );\n    if (isGatherer) {\n      if (!path) {\n        throw new Error(\"Mount point gatherer must have a path\");\n      }\n      if (!routeRef) {\n        currentObj = {\n          caseSensitive,\n          path,\n          element: \"gathered\",\n          routeRefs: /* @__PURE__ */ new Set(),\n          children: [MATCH_ALL_ROUTE],\n          plugins: ((_e = ctx == null ? void 0 : ctx.obj) == null ? void 0 : _e.plugins) || /* @__PURE__ */ new Set()\n        };\n        parentChildren.push(currentObj);\n      }\n    }\n    return {\n      obj: currentObj,\n      path: currentCtxPath,\n      routeRef: currentParentRouteRef,\n      sticky\n    };\n  }\n);\nconst featureFlagCollector = createCollector(\n  () => /* @__PURE__ */ new Set(),\n  (acc, node) => {\n    if (node.type === FeatureFlagged) {\n      const props = node.props;\n      acc.add(\"with\" in props ? props.with : props.without);\n    }\n  }\n);\n\nconst routeRefType = getOrCreateGlobalSingleton(\n  \"route-ref-type\",\n  () => Symbol(\"route-ref-type\")\n);\nfunction isRouteRef(routeRef) {\n  return routeRef[routeRefType] === \"absolute\";\n}\nfunction isSubRouteRef(routeRef) {\n  return routeRef[routeRefType] === \"sub\";\n}\nfunction isExternalRouteRef(routeRef) {\n  return routeRef[routeRefType] === \"external\";\n}\n\nfunction joinPaths(...paths) {\n  const normalized = paths.join(\"/\").replace(/\\/\\/+/g, \"/\");\n  if (normalized !== \"/\" && normalized.endsWith(\"/\")) {\n    return normalized.slice(0, -1);\n  }\n  return normalized;\n}\n\nfunction resolveTargetRef(anyRouteRef, routePaths, routeBindings) {\n  let targetRef;\n  let subRoutePath = \"\";\n  if (isRouteRef(anyRouteRef)) {\n    targetRef = anyRouteRef;\n  } else if (isSubRouteRef(anyRouteRef)) {\n    targetRef = anyRouteRef.parent;\n    subRoutePath = anyRouteRef.path;\n  } else if (isExternalRouteRef(anyRouteRef)) {\n    const resolvedRoute = routeBindings.get(anyRouteRef);\n    if (!resolvedRoute) {\n      return [void 0, \"\"];\n    }\n    if (isRouteRef(resolvedRoute)) {\n      targetRef = resolvedRoute;\n    } else if (isSubRouteRef(resolvedRoute)) {\n      targetRef = resolvedRoute.parent;\n      subRoutePath = resolvedRoute.path;\n    } else {\n      throw new Error(\n        `ExternalRouteRef was bound to invalid target, ${resolvedRoute}`\n      );\n    }\n  } else if (anyRouteRef[routeRefType]) {\n    throw new Error(\n      `Unknown or invalid route ref type, ${anyRouteRef[routeRefType]}`\n    );\n  } else {\n    throw new Error(`Unknown object passed to useRouteRef, got ${anyRouteRef}`);\n  }\n  if (!targetRef) {\n    return [void 0, \"\"];\n  }\n  const resolvedPath = routePaths.get(targetRef);\n  if (resolvedPath === void 0) {\n    return [void 0, \"\"];\n  }\n  const targetPath = joinPaths(resolvedPath, subRoutePath);\n  return [targetRef, targetPath];\n}\nfunction resolveBasePath(targetRef, sourceLocation, routePaths, routeParents, routeObjects) {\n  var _a;\n  const match = (_a = matchRoutes(routeObjects, sourceLocation)) != null ? _a : [];\n  const refDiffList = Array();\n  let matchIndex = -1;\n  for (let targetSearchRef = targetRef; targetSearchRef; targetSearchRef = routeParents.get(targetSearchRef)) {\n    matchIndex = match.findIndex(\n      (m) => m.route.routeRefs.has(targetSearchRef)\n    );\n    if (matchIndex !== -1) {\n      break;\n    }\n    refDiffList.unshift(targetSearchRef);\n  }\n  if (refDiffList.length === 0) {\n    matchIndex -= 1;\n  }\n  const parentPath = matchIndex === -1 ? \"\" : match[matchIndex].pathname;\n  const diffPaths = refDiffList.slice(0, -1).map((ref) => {\n    const path = routePaths.get(ref);\n    if (path === void 0) {\n      throw new Error(`No path for ${ref}`);\n    }\n    if (path.includes(\":\")) {\n      throw new Error(\n        `Cannot route to ${targetRef} with parent ${ref} as it has parameters`\n      );\n    }\n    return path;\n  });\n  return `${joinPaths(parentPath, ...diffPaths)}/`;\n}\nclass RouteResolver {\n  constructor(routePaths, routeParents, routeObjects, routeBindings, appBasePath) {\n    this.routePaths = routePaths;\n    this.routeParents = routeParents;\n    this.routeObjects = routeObjects;\n    this.routeBindings = routeBindings;\n    this.appBasePath = appBasePath;\n  }\n  resolve(anyRouteRef, sourceLocation) {\n    const [targetRef, targetPath] = resolveTargetRef(\n      anyRouteRef,\n      this.routePaths,\n      this.routeBindings\n    );\n    if (!targetRef) {\n      return void 0;\n    }\n    let relativeSourceLocation;\n    if (typeof sourceLocation === \"string\") {\n      relativeSourceLocation = this.trimPath(sourceLocation);\n    } else if (sourceLocation.pathname) {\n      relativeSourceLocation = {\n        ...sourceLocation,\n        pathname: this.trimPath(sourceLocation.pathname)\n      };\n    } else {\n      relativeSourceLocation = sourceLocation;\n    }\n    const basePath = this.appBasePath + resolveBasePath(\n      targetRef,\n      relativeSourceLocation,\n      this.routePaths,\n      this.routeParents,\n      this.routeObjects\n    );\n    const routeFunc = (...[params]) => {\n      const encodedParams = params && mapValues(params, (value) => {\n        if (typeof value === \"string\") {\n          return value.replaceAll(/[&?#;\\/]/g, (c) => encodeURIComponent(c));\n        }\n        return value;\n      });\n      return joinPaths(basePath, generatePath(targetPath, encodedParams));\n    };\n    return routeFunc;\n  }\n  trimPath(targetPath) {\n    if (!targetPath) {\n      return targetPath;\n    }\n    if (targetPath.startsWith(this.appBasePath)) {\n      return targetPath.slice(this.appBasePath.length);\n    }\n    return targetPath;\n  }\n}\n\nconst RoutingContext = createVersionedContext(\n  \"routing-context\"\n);\nconst RoutingProvider = ({\n  routePaths,\n  routeParents,\n  routeObjects,\n  routeBindings,\n  basePath = \"\",\n  children\n}) => {\n  const resolver = new RouteResolver(\n    routePaths,\n    routeParents,\n    routeObjects,\n    routeBindings,\n    basePath\n  );\n  const versionedValue = createVersionedValueMap({ 1: resolver });\n  return /* @__PURE__ */ React.createElement(RoutingContext.Provider, { value: versionedValue }, children);\n};\n\nfunction validateRouteParameters(routePaths, routeParents) {\n  const notLeafRoutes = new Set(routeParents.values());\n  notLeafRoutes.delete(void 0);\n  for (const route of routeParents.keys()) {\n    if (notLeafRoutes.has(route)) {\n      continue;\n    }\n    let currentRouteRef = route;\n    let fullPath = \"\";\n    while (currentRouteRef) {\n      const path = routePaths.get(currentRouteRef);\n      if (path === void 0) {\n        throw new Error(`No path for ${currentRouteRef}`);\n      }\n      fullPath = joinPaths(path, fullPath);\n      currentRouteRef = routeParents.get(currentRouteRef);\n    }\n    const params = fullPath.match(/:(\\w+)/g);\n    if (params) {\n      for (let j = 0; j < params.length; j++) {\n        for (let i = j + 1; i < params.length; i++) {\n          if (params[i] === params[j]) {\n            throw new Error(\n              `Parameter ${params[i]} is duplicated in path ${fullPath}`\n            );\n          }\n        }\n      }\n    }\n  }\n}\nfunction validateRouteBindings(routeBindings, plugins) {\n  for (const plugin of plugins) {\n    if (!plugin.externalRoutes) {\n      continue;\n    }\n    for (const [name, externalRouteRef] of Object.entries(\n      plugin.externalRoutes\n    )) {\n      if (externalRouteRef.optional) {\n        continue;\n      }\n      if (!routeBindings.has(externalRouteRef)) {\n        throw new Error(\n          `External route '${name}' of the '${plugin.getId()}' plugin must be bound to a target route. See https://backstage.io/link?bind-routes for details.`\n        );\n      }\n    }\n  }\n}\n\nconst AppContext = createVersionedContext(\"app-context\");\nconst AppContextProvider = ({\n  appContext,\n  children\n}) => {\n  const versionedValue = createVersionedValueMap({ 1: appContext });\n  return /* @__PURE__ */ React.createElement(AppContext.Provider, { value: versionedValue, children });\n};\n\nvar __defProp$2 = Object.defineProperty;\nvar __defNormalProp$2 = (obj, key, value) => key in obj ? __defProp$2(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$2 = (obj, key, value) => {\n  __defNormalProp$2(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nfunction mkError(thing) {\n  return new Error(\n    `Tried to access IdentityApi ${thing} before app was loaded`\n  );\n}\nfunction logDeprecation(thing) {\n  console.warn(\n    `WARNING: Call to ${thing} is deprecated and will break in the future`\n  );\n}\nclass AppIdentityProxy {\n  constructor() {\n    __publicField$2(this, \"target\");\n    __publicField$2(this, \"waitForTarget\");\n    __publicField$2(this, \"resolveTarget\", () => {\n    });\n    __publicField$2(this, \"signOutTargetUrl\", \"/\");\n    this.waitForTarget = new Promise((resolve) => {\n      this.resolveTarget = resolve;\n    });\n  }\n  // This is called by the app manager once the sign-in page provides us with an implementation\n  setTarget(identityApi, targetOptions) {\n    this.target = identityApi;\n    this.signOutTargetUrl = targetOptions.signOutTargetUrl;\n    this.resolveTarget(identityApi);\n  }\n  getUserId() {\n    if (!this.target) {\n      throw mkError(\"getUserId\");\n    }\n    if (!this.target.getUserId) {\n      throw new Error(\"IdentityApi does not implement getUserId\");\n    }\n    logDeprecation(\"getUserId\");\n    return this.target.getUserId();\n  }\n  getProfile() {\n    if (!this.target) {\n      throw mkError(\"getProfile\");\n    }\n    if (!this.target.getProfile) {\n      throw new Error(\"IdentityApi does not implement getProfile\");\n    }\n    logDeprecation(\"getProfile\");\n    return this.target.getProfile();\n  }\n  async getProfileInfo() {\n    return this.waitForTarget.then((target) => target.getProfileInfo());\n  }\n  async getBackstageIdentity() {\n    const identity = await this.waitForTarget.then(\n      (target) => target.getBackstageIdentity()\n    );\n    if (!identity.userEntityRef.match(/^.*:.*\\/.*$/)) {\n      console.warn(\n        `WARNING: The App IdentityApi provided an invalid userEntityRef, '${identity.userEntityRef}'. It must be a full Entity Reference of the form '<kind>:<namespace>/<name>'.`\n      );\n    }\n    return identity;\n  }\n  async getCredentials() {\n    return this.waitForTarget.then((target) => target.getCredentials());\n  }\n  async getIdToken() {\n    return this.waitForTarget.then((target) => {\n      if (!target.getIdToken) {\n        throw new Error(\"IdentityApi does not implement getIdToken\");\n      }\n      logDeprecation(\"getIdToken\");\n      return target.getIdToken();\n    });\n  }\n  async signOut() {\n    await this.waitForTarget.then((target) => target.signOut());\n    window.location.href = this.signOutTargetUrl;\n  }\n}\n\nfunction resolveTheme(themeId, shouldPreferDark, themes) {\n  if (themeId !== void 0) {\n    const selectedTheme = themes.find((theme) => theme.id === themeId);\n    if (selectedTheme) {\n      return selectedTheme;\n    }\n  }\n  if (shouldPreferDark) {\n    const darkTheme = themes.find((theme) => theme.variant === \"dark\");\n    if (darkTheme) {\n      return darkTheme;\n    }\n  }\n  const lightTheme = themes.find((theme) => theme.variant === \"light\");\n  if (lightTheme) {\n    return lightTheme;\n  }\n  return themes[0];\n}\nconst useShouldPreferDarkTheme = () => {\n  const mediaQuery = useMemo(\n    () => window.matchMedia(\"(prefers-color-scheme: dark)\"),\n    []\n  );\n  const [shouldPreferDark, setPrefersDark] = useState(mediaQuery.matches);\n  useEffect(() => {\n    const listener = (event) => {\n      setPrefersDark(event.matches);\n    };\n    mediaQuery.addListener(listener);\n    return () => {\n      mediaQuery.removeListener(listener);\n    };\n  }, [mediaQuery]);\n  return shouldPreferDark;\n};\nfunction AppThemeProvider({ children }) {\n  const appThemeApi = useApi(appThemeApiRef);\n  const themeId = useObservable(\n    appThemeApi.activeThemeId$(),\n    appThemeApi.getActiveThemeId()\n  );\n  const shouldPreferDark = Boolean(window.matchMedia) ? useShouldPreferDarkTheme() : false;\n  const appTheme = resolveTheme(\n    themeId,\n    shouldPreferDark,\n    appThemeApi.getInstalledThemes()\n  );\n  if (!appTheme) {\n    throw new Error(\"App has no themes\");\n  }\n  return /* @__PURE__ */ React.createElement(appTheme.Provider, { children });\n}\n\nconst defaultConfigLoader = async () => defaultConfigLoaderSync();\nfunction defaultConfigLoaderSync(runtimeConfigJson = \"__APP_INJECTED_RUNTIME_CONFIG__\") {\n  const appConfig = process.env.APP_CONFIG;\n  if (!appConfig) {\n    throw new Error(\"No static configuration provided\");\n  }\n  if (!Array.isArray(appConfig)) {\n    throw new Error(\"Static configuration has invalid format\");\n  }\n  const configs = appConfig.slice();\n  if (runtimeConfigJson !== \"__app_injected_runtime_config__\".toLocaleUpperCase(\"en-US\")) {\n    try {\n      const data = JSON.parse(runtimeConfigJson);\n      if (Array.isArray(data)) {\n        configs.push(...data);\n      } else {\n        configs.push({ data, context: \"env\" });\n      }\n    } catch (error) {\n      throw new Error(`Failed to load runtime configuration, ${error}`);\n    }\n  }\n  const windowAppConfig = window.__APP_CONFIG__;\n  if (windowAppConfig) {\n    configs.push({\n      context: \"window\",\n      data: windowAppConfig\n    });\n  }\n  return configs;\n}\n\nvar __defProp$1 = Object.defineProperty;\nvar __defNormalProp$1 = (obj, key, value) => key in obj ? __defProp$1(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$1 = (obj, key, value) => {\n  __defNormalProp$1(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass ApiRegistryBuilder {\n  constructor() {\n    __publicField$1(this, \"apis\", []);\n  }\n  add(api, impl) {\n    this.apis.push([api.id, impl]);\n    return impl;\n  }\n  build() {\n    return new ApiRegistry(new Map(this.apis));\n  }\n}\nclass ApiRegistry {\n  constructor(apis) {\n    this.apis = apis;\n  }\n  static builder() {\n    return new ApiRegistryBuilder();\n  }\n  /**\n   * Creates a new ApiRegistry with a list of API implementations.\n   *\n   * @param apis - A list of pairs mapping an ApiRef to its respective implementation\n   */\n  static from(apis) {\n    return new ApiRegistry(new Map(apis.map(([api, impl]) => [api.id, impl])));\n  }\n  /**\n   * Creates a new ApiRegistry with a single API implementation.\n   *\n   * @param api - ApiRef for the API to add\n   * @param impl - Implementation of the API to add\n   */\n  static with(api, impl) {\n    return new ApiRegistry(/* @__PURE__ */ new Map([[api.id, impl]]));\n  }\n  /**\n   * Returns a new ApiRegistry with the provided API added to the existing ones.\n   *\n   * @param api - ApiRef for the API to add\n   * @param impl - Implementation of the API to add\n   */\n  with(api, impl) {\n    return new ApiRegistry(new Map([...this.apis, [api.id, impl]]));\n  }\n  get(api) {\n    return this.apis.get(api.id);\n  }\n}\n\nfunction resolveRouteBindings(bindRoutes) {\n  const result = /* @__PURE__ */ new Map();\n  if (bindRoutes) {\n    const bind = (externalRoutes, targetRoutes) => {\n      for (const [key, value] of Object.entries(targetRoutes)) {\n        const externalRoute = externalRoutes[key];\n        if (!externalRoute) {\n          throw new Error(`Key ${key} is not an existing external route`);\n        }\n        if (!value && !externalRoute.optional) {\n          throw new Error(\n            `External route ${key} is required but was undefined`\n          );\n        }\n        if (value) {\n          result.set(externalRoute, value);\n        }\n      }\n    };\n    bindRoutes({ bind });\n  }\n  return result;\n}\n\nvar __accessCheck$2 = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet$2 = (obj, member, getter) => {\n  __accessCheck$2(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd$2 = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet$2 = (obj, member, value, setter) => {\n  __accessCheck$2(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _languages, _language$1, _subject;\nconst STORAGE_KEY = \"language\";\nconst DEFAULT_LANGUAGE = \"en\";\nconst _AppLanguageSelector = class _AppLanguageSelector {\n  constructor(languages, initialLanguage) {\n    __privateAdd$2(this, _languages, void 0);\n    __privateAdd$2(this, _language$1, void 0);\n    __privateAdd$2(this, _subject, void 0);\n    __privateSet$2(this, _languages, languages);\n    __privateSet$2(this, _language$1, initialLanguage);\n    __privateSet$2(this, _subject, new BehaviorSubject({\n      language: __privateGet$2(this, _language$1)\n    }));\n  }\n  static create(options) {\n    var _a, _b;\n    const languages = (_a = options == null ? void 0 : options.availableLanguages) != null ? _a : [DEFAULT_LANGUAGE];\n    if (languages.length !== new Set(languages).size) {\n      throw new Error(\n        `Supported languages may not contain duplicates, got '${languages.join(\n          \"', '\"\n        )}'`\n      );\n    }\n    if (!languages.includes(DEFAULT_LANGUAGE)) {\n      throw new Error(`Supported languages must include '${DEFAULT_LANGUAGE}'`);\n    }\n    const initialLanguage = (_b = options == null ? void 0 : options.defaultLanguage) != null ? _b : DEFAULT_LANGUAGE;\n    if (!languages.includes(initialLanguage)) {\n      throw new Error(\n        `Initial language must be one of the supported languages, got '${initialLanguage}'`\n      );\n    }\n    return new _AppLanguageSelector(languages, initialLanguage);\n  }\n  static createWithStorage(options) {\n    const selector = _AppLanguageSelector.create(options);\n    if (!window.localStorage) {\n      return selector;\n    }\n    const storedLanguage = window.localStorage.getItem(STORAGE_KEY);\n    const { languages } = selector.getAvailableLanguages();\n    if (storedLanguage && languages.includes(storedLanguage)) {\n      selector.setLanguage(storedLanguage);\n    }\n    selector.language$().subscribe(({ language }) => {\n      if (language !== window.localStorage.getItem(STORAGE_KEY)) {\n        window.localStorage.setItem(STORAGE_KEY, language);\n      }\n    });\n    window.addEventListener(\"storage\", (event) => {\n      var _a;\n      if (event.key === STORAGE_KEY) {\n        const language = (_a = localStorage.getItem(STORAGE_KEY)) != null ? _a : void 0;\n        if (language) {\n          selector.setLanguage(language);\n        }\n      }\n    });\n    return selector;\n  }\n  getAvailableLanguages() {\n    return { languages: __privateGet$2(this, _languages).slice() };\n  }\n  setLanguage(language) {\n    const lng = language != null ? language : DEFAULT_LANGUAGE;\n    if (lng === __privateGet$2(this, _language$1)) {\n      return;\n    }\n    if (lng && !__privateGet$2(this, _languages).includes(lng)) {\n      throw new Error(\n        `Failed to change language to '${lng}', available languages are '${__privateGet$2(this, _languages).join(\n          \"', '\"\n        )}'`\n      );\n    }\n    __privateSet$2(this, _language$1, lng);\n    __privateGet$2(this, _subject).next({ language: lng });\n  }\n  getLanguage() {\n    return { language: __privateGet$2(this, _language$1) };\n  }\n  language$() {\n    return __privateGet$2(this, _subject);\n  }\n};\n_languages = new WeakMap();\n_language$1 = new WeakMap();\n_subject = new WeakMap();\nlet AppLanguageSelector = _AppLanguageSelector;\n\nfunction toInternalTranslationResource(resource) {\n  const r = resource;\n  if (r.$$type !== \"@backstage/TranslationResource\") {\n    throw new Error(`Invalid translation resource, bad type '${r.$$type}'`);\n  }\n  if (r.version !== \"v1\") {\n    throw new Error(`Invalid translation resource, bad version '${r.version}'`);\n  }\n  return r;\n}\n\nfunction toInternalTranslationRef(ref) {\n  const r = ref;\n  if (r.$$type !== \"@backstage/TranslationRef\") {\n    throw new Error(`Invalid translation ref, bad type '${r.$$type}'`);\n  }\n  if (r.version !== \"v1\") {\n    throw new Error(`Invalid translation ref, bad version '${r.version}'`);\n  }\n  return r;\n}\n\nvar __accessCheck$1 = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet$1 = (obj, member, getter) => {\n  __accessCheck$1(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd$1 = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet$1 = (obj, member, value, setter) => {\n  __accessCheck$1(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar __privateMethod = (obj, member, method) => {\n  __accessCheck$1(obj, member, \"access private method\");\n  return method;\n};\nvar _loaded, _loading, _loaders, _getLoaderKey, getLoaderKey_fn, _i18n, _loader, _language, _registeredRefs, _languageChangeListeners, _changeLanguage, changeLanguage_fn, _createSnapshot, createSnapshot_fn, _registerDefaults, registerDefaults_fn;\nfunction removeNulls(messages) {\n  return Object.fromEntries(\n    Object.entries(messages).filter(\n      (e) => e[1] !== null\n    )\n  );\n}\nclass ResourceLoader {\n  constructor(onLoad) {\n    this.onLoad = onLoad;\n    __privateAdd$1(this, _getLoaderKey);\n    /** Loaded resources by loader key */\n    __privateAdd$1(this, _loaded, /* @__PURE__ */ new Set());\n    /** Resource loading promises by loader key */\n    __privateAdd$1(this, _loading, /* @__PURE__ */ new Map());\n    /** Loaders for each resource language */\n    __privateAdd$1(this, _loaders, /* @__PURE__ */ new Map());\n  }\n  addTranslationResource(resource) {\n    const internalResource = toInternalTranslationResource(resource);\n    for (const entry of internalResource.resources) {\n      const key = __privateMethod(this, _getLoaderKey, getLoaderKey_fn).call(this, entry.language, internalResource.id);\n      if (!__privateGet$1(this, _loaders).has(key)) {\n        __privateGet$1(this, _loaders).set(key, entry.loader);\n      }\n    }\n  }\n  needsLoading(language, namespace) {\n    const key = __privateMethod(this, _getLoaderKey, getLoaderKey_fn).call(this, language, namespace);\n    const loader = __privateGet$1(this, _loaders).get(key);\n    if (!loader) {\n      return false;\n    }\n    return !__privateGet$1(this, _loaded).has(key);\n  }\n  async load(language, namespace) {\n    const key = __privateMethod(this, _getLoaderKey, getLoaderKey_fn).call(this, language, namespace);\n    const loader = __privateGet$1(this, _loaders).get(key);\n    if (!loader) {\n      return;\n    }\n    if (__privateGet$1(this, _loaded).has(key)) {\n      return;\n    }\n    const loading = __privateGet$1(this, _loading).get(key);\n    if (loading) {\n      await loading;\n      return;\n    }\n    const load = loader().then(\n      (result) => {\n        this.onLoad({ language, namespace, messages: result.messages });\n        __privateGet$1(this, _loaded).add(key);\n      },\n      (error) => {\n        __privateGet$1(this, _loaded).add(key);\n        throw error;\n      }\n    );\n    __privateGet$1(this, _loading).set(key, load);\n    await load;\n  }\n}\n_loaded = new WeakMap();\n_loading = new WeakMap();\n_loaders = new WeakMap();\n_getLoaderKey = new WeakSet();\ngetLoaderKey_fn = function(language, namespace) {\n  return `${language}/${namespace}`;\n};\nconst _I18nextTranslationApi = class _I18nextTranslationApi {\n  constructor(i18n, loader, language) {\n    __privateAdd$1(this, _changeLanguage);\n    __privateAdd$1(this, _createSnapshot);\n    __privateAdd$1(this, _registerDefaults);\n    __privateAdd$1(this, _i18n, void 0);\n    __privateAdd$1(this, _loader, void 0);\n    __privateAdd$1(this, _language, void 0);\n    /** Keep track of which refs we have registered default resources for */\n    __privateAdd$1(this, _registeredRefs, /* @__PURE__ */ new Set());\n    /** Notify observers when language changes */\n    __privateAdd$1(this, _languageChangeListeners, /* @__PURE__ */ new Set());\n    __privateSet$1(this, _i18n, i18n);\n    __privateSet$1(this, _loader, loader);\n    __privateSet$1(this, _language, language);\n  }\n  static create(options) {\n    const { languages } = options.languageApi.getAvailableLanguages();\n    const i18n = createInstance({\n      fallbackLng: DEFAULT_LANGUAGE,\n      supportedLngs: languages,\n      interpolation: {\n        escapeValue: false\n      },\n      ns: [],\n      defaultNS: false,\n      fallbackNS: false,\n      // Disable resource loading on init, meaning i18n will be ready to use immediately\n      initImmediate: false\n    });\n    i18n.init();\n    if (!i18n.isInitialized) {\n      throw new Error(\"i18next was unexpectedly not initialized\");\n    }\n    const { language: initialLanguage } = options.languageApi.getLanguage();\n    if (initialLanguage !== DEFAULT_LANGUAGE) {\n      i18n.changeLanguage(initialLanguage);\n    }\n    const loader = new ResourceLoader((loaded) => {\n      i18n.addResourceBundle(\n        loaded.language,\n        loaded.namespace,\n        removeNulls(loaded.messages),\n        false,\n        // do not merge with existing translations\n        true\n        // overwrite translations\n      );\n    });\n    const resources = (options == null ? void 0 : options.resources) || [];\n    for (let i = resources.length - 1; i >= 0; i--) {\n      const resource = resources[i];\n      if (resource.$$type === \"@backstage/TranslationResource\") {\n        loader.addTranslationResource(resource);\n      } else if (resource.$$type === \"@backstage/TranslationMessages\") {\n        i18n.addResourceBundle(\n          DEFAULT_LANGUAGE,\n          resource.id,\n          removeNulls(resource.messages),\n          true,\n          // merge with existing translations\n          false\n          // do not overwrite translations\n        );\n      }\n    }\n    const instance = new _I18nextTranslationApi(\n      i18n,\n      loader,\n      options.languageApi.getLanguage().language\n    );\n    options.languageApi.language$().subscribe(({ language }) => {\n      var _a;\n      __privateMethod(_a = instance, _changeLanguage, changeLanguage_fn).call(_a, language);\n    });\n    return instance;\n  }\n  getTranslation(translationRef) {\n    const internalRef = toInternalTranslationRef(translationRef);\n    __privateMethod(this, _registerDefaults, registerDefaults_fn).call(this, internalRef);\n    return __privateMethod(this, _createSnapshot, createSnapshot_fn).call(this, internalRef);\n  }\n  translation$(translationRef) {\n    const internalRef = toInternalTranslationRef(translationRef);\n    __privateMethod(this, _registerDefaults, registerDefaults_fn).call(this, internalRef);\n    return new ObservableImpl((subscriber) => {\n      let loadTicket = {};\n      const loadResource = () => {\n        loadTicket = {};\n        const ticket = loadTicket;\n        __privateGet$1(this, _loader).load(__privateGet$1(this, _language), internalRef.id).then(\n          () => {\n            if (ticket === loadTicket) {\n              const snapshot = __privateMethod(this, _createSnapshot, createSnapshot_fn).call(this, internalRef);\n              if (snapshot.ready) {\n                subscriber.next(snapshot);\n              }\n            }\n          },\n          (error) => {\n            if (ticket === loadTicket) {\n              subscriber.error(Array.isArray(error) ? error[0] : error);\n            }\n          }\n        );\n      };\n      const onChange = () => {\n        const snapshot = __privateMethod(this, _createSnapshot, createSnapshot_fn).call(this, internalRef);\n        if (snapshot.ready) {\n          subscriber.next(snapshot);\n        } else {\n          loadResource();\n        }\n      };\n      if (__privateGet$1(this, _loader).needsLoading(__privateGet$1(this, _language), internalRef.id)) {\n        loadResource();\n      }\n      __privateGet$1(this, _languageChangeListeners).add(onChange);\n      return () => {\n        __privateGet$1(this, _languageChangeListeners).delete(onChange);\n      };\n    });\n  }\n};\n_i18n = new WeakMap();\n_loader = new WeakMap();\n_language = new WeakMap();\n_registeredRefs = new WeakMap();\n_languageChangeListeners = new WeakMap();\n_changeLanguage = new WeakSet();\nchangeLanguage_fn = function(language) {\n  if (__privateGet$1(this, _language) !== language) {\n    __privateSet$1(this, _language, language);\n    __privateGet$1(this, _i18n).changeLanguage(language);\n    __privateGet$1(this, _languageChangeListeners).forEach((listener) => listener());\n  }\n};\n_createSnapshot = new WeakSet();\ncreateSnapshot_fn = function(internalRef) {\n  if (__privateGet$1(this, _loader).needsLoading(__privateGet$1(this, _language), internalRef.id)) {\n    return { ready: false };\n  }\n  const t = __privateGet$1(this, _i18n).getFixedT(\n    null,\n    internalRef.id\n  );\n  return {\n    ready: true,\n    t\n  };\n};\n_registerDefaults = new WeakSet();\nregisterDefaults_fn = function(internalRef) {\n  if (__privateGet$1(this, _registeredRefs).has(internalRef.id)) {\n    return;\n  }\n  __privateGet$1(this, _registeredRefs).add(internalRef.id);\n  const defaultMessages = internalRef.getDefaultMessages();\n  __privateGet$1(this, _i18n).addResourceBundle(\n    DEFAULT_LANGUAGE,\n    internalRef.id,\n    defaultMessages,\n    true,\n    // merge with existing translations\n    false\n    // do not overwrite translations\n  );\n  const defaultResource = internalRef.getDefaultResource();\n  if (defaultResource) {\n    __privateGet$1(this, _loader).addTranslationResource(defaultResource);\n  }\n};\nlet I18nextTranslationApi = _I18nextTranslationApi;\n\nfunction createLocalBaseUrl(fullUrl) {\n  const url = new URL(fullUrl);\n  url.protocol = document.location.protocol;\n  url.hostname = document.location.hostname;\n  url.port = document.location.port;\n  return url.toString().replace(/\\/$/, \"\");\n}\nfunction overrideBaseUrlConfigs(inputConfigs) {\n  const urlConfigReader = ConfigReader.fromConfigs(inputConfigs);\n  const appBaseUrl = urlConfigReader.getOptionalString(\"app.baseUrl\");\n  const backendBaseUrl = urlConfigReader.getOptionalString(\"backend.baseUrl\");\n  let configs = inputConfigs;\n  let newBackendBaseUrl = void 0;\n  let newAppBaseUrl = void 0;\n  if (appBaseUrl && backendBaseUrl) {\n    const appOrigin = new URL(appBaseUrl).origin;\n    const backendOrigin = new URL(backendBaseUrl).origin;\n    if (appOrigin === backendOrigin) {\n      const maybeNewBackendBaseUrl = createLocalBaseUrl(backendBaseUrl);\n      if (backendBaseUrl !== maybeNewBackendBaseUrl) {\n        newBackendBaseUrl = maybeNewBackendBaseUrl;\n      }\n    }\n  }\n  if (appBaseUrl) {\n    const maybeNewAppBaseUrl = createLocalBaseUrl(appBaseUrl);\n    if (appBaseUrl !== maybeNewAppBaseUrl) {\n      newAppBaseUrl = maybeNewAppBaseUrl;\n    }\n  }\n  if (newAppBaseUrl || newBackendBaseUrl) {\n    configs = configs.concat({\n      data: {\n        app: newAppBaseUrl && {\n          baseUrl: newAppBaseUrl\n        },\n        backend: newBackendBaseUrl && {\n          baseUrl: newBackendBaseUrl\n        }\n      },\n      context: \"relative-resolver\"\n    });\n  }\n  return configs;\n}\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _getProviderCalled;\nfunction useConfigLoader(configLoader, components, appThemeApi) {\n  var _a;\n  const hasConfig = Boolean(configLoader);\n  const config = useAsync(configLoader || (() => Promise.resolve([])));\n  let noConfigNode = void 0;\n  if (hasConfig && config.loading) {\n    const { Progress } = components;\n    noConfigNode = /* @__PURE__ */ React.createElement(Progress, null);\n  } else if (config.error) {\n    const { BootErrorPage } = components;\n    noConfigNode = /* @__PURE__ */ React.createElement(BootErrorPage, { step: \"load-config\", error: config.error });\n  }\n  const { ThemeProvider = AppThemeProvider } = components;\n  if (noConfigNode) {\n    return {\n      node: /* @__PURE__ */ React.createElement(ApiProvider, { apis: ApiRegistry.with(appThemeApiRef, appThemeApi) }, /* @__PURE__ */ React.createElement(ThemeProvider, null, noConfigNode))\n    };\n  }\n  const configReader = ConfigReader.fromConfigs(\n    ((_a = config.value) == null ? void 0 : _a.length) ? overrideBaseUrlConfigs(config.value) : []\n  );\n  return { api: configReader };\n}\nclass AppContextImpl {\n  constructor(app) {\n    this.app = app;\n  }\n  getPlugins() {\n    return this.app.getPlugins();\n  }\n  getSystemIcon(key) {\n    return this.app.getSystemIcon(key);\n  }\n  getSystemIcons() {\n    return this.app.getSystemIcons();\n  }\n  getComponents() {\n    return this.app.getComponents();\n  }\n}\nclass AppManager {\n  constructor(options) {\n    __publicField(this, \"apiHolder\");\n    __publicField(this, \"configApi\");\n    __publicField(this, \"apis\");\n    __publicField(this, \"icons\");\n    __publicField(this, \"plugins\");\n    __publicField(this, \"featureFlags\");\n    __publicField(this, \"components\");\n    __publicField(this, \"themes\");\n    __publicField(this, \"configLoader\");\n    __publicField(this, \"defaultApis\");\n    __publicField(this, \"bindRoutes\");\n    __publicField(this, \"appLanguageApi\");\n    __publicField(this, \"translationResources\");\n    __publicField(this, \"appIdentityProxy\", new AppIdentityProxy());\n    __publicField(this, \"apiFactoryRegistry\");\n    __privateAdd(this, _getProviderCalled, false);\n    var _a, _b, _c, _d, _e, _f, _g, _h, _i;\n    this.apis = (_a = options.apis) != null ? _a : [];\n    this.icons = options.icons;\n    this.plugins = new Set((_b = options.plugins) != null ? _b : []);\n    this.featureFlags = (_c = options.featureFlags) != null ? _c : [];\n    this.components = options.components;\n    this.themes = options.themes;\n    this.configLoader = (_d = options.configLoader) != null ? _d : defaultConfigLoader;\n    this.defaultApis = (_e = options.defaultApis) != null ? _e : [];\n    this.bindRoutes = options.bindRoutes;\n    this.apiFactoryRegistry = new ApiFactoryRegistry();\n    this.appLanguageApi = AppLanguageSelector.createWithStorage({\n      defaultLanguage: (_f = options.__experimentalTranslations) == null ? void 0 : _f.defaultLanguage,\n      availableLanguages: (_g = options.__experimentalTranslations) == null ? void 0 : _g.availableLanguages\n    });\n    this.translationResources = (_i = (_h = options.__experimentalTranslations) == null ? void 0 : _h.resources) != null ? _i : [];\n  }\n  getPlugins() {\n    return Array.from(this.plugins);\n  }\n  getSystemIcon(key) {\n    return this.icons[key];\n  }\n  getSystemIcons() {\n    return this.icons;\n  }\n  getComponents() {\n    return this.components;\n  }\n  createRoot(element) {\n    const AppProvider = this.getProvider();\n    const AppRoot = () => {\n      return /* @__PURE__ */ React.createElement(AppProvider, null, element);\n    };\n    return AppRoot;\n  }\n  getProvider() {\n    if (__privateGet(this, _getProviderCalled)) {\n      throw new Error(\n        \"app.getProvider() or app.createRoot() has already been called, and can only be called once\"\n      );\n    }\n    __privateSet(this, _getProviderCalled, true);\n    const appContext = new AppContextImpl(this);\n    let routesHaveBeenValidated = false;\n    const Provider = ({ children }) => {\n      const needsFeatureFlagRegistrationRef = useRef(true);\n      const appThemeApi = useMemo(\n        () => AppThemeSelector.createWithStorage(this.themes),\n        []\n      );\n      const { routing, featureFlags, routeBindings } = useMemo(() => {\n        const usesReactRouterBeta = isReactRouterBeta();\n        if (usesReactRouterBeta) {\n          console.warn(`\nDEPRECATION WARNING: React Router Beta is deprecated and support for it will be removed in a future release.\n                     Please migrate to use React Router v6 stable.\n                     See https://backstage.io/docs/tutorials/react-router-stable-migration\n`);\n        }\n        const result = traverseElementTree({\n          root: children,\n          discoverers: [childDiscoverer, routeElementDiscoverer],\n          collectors: {\n            routing: usesReactRouterBeta ? routingV1Collector : routingV2Collector,\n            collectedPlugins: pluginCollector,\n            featureFlags: featureFlagCollector\n          }\n        });\n        result.collectedPlugins.forEach((plugin) => this.plugins.add(plugin));\n        this.verifyPlugins(this.plugins);\n        this.getApiHolder();\n        return {\n          ...result,\n          routeBindings: resolveRouteBindings(this.bindRoutes)\n        };\n      }, [children]);\n      if (!routesHaveBeenValidated) {\n        routesHaveBeenValidated = true;\n        validateRouteParameters(routing.paths, routing.parents);\n        validateRouteBindings(\n          routeBindings,\n          this.plugins\n        );\n      }\n      const loadedConfig = useConfigLoader(\n        this.configLoader,\n        this.components,\n        appThemeApi\n      );\n      const hasConfigApi = \"api\" in loadedConfig;\n      if (hasConfigApi) {\n        const { api } = loadedConfig;\n        this.configApi = api;\n      }\n      if (\"node\" in loadedConfig) {\n        return loadedConfig.node;\n      }\n      if (hasConfigApi && needsFeatureFlagRegistrationRef.current) {\n        needsFeatureFlagRegistrationRef.current = false;\n        const featureFlagsApi = this.getApiHolder().get(featureFlagsApiRef);\n        if (featureFlagsApi) {\n          for (const flag of this.featureFlags) {\n            featureFlagsApi.registerFlag({\n              ...flag,\n              pluginId: \"\"\n            });\n          }\n          for (const plugin of this.plugins.values()) {\n            if (\"getFeatureFlags\" in plugin) {\n              for (const flag of plugin.getFeatureFlags()) {\n                featureFlagsApi.registerFlag({\n                  name: flag.name,\n                  pluginId: plugin.getId()\n                });\n              }\n            } else {\n              for (const output of plugin.output()) {\n                if (output.type === \"feature-flag\") {\n                  featureFlagsApi.registerFlag({\n                    name: output.name,\n                    pluginId: plugin.getId()\n                  });\n                }\n              }\n            }\n          }\n          const registeredFlags = featureFlagsApi.getRegisteredFlags();\n          const flagNames = new Set(registeredFlags.map((f) => f.name));\n          for (const name of featureFlags) {\n            if (!flagNames.has(name)) {\n              featureFlagsApi.registerFlag({ name, pluginId: \"\" });\n            }\n          }\n        }\n      }\n      const { ThemeProvider = AppThemeProvider, Progress } = this.components;\n      return /* @__PURE__ */ React.createElement(ApiProvider, { apis: this.getApiHolder() }, /* @__PURE__ */ React.createElement(AppContextProvider, { appContext }, /* @__PURE__ */ React.createElement(ThemeProvider, null, /* @__PURE__ */ React.createElement(\n        RoutingProvider,\n        {\n          routePaths: routing.paths,\n          routeParents: routing.parents,\n          routeObjects: routing.objects,\n          routeBindings,\n          basePath: getBasePath(loadedConfig.api)\n        },\n        /* @__PURE__ */ React.createElement(\n          InternalAppContext.Provider,\n          {\n            value: {\n              routeObjects: routing.objects,\n              appIdentityProxy: this.appIdentityProxy\n            }\n          },\n          /* @__PURE__ */ React.createElement(Suspense, { fallback: /* @__PURE__ */ React.createElement(Progress, null) }, children)\n        )\n      ))));\n    };\n    return Provider;\n  }\n  getRouter() {\n    return AppRouter;\n  }\n  getApiHolder() {\n    if (this.apiHolder) {\n      for (const plugin of this.plugins) {\n        for (const factory of plugin.getApis()) {\n          if (!this.apiFactoryRegistry.get(factory.api)) {\n            this.apiFactoryRegistry.register(\"default\", factory);\n          }\n        }\n      }\n      ApiResolver.validateFactories(\n        this.apiFactoryRegistry,\n        this.apiFactoryRegistry.getAllApis()\n      );\n      return this.apiHolder;\n    }\n    this.apiFactoryRegistry.register(\"static\", {\n      api: appThemeApiRef,\n      deps: {},\n      factory: () => AppThemeSelector.createWithStorage(this.themes)\n    });\n    this.apiFactoryRegistry.register(\"static\", {\n      api: configApiRef,\n      deps: {},\n      factory: () => {\n        if (!this.configApi) {\n          throw new Error(\n            \"Tried to access config API before config was loaded\"\n          );\n        }\n        return this.configApi;\n      }\n    });\n    this.apiFactoryRegistry.register(\"static\", {\n      api: identityApiRef,\n      deps: {},\n      factory: () => this.appIdentityProxy\n    });\n    this.apiFactoryRegistry.register(\"static\", {\n      api: appLanguageApiRef,\n      deps: {},\n      factory: () => this.appLanguageApi\n    });\n    this.apiFactoryRegistry.register(\"default\", {\n      api: translationApiRef,\n      deps: { languageApi: appLanguageApiRef },\n      factory: ({ languageApi }) => I18nextTranslationApi.create({\n        languageApi,\n        resources: this.translationResources\n      })\n    });\n    this.apiFactoryRegistry.register(\"default\", {\n      api: featureFlagsApiRef,\n      deps: {},\n      factory: () => new LocalStorageFeatureFlags()\n    });\n    for (const factory of this.defaultApis) {\n      this.apiFactoryRegistry.register(\"default\", factory);\n    }\n    for (const plugin of this.plugins) {\n      for (const factory of plugin.getApis()) {\n        if (!this.apiFactoryRegistry.register(\"default\", factory)) {\n          throw new Error(\n            `Plugin ${plugin.getId()} tried to register duplicate or forbidden API factory for ${factory.api}`\n          );\n        }\n      }\n    }\n    for (const factory of this.apis) {\n      if (!this.apiFactoryRegistry.register(\"app\", factory)) {\n        throw new Error(\n          `Duplicate or forbidden API factory for ${factory.api} in app`\n        );\n      }\n    }\n    ApiResolver.validateFactories(\n      this.apiFactoryRegistry,\n      this.apiFactoryRegistry.getAllApis()\n    );\n    this.apiHolder = new ApiResolver(this.apiFactoryRegistry);\n    return this.apiHolder;\n  }\n  verifyPlugins(plugins) {\n    const pluginIds = /* @__PURE__ */ new Set();\n    for (const plugin of plugins) {\n      const id = plugin.getId();\n      if (pluginIds.has(id)) {\n        throw new Error(`Duplicate plugin found '${id}'`);\n      }\n      pluginIds.add(id);\n    }\n  }\n}\n_getProviderCalled = new WeakMap();\n\nfunction createSpecializedApp(options) {\n  return new AppManager(options);\n}\n\nlet warned = false;\nconst FlatRoutes = (props) => {\n  const app = useApp();\n  const { NotFoundErrorPage } = app.getComponents();\n  const isBeta = useMemo(() => isReactRouterBeta(), []);\n  const routes = useElementFilter(\n    props.children,\n    (elements) => elements.getElements().flatMap((child) => {\n      var _a;\n      let path = child.props.path;\n      if (path === \"\") {\n        return [];\n      }\n      path = (_a = path == null ? void 0 : path.replace(/\\/\\*$/, \"\")) != null ? _a : \"/\";\n      let element = isBeta ? child : child.props.element;\n      if (!isBeta && !element) {\n        element = child;\n        if (!warned && process.env.NODE_ENV !== \"test\") {\n          console.warn(\n            \"DEPRECATION WARNING: All elements within <FlatRoutes> must be of type <Route> with an element prop. Existing usages of <Navigate key=[path] to=[to] /> should be replaced with <Route path=[path] element={<Navigate to=[to] />} />.\"\n          );\n          warned = true;\n        }\n      }\n      return [\n        {\n          // Each route matches any sub route, except for the explicit root path\n          path,\n          element,\n          children: child.props.children ? [\n            // These are the children of each route, which we all add in under a catch-all\n            // subroute in order to make them available to `useOutlet`\n            {\n              path: path === \"/\" ? \"/\" : \"*\",\n              // The root path must require an exact match\n              element: child.props.children\n            }\n          ] : void 0\n        }\n      ];\n    }).sort((a, b) => b.path.localeCompare(a.path)).map((obj) => ({ ...obj, path: obj.path === \"/\" ? \"/\" : `${obj.path}/*` }))\n  );\n  const withNotFound = [\n    ...routes,\n    {\n      path: \"*\",\n      element: /* @__PURE__ */ React.createElement(NotFoundErrorPage, null)\n    }\n  ];\n  return useRoutes(withNotFound);\n};\nattachComponentData(FlatRoutes, \"core.type\", \"FlatRoutes\");\n\nexport { AlertApiForwarder, ApiFactoryRegistry, ApiProvider, ApiResolver, AppRouter, AppThemeSelector, AtlassianAuth, BitbucketAuth, BitbucketServerAuth, ErrorAlerter, ErrorApiForwarder, FeatureFlagged, FetchMiddlewares, FlatRoutes, FrontendHostDiscovery, GithubAuth, GitlabAuth, GoogleAuth, LocalStorageFeatureFlags, MicrosoftAuth, MultipleAnalyticsApi, NoOpAnalyticsApi, OAuth2, OAuthRequestManager, OktaAuth, OneLoginAuth, SamlAuth, UnhandledErrorForwarder, UrlPatternDiscovery, VMwareCloudAuth, WebStorage, createFetchApi, createSpecializedApp, defaultConfigLoader };\n//# sourceMappingURL=index.esm.js.map\n","var baseMerge = require('./_baseMerge'),\n    createAssigner = require('./_createAssigner');\n\n/**\n * This method is like `_.merge` except that it accepts `customizer` which\n * is invoked to produce the merged values of the destination and source\n * properties. If `customizer` returns `undefined`, merging is handled by the\n * method instead. The `customizer` is invoked with six arguments:\n * (objValue, srcValue, key, object, source, stack).\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} sources The source objects.\n * @param {Function} customizer The function to customize assigned values.\n * @returns {Object} Returns `object`.\n * @example\n *\n * function customizer(objValue, srcValue) {\n *   if (_.isArray(objValue)) {\n *     return objValue.concat(srcValue);\n *   }\n * }\n *\n * var object = { 'a': [1], 'b': [2] };\n * var other = { 'a': [3], 'b': [4] };\n *\n * _.mergeWith(object, other, customizer);\n * // => { 'a': [1, 3], 'b': [2, 4] }\n */\nvar mergeWith = createAssigner(function(object, source, srcIndex, customizer) {\n  baseMerge(object, source, srcIndex, customizer);\n});\n\nmodule.exports = mergeWith;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isNavigator = exports.isBrowser = exports.off = exports.on = exports.noop = void 0;\nvar noop = function () { };\nexports.noop = noop;\nfunction on(obj) {\n    var args = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n    }\n    if (obj && obj.addEventListener) {\n        obj.addEventListener.apply(obj, args);\n    }\n}\nexports.on = on;\nfunction off(obj) {\n    var args = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n    }\n    if (obj && obj.removeEventListener) {\n        obj.removeEventListener.apply(obj, args);\n    }\n}\nexports.off = off;\nexports.isBrowser = typeof window !== 'undefined';\nexports.isNavigator = typeof navigator !== 'undefined';\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = require(\"react\");\nvar util_1 = require(\"./misc/util\");\nvar useIsomorphicLayoutEffect = util_1.isBrowser ? react_1.useLayoutEffect : react_1.useEffect;\nexports.default = useIsomorphicLayoutEffect;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar react_1 = require(\"react\");\nvar useIsomorphicLayoutEffect_1 = tslib_1.__importDefault(require(\"./useIsomorphicLayoutEffect\"));\nfunction useObservable(observable$, initialValue) {\n    var _a = react_1.useState(initialValue), value = _a[0], update = _a[1];\n    useIsomorphicLayoutEffect_1.default(function () {\n        var s = observable$.subscribe(update);\n        return function () { return s.unsubscribe(); };\n    }, [observable$]);\n    return value;\n}\nexports.default = useObservable;\n","module.exports = require('./lib/Observable.js').Observable;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Observable = void 0;\n\n// === Symbol Support ===\nconst hasSymbol = name => Boolean(Symbol[name]);\n\nconst getSymbol = name => hasSymbol(name) ? Symbol[name] : '@@' + name;\n\nconst SymbolIterator = getSymbol('iterator');\nconst SymbolObservable = getSymbol('observable');\nconst SymbolSpecies = getSymbol('species'); // === Abstract Operations ===\n\nfunction getMethod(obj, key) {\n  let value = obj[key];\n  if (value == null) return undefined;\n  if (typeof value !== 'function') throw new TypeError(value + ' is not a function');\n  return value;\n}\n\nfunction getSpecies(obj) {\n  let ctor = obj.constructor;\n\n  if (ctor !== undefined) {\n    ctor = ctor[SymbolSpecies];\n\n    if (ctor === null) {\n      ctor = undefined;\n    }\n  }\n\n  return ctor !== undefined ? ctor : Observable;\n}\n\nfunction isObservable(x) {\n  return x instanceof Observable; // SPEC: Brand check\n}\n\nfunction hostReportError(e) {\n  if (hostReportError.log) {\n    hostReportError.log(e);\n  } else {\n    setTimeout(() => {\n      throw e;\n    });\n  }\n}\n\nfunction enqueue(fn) {\n  Promise.resolve().then(() => {\n    try {\n      fn();\n    } catch (e) {\n      hostReportError(e);\n    }\n  });\n}\n\nfunction cleanupSubscription(subscription) {\n  let cleanup = subscription._cleanup;\n  if (cleanup === undefined) return;\n  subscription._cleanup = undefined;\n\n  if (!cleanup) {\n    return;\n  }\n\n  try {\n    if (typeof cleanup === 'function') {\n      cleanup();\n    } else {\n      let unsubscribe = getMethod(cleanup, 'unsubscribe');\n\n      if (unsubscribe) {\n        unsubscribe.call(cleanup);\n      }\n    }\n  } catch (e) {\n    hostReportError(e);\n  }\n}\n\nfunction closeSubscription(subscription) {\n  subscription._observer = undefined;\n  subscription._queue = undefined;\n  subscription._state = 'closed';\n}\n\nfunction flushSubscription(subscription) {\n  let queue = subscription._queue;\n\n  if (!queue) {\n    return;\n  }\n\n  subscription._queue = undefined;\n  subscription._state = 'ready';\n\n  for (let i = 0; i < queue.length; ++i) {\n    notifySubscription(subscription, queue[i].type, queue[i].value);\n    if (subscription._state === 'closed') break;\n  }\n}\n\nfunction notifySubscription(subscription, type, value) {\n  subscription._state = 'running';\n  let observer = subscription._observer;\n\n  try {\n    let m = getMethod(observer, type);\n\n    switch (type) {\n      case 'next':\n        if (m) m.call(observer, value);\n        break;\n\n      case 'error':\n        closeSubscription(subscription);\n        if (m) m.call(observer, value);else throw value;\n        break;\n\n      case 'complete':\n        closeSubscription(subscription);\n        if (m) m.call(observer);\n        break;\n    }\n  } catch (e) {\n    hostReportError(e);\n  }\n\n  if (subscription._state === 'closed') cleanupSubscription(subscription);else if (subscription._state === 'running') subscription._state = 'ready';\n}\n\nfunction onNotify(subscription, type, value) {\n  if (subscription._state === 'closed') return;\n\n  if (subscription._state === 'buffering') {\n    subscription._queue.push({\n      type,\n      value\n    });\n\n    return;\n  }\n\n  if (subscription._state !== 'ready') {\n    subscription._state = 'buffering';\n    subscription._queue = [{\n      type,\n      value\n    }];\n    enqueue(() => flushSubscription(subscription));\n    return;\n  }\n\n  notifySubscription(subscription, type, value);\n}\n\nclass Subscription {\n  constructor(observer, subscriber) {\n    // ASSERT: observer is an object\n    // ASSERT: subscriber is callable\n    this._cleanup = undefined;\n    this._observer = observer;\n    this._queue = undefined;\n    this._state = 'initializing';\n    let self = this;\n    let subscriptionObserver = {\n      get closed() {\n        return self._state === 'closed';\n      },\n\n      next(value) {\n        onNotify(self, 'next', value);\n      },\n\n      error(value) {\n        onNotify(self, 'error', value);\n      },\n\n      complete() {\n        onNotify(self, 'complete');\n      }\n\n    };\n\n    try {\n      this._cleanup = subscriber.call(undefined, subscriptionObserver);\n    } catch (e) {\n      subscriptionObserver.error(e);\n    }\n\n    if (this._state === 'initializing') this._state = 'ready';\n  }\n\n  get closed() {\n    return this._state === 'closed';\n  }\n\n  unsubscribe() {\n    if (this._state !== 'closed') {\n      closeSubscription(this);\n      cleanupSubscription(this);\n    }\n  }\n\n}\n\nclass Observable {\n  constructor(subscriber) {\n    if (!(this instanceof Observable)) throw new TypeError('Observable cannot be called as a function');\n    if (typeof subscriber !== 'function') throw new TypeError('Observable initializer must be a function');\n    this._subscriber = subscriber;\n  }\n\n  subscribe(observer) {\n    if (typeof observer !== 'object' || observer === null) {\n      observer = {\n        next: observer,\n        error: arguments[1],\n        complete: arguments[2]\n      };\n    }\n\n    return new Subscription(observer, this._subscriber);\n  }\n\n  forEach(fn) {\n    return new Promise((resolve, reject) => {\n      if (typeof fn !== 'function') {\n        reject(new TypeError(fn + ' is not a function'));\n        return;\n      }\n\n      function done() {\n        subscription.unsubscribe();\n        resolve();\n      }\n\n      let subscription = this.subscribe({\n        next(value) {\n          try {\n            fn(value, done);\n          } catch (e) {\n            reject(e);\n            subscription.unsubscribe();\n          }\n        },\n\n        error: reject,\n        complete: resolve\n      });\n    });\n  }\n\n  map(fn) {\n    if (typeof fn !== 'function') throw new TypeError(fn + ' is not a function');\n    let C = getSpecies(this);\n    return new C(observer => this.subscribe({\n      next(value) {\n        try {\n          value = fn(value);\n        } catch (e) {\n          return observer.error(e);\n        }\n\n        observer.next(value);\n      },\n\n      error(e) {\n        observer.error(e);\n      },\n\n      complete() {\n        observer.complete();\n      }\n\n    }));\n  }\n\n  filter(fn) {\n    if (typeof fn !== 'function') throw new TypeError(fn + ' is not a function');\n    let C = getSpecies(this);\n    return new C(observer => this.subscribe({\n      next(value) {\n        try {\n          if (!fn(value)) return;\n        } catch (e) {\n          return observer.error(e);\n        }\n\n        observer.next(value);\n      },\n\n      error(e) {\n        observer.error(e);\n      },\n\n      complete() {\n        observer.complete();\n      }\n\n    }));\n  }\n\n  reduce(fn) {\n    if (typeof fn !== 'function') throw new TypeError(fn + ' is not a function');\n    let C = getSpecies(this);\n    let hasSeed = arguments.length > 1;\n    let hasValue = false;\n    let seed = arguments[1];\n    let acc = seed;\n    return new C(observer => this.subscribe({\n      next(value) {\n        let first = !hasValue;\n        hasValue = true;\n\n        if (!first || hasSeed) {\n          try {\n            acc = fn(acc, value);\n          } catch (e) {\n            return observer.error(e);\n          }\n        } else {\n          acc = value;\n        }\n      },\n\n      error(e) {\n        observer.error(e);\n      },\n\n      complete() {\n        if (!hasValue && !hasSeed) return observer.error(new TypeError('Cannot reduce an empty sequence'));\n        observer.next(acc);\n        observer.complete();\n      }\n\n    }));\n  }\n\n  async all() {\n    let values = [];\n    await this.forEach(value => values.push(value));\n    return values;\n  }\n\n  concat(...sources) {\n    let C = getSpecies(this);\n    return new C(observer => {\n      let subscription;\n      let index = 0;\n\n      function startNext(next) {\n        subscription = next.subscribe({\n          next(v) {\n            observer.next(v);\n          },\n\n          error(e) {\n            observer.error(e);\n          },\n\n          complete() {\n            if (index === sources.length) {\n              subscription = undefined;\n              observer.complete();\n            } else {\n              startNext(C.from(sources[index++]));\n            }\n          }\n\n        });\n      }\n\n      startNext(this);\n      return () => {\n        if (subscription) {\n          subscription.unsubscribe();\n          subscription = undefined;\n        }\n      };\n    });\n  }\n\n  flatMap(fn) {\n    if (typeof fn !== 'function') throw new TypeError(fn + ' is not a function');\n    let C = getSpecies(this);\n    return new C(observer => {\n      let subscriptions = [];\n      let outer = this.subscribe({\n        next(value) {\n          if (fn) {\n            try {\n              value = fn(value);\n            } catch (e) {\n              return observer.error(e);\n            }\n          }\n\n          let inner = C.from(value).subscribe({\n            next(value) {\n              observer.next(value);\n            },\n\n            error(e) {\n              observer.error(e);\n            },\n\n            complete() {\n              let i = subscriptions.indexOf(inner);\n              if (i >= 0) subscriptions.splice(i, 1);\n              completeIfDone();\n            }\n\n          });\n          subscriptions.push(inner);\n        },\n\n        error(e) {\n          observer.error(e);\n        },\n\n        complete() {\n          completeIfDone();\n        }\n\n      });\n\n      function completeIfDone() {\n        if (outer.closed && subscriptions.length === 0) observer.complete();\n      }\n\n      return () => {\n        subscriptions.forEach(s => s.unsubscribe());\n        outer.unsubscribe();\n      };\n    });\n  }\n\n  [SymbolObservable]() {\n    return this;\n  }\n\n  static from(x) {\n    let C = typeof this === 'function' ? this : Observable;\n    if (x == null) throw new TypeError(x + ' is not an object');\n    let method = getMethod(x, SymbolObservable);\n\n    if (method) {\n      let observable = method.call(x);\n      if (Object(observable) !== observable) throw new TypeError(observable + ' is not an object');\n      if (isObservable(observable) && observable.constructor === C) return observable;\n      return new C(observer => observable.subscribe(observer));\n    }\n\n    if (hasSymbol('iterator')) {\n      method = getMethod(x, SymbolIterator);\n\n      if (method) {\n        return new C(observer => {\n          enqueue(() => {\n            if (observer.closed) return;\n\n            for (let item of method.call(x)) {\n              observer.next(item);\n              if (observer.closed) return;\n            }\n\n            observer.complete();\n          });\n        });\n      }\n    }\n\n    if (Array.isArray(x)) {\n      return new C(observer => {\n        enqueue(() => {\n          if (observer.closed) return;\n\n          for (let i = 0; i < x.length; ++i) {\n            observer.next(x[i]);\n            if (observer.closed) return;\n          }\n\n          observer.complete();\n        });\n      });\n    }\n\n    throw new TypeError(x + ' is not observable');\n  }\n\n  static of(...items) {\n    let C = typeof this === 'function' ? this : Observable;\n    return new C(observer => {\n      enqueue(() => {\n        if (observer.closed) return;\n\n        for (let i = 0; i < items.length; ++i) {\n          observer.next(items[i]);\n          if (observer.closed) return;\n        }\n\n        observer.complete();\n      });\n    });\n  }\n\n  static get [SymbolSpecies]() {\n    return this;\n  }\n\n}\n\nexports.Observable = Observable;\nObject.defineProperty(Observable, Symbol('extensions'), {\n  value: {\n    symbol: SymbolObservable,\n    hostReportError\n  },\n  configurable: true\n});"],"names":["__defProp","Object","defineProperty","__publicField","obj","key","value","enumerable","configurable","writable","__defNormalProp","CONFIG_KEY_PART_PATTERN","isObject","Array","isArray","typeOf","type","isNaN","errors","context","typeName","expected","ConfigReader","constructor","data","fallback","prefix","this","Set","fromConfigs","configs","length","reduce","previousReader","filteredKeys","deprecatedKeys","reader","description","console","warn","has","_a","_b","readValue","keys","localKeys","fallbackKeys","get","getOptional","Error","fullKey","fallbackValue","into","from","getConfig","getOptionalConfig","fallbackConfig","copy","TypeError","getConfigArray","getOptionalConfigArray","readConfigValue","values","index","entries","map","getNumber","getOptionalNumber","val","number","Number","isFinite","getBoolean","getOptionalBoolean","valueString","String","trim","test","getString","getOptionalString","getStringArray","getOptionalStringArray","validate","result","keyName","theValue","parts","split","part","badKey","slice","join","WeakMap","translationApiRef","createApiRef","id","appLanguageApiRef","ownKeys$6","object","enumerableOnly","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread$6","target","i","arguments","source","forEach","getOwnPropertyDescriptors","defineProperties","consoleLogger","log","args","output","error","baseLogger","Logger","concreteLogger","options","undefined","init","logger","debug","bool","_len","_key","forward","_len2","_key2","_len3","_key3","_len4","_key4","lvl","debugOnly","concat","moduleName","EventEmitter","observers","events","listener","_this","event","l","observer","defer","res","rej","promise","Promise","resolve","reject","makeString","getLastOfPath","path","Empty","cleanKey","indexOf","replace","canNotTraverseDeeper","stack","shift","prototype","hasOwnProperty","call","k","setPath","newValue","_getLastOfPath","getPath","_getLastOfPath3","deepExtend","overwrite","prop","regexEscape","str","_entityMap","s","isIE10","window","navigator","userAgentData","userAgent","chars","deepFind","keySeparator","paths","current","j","p","mix","endsWith","joinedPath","ownKeys$5","_objectSpread$5","ResourceStore","_EventEmitter","Derived","hasNativeReflectConstruct","_super","Reflect","construct","sham","Proxy","Boolean","valueOf","e","_isNativeReflectConstruct$3","Super","NewTarget","ns","defaultNS","ignoreJSONStructure","splice","lng","silent","addNamespaces","emit","resources","m","toString","addResource","deep","pack","hasResourceBundle","removeNamespaces","getResource","compatibilityAPI","getDataByLanguage","find","v","postProcessor","processors","addPostProcessor","module","name","handle","translator","processor","process","ownKeys$4","_objectSpread$4","checkedLoadedFor","Translator","_isNativeReflectConstruct$2","services","t","create","language","interpolation","resolved","nsSeparator","namespaces","wouldCheckForNsInKey","seemsNaturalLanguage","userDefinedKeySeparator","userDefinedNsSeparator","possibleChars","c","r","RegExp","matched","ki","substring","looksLikeObjectPath","match","interpolator","nestingRegexp","lastKey","_this2","overloadTranslationOptionHandler","returnDetails","_this$extractFromKey","extractFromKey","namespace","appendNamespaceToCIMode","toLowerCase","usedKey","exactUsedKey","usedLng","usedNS","resUsedKey","resExactUsedKey","resType","joinArrays","handleAsObjectInI18nFormat","i18nFormat","handleAsObject","returnObjects","returnedObjectHandler","resTypeIsArray","newKeyToUse","deepKey","translate","extendTranslation","usedDefault","needsPluralHandling","count","hasDefaultValue","defaultValueSuffix","pluralResolver","getSuffix","defaultValue","isValidLookup","resForMissing","missingKeyNoValueFallbackToKey","updateMissing","fk","lngs","fallbackLngs","languageUtils","getFallbackCodes","fallbackLng","saveMissingTo","toResolveHierarchy","send","specificDefaultValue","defaultForMissing","missingKeyHandler","backendConnector","saveMissing","saveMissingPlurals","getSuffixes","suffix","appendNamespaceToMissingKey","parseMissingKeyHandler","_this3","parse","defaultVariables","skipInterpolation","nestBef","skipOnVariables","nb","interpolate","na","nest","reset","postProcess","postProcessorNames","applyPostProcessor","postProcessPassResolved","i18nResolved","found","_this4","extracted","fallbackNS","needsZeroSuffixLookup","ordinal","shouldUseIntlApi","needsContextHandling","codes","utils","hasLoadedNamespace","code","possibleKey","finalKeys","addLookupKeys","pluralSuffix","zeroSuffix","pluralSeparator","contextKey","contextSeparator","pop","returnNull","returnEmptyString","resourceStore","option","capitalize","string","charAt","toUpperCase","LanguageUtil","supportedLngs","formatLanguageCode","specialCases","lowerCaseLng","cleanCode","load","nonExplicitSupportedLngs","getLanguagePartFromCode","cleanedLng","isSupportedCode","lngOnly","supportedLng","fallbacks","getScriptPartFromCode","fallbackCode","fallbackCodes","addCode","fc","sets","nr","_rulesPluralsTypes","n","deprecatedJsonVersions","suffixesOrder","zero","one","two","few","many","other","PluralResolver","rules","compatibilityJSON","Intl","PluralRules","set","numbers","plurals","_unused","rule","getRule","resolvedOptions","pluralCategories","sort","pluralCategory1","pluralCategory2","pluralCategory","prepend","select","getSuffixRetroCompatible","idx","noAbs","Math","abs","simplifyPluralSuffix","returnSuffix","includes","ownKeys$3","_objectSpread$3","deepFindWithDefaults","defaultData","getPathWithDefaults","Interpolator","format","escapeValue","iOpts","escape","useRawValueToEscape","prefixEscaped","suffixEscaped","formatSeparator","unescapePrefix","unescapeSuffix","nestingPrefix","nestingPrefixEscaped","nestingSuffix","nestingSuffixEscaped","nestingOptionsSeparator","maxReplaces","alwaysFormat","resetRegExp","regexpStr","regexp","regexpUnescapeStr","regexpUnescape","nestingRegexpStr","replaces","regexSafe","handleFormat","interpolationkey","f","missingInterpolationHandler","regex","safeValue","todo","exec","matchedVar","temp","lastIndex","clonedOptions","handleHasOptions","inheritedOptions","sep","optionsString","matchedSingleQuotes","matchedDoubleQuotes","JSON","formatters","doReduce","elem","ownKeys$2","_objectSpread$2","createCachedFormatter","fn","cache","stringify","formatter","Formatter","formats","opt","NumberFormat","currency","style","datetime","DateTimeFormat","relativetime","RelativeTimeFormat","range","list","ListFormat","_format","mem","_parseFormatStr","formatStr","formatName","formatOptions","optStr","_opt$split","_opt$split2","parseInt","parseFormatStr","formatted","valOptions","formatParams","locale","ownKeys$1","_objectSpread$1","Connector","_isNativeReflectConstruct$1","backend","store","waitingReads","maxParallelReads","readingCalls","maxRetries","retryTimeout","state","queue","languages","callback","toLoad","pending","toLoadLanguages","toLoadNamespaces","hasAllNamespaces","reload","pendingCount","loaded","err","addResourceBundle","q","_getLastOfPath2","removePending","done","loadedKeys","fcName","tried","wait","resolver","next","read","setTimeout","bind","then","queueLoad","loadOne","prepareLoading","_this5","isUpdate","clb","opts","initImmediate","preload","partialBundledLanguages","ret","tDescription","transformOptions","ownKeys","_objectSpread","noop","I18n","_isNativeReflectConstruct","inst","modules","external","getOwnPropertyNames","getPrototypeOf","isInitialized","isClone","defOpts","createClassOnDemand","ClassOrObject","lu","on","languageDetector","detection","_this2$store","_this2$store2","deferred","finish","initializedStoreOnce","changeLanguage","usedCallback","append","resolvedLanguage","setResolvedLanguage","li","lngInLngs","hasLanguageSomeTranslations","isLanguageChangingTo","setLngProps","setLng","getBestMatchFromCodes","cacheUserLanguage","loadResources","async","detect","keyPrefix","fixedT","rest","resultKey","_this$translator","_this$translator2","exists","_this6","lastLng","loadNotPending","loadState","precheck","preResult","_this7","preloaded","newLngs","_this8","mergedOptions","clone","instance","createInstance","__defProp$l","dir","reloadResources","use","getFixedT","setDefaultNamespace","loadNamespaces","loadLanguages","ApiAggregator","holders","__defNormalProp$l","apiRef","holder","api","ApiContext","createVersionedContext","ApiProvider","props","apis","children","parentHolder","useContext","atVersion","Provider","createVersionedValueMap","propTypes","isRequired","__defProp$k","ApiResolver","factories","__defNormalProp$k","Map","validateFactories","heap","allDeps","factory","dep","deps","add","ref","loading","impl","loadDeps","dependent","impls","__defProp$j","ScopePriority","ScopePriority2","ApiFactoryRegistry","__defNormalProp$j","register","scope","priority","existing","tuple","getAllApis","refs","showLoginPopup","width","height","left","screen","top","popup","open","url","targetOrigin","closed","messageListener","origin","authResult","message","response","intervalId","setInterval","errMessage","location","removeEventListener","clearInterval","addEventListener","__defProp$i","__publicField$i","__defNormalProp$i","warned$1","defaultJoinScopes","scopes","DefaultAuthConnector","configApi","discoveryApi","environment","provider","joinScopes","oauthRequestApi","sessionTransform","popupOptions","enableExperimentalRedirectFlow","authRequester","createAuthRequester","onAuthRequest","executeRedirect","showPopup","joinScopesFunc","createSession","instantPopup","refreshSession","fetch","buildUrl","optional","headers","credentials","catch","ok","statusText","status","authInfo","json","removeSession","method","_c","_d","_e","_f","_g","_h","popupUrl","flow","size","fullscreen","payload","title","URL","href","redirectUrl","query","baseUrl","getBaseUrl","queryString","buildQueryString","env","encodeURIComponent","__defProp$h","__publicField$h","__defNormalProp$h","DirectAuthConnector","profile","email","hasScopes$1","searched","searchFor","SessionScopeHelper","sessionExistsAndHasScope","session","sessionScopes","getExtendedScope","newScope","defaultScopes","__defProp$g","__publicField$g","__defNormalProp$g","PublishSubject","subscriber","isClosed","terminatingError","complete","subscribers","delete","Symbol","observable","subscribe","onNext","onError","onComplete","BehaviorSubject","currentValue","__defProp$f","__publicField$f","__defNormalProp$f","SessionStateTracker","SessionState","SignedOut","setIsSignedIn","isSignedIn","signedIn","subject","SignedIn","sessionState$","__defProp$e","__publicField$e","__defNormalProp$e","RefreshingAuthSessionManager","connector","sessionShouldRefresh","sessionScopesFunc","sessionShouldRefreshFunc","helper","getSession","currentSession","refreshedSession","collapsedSessionRefresh","currentScopes","newSession","stateTracker","refreshPromise","__defProp$d","__publicField$d","__defNormalProp$d","StaticAuthSessionManager","setSession","__defProp$c","__publicField$c","__defNormalProp$c","AuthSessionStore","manager","storageKey","schema","saveSession","loadSession","localStorage","removeItem","sessionJson","getItem","__type","__value","setItem","__defProp$b","__publicField$b","__defNormalProp$b","DEFAULT_PROVIDER$b","icon","OAuth2","sessionManager","scopeTransform","x","backstageIdentity","providerInfo","idToken","accessToken","normalizeScopes","expiresAt","expiresInSeconds","Date","now","expInSec","token","identity","min","Infinity","getTime","signIn","getAccessToken","signOut","normalizedScopes","getIdToken","getBackstageIdentity","getProfile","scopeList","DEFAULT_PROVIDER$a","GithubAuth","DEFAULT_PROVIDER$9","GitlabAuth","DEFAULT_PROVIDER$8","SCOPE_PREFIX$1","GoogleAuth","startsWith","DEFAULT_PROVIDER$7","OKTA_OIDC_SCOPES","OKTA_SCOPE_PREFIX","OktaAuth","samlSessionSchema","z","displayName","picture","literal","userEntityRef","ownershipEntityRefs","array","DEFAULT_PROVIDER$6","SamlAuth","authSessionStore","__defProp$a","__publicField$a","__defNormalProp$a","DEFAULT_PROVIDER$5","_MicrosoftAuth","oauth2","MicrosoftGraphID","microsoftGraph","resourceForScopes","audiences","resourceForScope","aud","audience","groups","resourceURI","MicrosoftAuth","DEFAULT_PROVIDER$4","OIDC_SCOPES","SCOPE_PREFIX","OneLoginAuth","DEFAULT_PROVIDER$3","BitbucketAuth","DEFAULT_PROVIDER$2","BitbucketServerAuth","DEFAULT_PROVIDER$1","AtlassianAuth","DEFAULT_PROVIDER","VMwareCloudAuth","__defProp$9","AlertApiForwarder","__defNormalProp$9","post","alert","alert$","MultipleAnalyticsApi","actualApis","fromApis","captureEvent","analyticsApi","NoOpAnalyticsApi","_event","__defProp$8","__publicField$8","__defNormalProp$8","STORAGE_KEY$1","AppThemeSelector","themes","createWithStorage","selector","initialThemeId","setActiveThemeId","activeThemeId$","themeId","_a2","getInstalledThemes","getActiveThemeId","activeThemeId","ERROR_PREFIX","UrlPatternDiscovery","compile","pattern","urlStr","hash","search","pluginId","FrontendHostDiscovery","endpoints","defaultEndpoint","fromConfig","config","pathPattern","flatMap","discovery","endpoint","ErrorAlerter","alertApi","errorApi","hidden","severity","error$","__defProp$7","ErrorApiForwarder","__defNormalProp$7","UnhandledErrorForwarder","errorContext","reason","__defProp$6","__publicField$6","__defNormalProp$6","validateFlagName","LocalStorageFeatureFlags","registerFlag","flag","registeredFeatureFlags","getRegisteredFlags","isActive","flags","FeatureFlagState","Active","save","merge","clear","states","enabled","fromEntries","jsonStr","createFetchApi","baseImplementation","g","middleware","flat","reverse","IdentityAuthInjectorFetchMiddleware","identityApi","allowUrl","headerName","headerValue","matcher","urlPrefixAllowlist","buildPrefixMatcher","buildMatcher","header","input","request","Request","getCredentials","prefixes","trimmedPrefixes","some","PluginProtocolResolverFetchMiddleware","hostname","pathname","username","password","base","authority","protocol","host","right","a","FetchMiddlewares","resolvePluginProtocol","injectIdentityAuth","__defProp$5","__publicField$5","__defNormalProp$5","OAuthPendingRequests","getCurrentPending","requests","hasScopes","acc","moreScopess","moreScopes","__defProp$4","__publicField$4","__defNormalProp$4","OAuthRequestManager","handler","handlerCount","scopeRequest","newRequests","currentRequests","makeAuthRequest","trigger","authRequest$","__defProp$3","__publicField$3","__defNormalProp$3","buckets","_WebStorage","addStorageEventListener","bucketPath","webStorage","handleStorageChange","snapshot","presence","item","getKeyName","freeze","forBucket","notifyChanges","remove","observe$","hasSubscribed","messageKey","eventKey","trimmedKey","decodeURIComponent","subscription","WebStorage","InternalAppContext","createContext","isReactRouterBeta","createRoutesFromChildren","Route","element","TrackNavigation","attributes","analytics","useAnalytics","useEffect","RouteTracker","routeObjects","useLocation","params","routes","matches","matchRoutes","routeMatch","route","routeRefs","routeObject","routeRef","plugin","plugins","extension","getId","_routeNodeType","getExtensionContext","AnalyticsContext","readBasePath","SignInPageWrapper","component","Component","appIdentityProxy","setIdentityApi","useState","basePath","useApi","configApiRef","setTarget","signOutTargetUrl","onSignInSuccess","AppRouter","Router","RouterComponent","SignInPage","SignInPageComponent","useApp","getComponents","mountPath","internalAppContext","Routes","basename","getUserId","getProfileInfo","createCollector","accumulatorFactory","visit","accumulator","childDiscoverer","routeElementDiscoverer","attachComponentData","pluginCollector","node","getComponentData","FeatureFlagged","featureFlagApi","featureFlagsApiRef","isEnabled","with","without","MATCH_ALL_ROUTE","caseSensitive","stringifyNode","anyNode","pluginSet","collectSubTree","Children","isValidElement","routingV2Collector","parents","objects","parent","ctx","isElementAncestor","pathProp","mountPoint","parentChildren","elementProp","newObj","gatherPath","gatherRouteRef","others","mountPointPlugin","routingV1Collector","currentObj","currentParentRouteRef","sticky","currentCtxPath","routePath","featureFlagCollector","routeRefType","getOrCreateGlobalSingleton","isRouteRef","isSubRouteRef","joinPaths","normalized","RouteResolver","routePaths","routeParents","routeBindings","appBasePath","anyRouteRef","sourceLocation","targetRef","targetPath","subRoutePath","resolvedRoute","resolvedPath","resolveTargetRef","relativeSourceLocation","trimPath","refDiffList","matchIndex","targetSearchRef","findIndex","unshift","resolveBasePath","encodedParams","replaceAll","generatePath","RoutingContext","RoutingProvider","versionedValue","AppContext","AppContextProvider","appContext","__defProp$2","__publicField$2","__defNormalProp$2","mkError","thing","logDeprecation","AppIdentityProxy","waitForTarget","resolveTarget","targetOptions","useShouldPreferDarkTheme","mediaQuery","useMemo","matchMedia","shouldPreferDark","setPrefersDark","addListener","removeListener","AppThemeProvider","appThemeApi","appThemeApiRef","appTheme","selectedTheme","theme","darkTheme","variant","resolveTheme","useObservable","defaultConfigLoader","runtimeConfigJson","appConfig","toLocaleUpperCase","windowAppConfig","__APP_CONFIG__","defaultConfigLoaderSync","__defProp$1","ApiRegistryBuilder","__defNormalProp$1","build","ApiRegistry","builder","resolveRouteBindings","bindRoutes","externalRoutes","targetRoutes","externalRoute","_languages","_language$1","_subject","__accessCheck$2","member","msg","__privateGet$2","getter","__privateAdd$2","WeakSet","__privateSet$2","setter","STORAGE_KEY","DEFAULT_LANGUAGE","AppLanguageSelector","_AppLanguageSelector","initialLanguage","availableLanguages","defaultLanguage","storedLanguage","getAvailableLanguages","setLanguage","language$","getLanguage","toInternalTranslationRef","$$type","version","_loaded","_loading","_loaders","_getLoaderKey","getLoaderKey_fn","_i18n","_loader","_language","_registeredRefs","_languageChangeListeners","_changeLanguage","changeLanguage_fn","_createSnapshot","createSnapshot_fn","_registerDefaults","registerDefaults_fn","__accessCheck$1","__privateGet$1","__privateAdd$1","__privateSet$1","__privateMethod","removeNulls","messages","ResourceLoader","onLoad","addTranslationResource","resource","internalResource","toInternalTranslationResource","entry","loader","needsLoading","internalRef","ready","defaultMessages","getDefaultMessages","defaultResource","getDefaultResource","I18nextTranslationApi","_I18nextTranslationApi","i18n","languageApi","getTranslation","translationRef","translation$","loadTicket","loadResource","ticket","onChange","createLocalBaseUrl","fullUrl","document","port","_getProviderCalled","AppContextImpl","app","getPlugins","getSystemIcon","getSystemIcons","AppManager","_i","icons","featureFlags","components","configLoader","defaultApis","apiFactoryRegistry","appLanguageApi","__experimentalTranslations","translationResources","createRoot","AppProvider","getProvider","routesHaveBeenValidated","needsFeatureFlagRegistrationRef","useRef","routing","usesReactRouterBeta","collectors","toArray","root","contexts","nextContexts","collector","discoverer","discoverers","traverseElementTree","collectedPlugins","verifyPlugins","getApiHolder","notLeafRoutes","currentRouteRef","fullPath","validateRouteParameters","externalRouteRef","validateRouteBindings","loadedConfig","hasConfig","useAsync","noConfigNode","Progress","BootErrorPage","step","ThemeProvider","inputConfigs","urlConfigReader","appBaseUrl","backendBaseUrl","newBackendBaseUrl","newAppBaseUrl","maybeNewBackendBaseUrl","maybeNewAppBaseUrl","overrideBaseUrlConfigs","useConfigLoader","hasConfigApi","featureFlagsApi","getFeatureFlags","registeredFlags","flagNames","Suspense","getRouter","apiHolder","getApis","identityApiRef","pluginIds","createSpecializedApp","warned","FlatRoutes","NotFoundErrorPage","isBeta","withNotFound","useElementFilter","elements","getElements","child","b","localeCompare","useRoutes","baseMerge","mergeWith","createAssigner","srcIndex","customizer","exports","isNavigator","isBrowser","off","react_1","useIsomorphicLayoutEffect","useLayoutEffect","tslib_1","useIsomorphicLayoutEffect_1","__importDefault","observable$","initialValue","update","default","unsubscribe","Observable","hasSymbol","getSymbol","SymbolIterator","SymbolObservable","SymbolSpecies","getMethod","getSpecies","ctor","hostReportError","enqueue","cleanupSubscription","cleanup","_cleanup","closeSubscription","_observer","_queue","_state","notifySubscription","onNotify","flushSubscription","Subscription","self","subscriptionObserver","_subscriber","C","hasSeed","hasValue","first","all","sources","startNext","subscriptions","outer","inner","completeIfDone","isObservable","of","items","symbol"],"sourceRoot":""}