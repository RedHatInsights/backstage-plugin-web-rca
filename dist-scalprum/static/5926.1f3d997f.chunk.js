(self.webpackChunkplugin_web_rca=self.webpackChunkplugin_web_rca||[]).push([[5926],{75926:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AlertApiForwarder:()=>rr,ApiFactoryRegistry:()=>We,ApiProvider:()=>qe,ApiResolver:()=>Ve,AppRouter:()=>Br,AppThemeSelector:()=>cr,AtlassianAuth:()=>Qt,BitbucketAuth:()=>Gt,BitbucketServerAuth:()=>Yt,ConfigReader:()=>O,ErrorAlerter:()=>hr,ErrorApiForwarder:()=>dr,FeatureFlagged:()=>Hr,FetchMiddlewares:()=>Or,FlatRoutes:()=>fo,FrontendHostDiscovery:()=>pr,GithubAuth:()=>Rt,GitlabAuth:()=>Et,GoogleAuth:()=>It,LocalStorageFeatureFlags:()=>br,MicrosoftAuth:()=>Bt,MultipleAnalyticsApi:()=>nr,NoOpAnalyticsApi:()=>or,OAuth2:()=>kt,OAuthRequestManager:()=>Ir,OktaAuth:()=>Tt,OneLoginAuth:()=>Wt,SamlAuth:()=>Mt,UnhandledErrorForwarder:()=>gr,UrlPatternDiscovery:()=>ur,VMwareCloudAuth:()=>er,WebStorage:()=>Fr,createFetchApi:()=>wr,createSpecializedApp:()=>po,defaultConfigLoader:()=>yn});var n=r(28437),o=r.n(n),i=r(5556),s=r.n(i),a=r(15427),c=r(16064),l=r.n(c),u=r(22097),p=r(14476),h=r(88055),f=r.n(h),d=r(6924),g=r.n(d),v=Object.defineProperty,m=(e,t,r)=>(((e,t,r)=>{t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);const y=/^[a-z][a-z0-9]*(?:[-_][a-z][a-z0-9]*)*$/i;function b(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function w(e){if(null===e)return"null";if(Array.isArray(e))return"array";const t=typeof e;return"number"===t&&isNaN(e)?"nan":"string"===t&&""===e?"empty-string":t}const S=(e,t,r,n)=>`Invalid type in config for key '${e}' in '${t}', got ${r}, wanted ${n}`,A=e=>`Missing required config value at '${e}'`,k=(e,t,r)=>`Unable to convert config value for key '${e}' in '${t}' to a ${r}`;class O{constructor(e,t="mock-config",r,n=""){this.data=e,this.context=t,this.fallback=r,this.prefix=n,m(this,"filteredKeys"),m(this,"notifiedFilteredKeys",new Set)}static fromConfigs(e){return 0===e.length?new O(void 0):e.reduce(((e,{data:t,context:r,filteredKeys:n,deprecatedKeys:o})=>{const i=new O(t,r,e);if(i.filteredKeys=n,o)for(const{key:e,description:t}of o)console.warn(`The configuration key '${e}' of ${r} is deprecated and may be removed soon. ${t||""}`);return i}),void 0)}has(e){var t,r;return void 0!==this.readValue(e)||null!=(r=null==(t=this.fallback)?void 0:t.has(e))&&r}keys(){var e,t;const r=this.data?Object.keys(this.data):[],n=null!=(t=null==(e=this.fallback)?void 0:e.keys())?t:[];return[...new Set([...r,...n])]}get(e){const t=this.getOptional(e);if(void 0===t)throw new Error(A(this.fullKey(null!=e?e:"")));return t}getOptional(e){var t;const r=f()(this.readValue(e)),n=null==(t=this.fallback)?void 0:t.getOptional(e);return void 0===r?n:void 0===n?r:g()({},{value:n},{value:r},((e,t)=>b(t)&&b(e)?void 0:t)).value}getConfig(e){const t=this.getOptionalConfig(e);if(void 0===t)throw new Error(A(this.fullKey(e)));return t}getOptionalConfig(e){var t;const r=this.readValue(e),n=null==(t=this.fallback)?void 0:t.getOptionalConfig(e);if(b(r))return this.copy(r,e,n);if(void 0!==r)throw new TypeError(S(this.fullKey(e),this.context,w(r),"object"));return n}getConfigArray(e){const t=this.getOptionalConfigArray(e);if(void 0===t)throw new Error(A(this.fullKey(e)));return t}getOptionalConfigArray(e){const t=this.readConfigValue(e,(t=>{if(!Array.isArray(t))return{expected:"object-array"};for(const[r,n]of t.entries())if(!b(n))return{expected:"object-array",value:n,key:`${e}[${r}]`};return!0}));if(t)return t.map(((t,r)=>this.copy(t,`${e}[${r}]`)))}getNumber(e){const t=this.getOptionalNumber(e);if(void 0===t)throw new Error(A(this.fullKey(e)));return t}getOptionalNumber(e){const t=this.readConfigValue(e,(e=>"number"==typeof e||"string"==typeof e||{expected:"number"}));if("number"==typeof t||void 0===t)return t;const r=Number(t);if(!Number.isFinite(r))throw new Error(k(this.fullKey(e),this.context,"number"));return r}getBoolean(e){const t=this.getOptionalBoolean(e);if(void 0===t)throw new Error(A(this.fullKey(e)));return t}getOptionalBoolean(e){const t=this.readConfigValue(e,(e=>"boolean"==typeof e||"number"==typeof e||"string"==typeof e||{expected:"boolean"}));if("boolean"==typeof t||void 0===t)return t;const r=String(t).trim();if(/^(?:y|yes|true|1|on)$/i.test(r))return!0;if(/^(?:n|no|false|0|off)$/i.test(r))return!1;throw new Error(k(this.fullKey(e),this.context,"boolean"))}getString(e){const t=this.getOptionalString(e);if(void 0===t)throw new Error(A(this.fullKey(e)));return t}getOptionalString(e){return this.readConfigValue(e,(e=>"string"==typeof e&&""!==e||{expected:"string"}))}getStringArray(e){const t=this.getOptionalStringArray(e);if(void 0===t)throw new Error(A(this.fullKey(e)));return t}getOptionalStringArray(e){return this.readConfigValue(e,(t=>{if(!Array.isArray(t))return{expected:"string-array"};for(const[r,n]of t.entries())if("string"!=typeof n||""===n)return{expected:"string-array",value:n,key:`${e}[${r}]`};return!0}))}fullKey(e){return`${this.prefix}${this.prefix?".":""}${e}`}copy(e,t,r){const n=new O(e,this.context,r,this.fullKey(t));return n.filteredKeys=this.filteredKeys,n}readConfigValue(e,t){var r;const n=this.readValue(e);if(void 0===n)return null==(r=this.fallback)?void 0:r.readConfigValue(e,t);const o=t(n);if(!0!==o){const{key:t=e,value:r=n,expected:i}=o;throw new TypeError(S(this.fullKey(t),this.context,w(r),i))}return n}readValue(e){const t=e?e.split("."):[];for(const r of t)if(!y.test(r))throw new TypeError(`Invalid config key '${e}'`);if(void 0===this.data)return;let r=this.data;for(const[e,n]of t.entries())if(b(r))r=r[n];else if(void 0!==r){const n=this.fullKey(t.slice(0,e).join("."));throw new TypeError(S(n,this.context,w(r),"object"))}return r}}var R=r(49634),x=r(24705);Object.defineProperty,new WeakMap,new WeakMap,new WeakMap;const E=(0,u.createApiRef)({id:"core.translation"}),P=(0,u.createApiRef)({id:"core.applanguage"});var j=r(73916),I=r.n(j),C=r(39080),L=r(82284),$=r(23029),T=r(92901),F=r(9417),N=r(85501),M=r(56822),D=r(53954),U=r(64467),_=r(87695);function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){(0,U.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var V={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){console&&console[e]&&console[e].apply(console,t)}},K=new(function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,$.A)(this,e),this.init(t,r)}return(0,T.A)(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||V,this.options=t,this.debug=t.debug}},{key:"setDebug",value:function(e){this.debug=e}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"log","",!0)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"warn","",!0)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"error","")}},{key:"deprecate",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(e,t,r,n){return n&&!this.debug?null:("string"==typeof e[0]&&(e[0]="".concat(r).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}},{key:"create",value:function(t){return new e(this.logger,B(B({},{prefix:"".concat(this.prefix,":").concat(t,":")}),this.options))}},{key:"clone",value:function(t){return(t=t||this.options).prefix=t.prefix||this.prefix,new e(this.logger,t)}}]),e}()),z=function(){function e(){(0,$.A)(this,e),this.observers={}}return(0,T.A)(e,[{key:"on",value:function(e,t){var r=this;return e.split(" ").forEach((function(e){r.observers[e]=r.observers[e]||[],r.observers[e].push(t)})),this}},{key:"off",value:function(e,t){this.observers[e]&&(t?this.observers[e]=this.observers[e].filter((function(e){return e!==t})):delete this.observers[e])}},{key:"emit",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];this.observers[e]&&[].concat(this.observers[e]).forEach((function(e){e.apply(void 0,r)})),this.observers["*"]&&[].concat(this.observers["*"]).forEach((function(t){t.apply(t,[e].concat(r))}))}}]),e}();function W(){var e,t,r=new Promise((function(r,n){e=r,t=n}));return r.resolve=e,r.reject=t,r}function H(e){return null==e?"":""+e}function G(e,t,r){function n(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function o(){return!e||"string"==typeof e}for(var i="string"!=typeof t?[].concat(t):t.split(".");i.length>1;){if(o())return{};var s=n(i.shift());!e[s]&&r&&(e[s]=new r),e=Object.prototype.hasOwnProperty.call(e,s)?e[s]:{}}return o()?{}:{obj:e,k:n(i.shift())}}function J(e,t,r){var n=G(e,t,Object);n.obj[n.k]=r}function Y(e,t){var r=G(e,t),n=r.obj,o=r.k;if(n)return n[o]}function X(e,t,r){for(var n in t)"__proto__"!==n&&"constructor"!==n&&(n in e?"string"==typeof e[n]||e[n]instanceof String||"string"==typeof t[n]||t[n]instanceof String?r&&(e[n]=t[n]):X(e[n],t[n],r):e[n]=t[n]);return e}function Q(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var Z={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function ee(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,(function(e){return Z[e]})):e}var te="undefined"!=typeof window&&window.navigator&&void 0===window.navigator.userAgentData&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,re=[" ",",","?","!",";"];function ne(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(e){if(e[t])return e[t];for(var n=t.split(r),o=e,i=0;i<n.length;++i){if(!o)return;if("string"==typeof o[n[i]]&&i+1<n.length)return;if(void 0===o[n[i]]){for(var s=2,a=n.slice(i,i+s).join(r),c=o[a];void 0===c&&n.length>i+s;)s++,c=o[a=n.slice(i,i+s).join(r)];if(void 0===c)return;if(null===c)return null;if(t.endsWith(a)){if("string"==typeof c)return c;if(a&&"string"==typeof c[a])return c[a]}var l=n.slice(i+s).join(r);return l?ne(c,l,r):void 0}o=o[n[i]]}return o}}function oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(r),!0).forEach((function(t){(0,U.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var se=function(e){(0,N.A)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,D.A)(t);if(r){var o=(0,D.A)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,M.A)(this,e)});function o(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return(0,$.A)(this,o),t=n.call(this),te&&z.call((0,F.A)(t)),t.data=e||{},t.options=r,void 0===t.options.keySeparator&&(t.options.keySeparator="."),void 0===t.options.ignoreJSONStructure&&(t.options.ignoreJSONStructure=!0),t}return(0,T.A)(o,[{key:"addNamespaces",value:function(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}},{key:"removeNamespaces",value:function(e){var t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}},{key:"getResource",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator,i=void 0!==n.ignoreJSONStructure?n.ignoreJSONStructure:this.options.ignoreJSONStructure,s=[e,t];r&&"string"!=typeof r&&(s=s.concat(r)),r&&"string"==typeof r&&(s=s.concat(o?r.split(o):r)),e.indexOf(".")>-1&&(s=e.split("."));var a=Y(this.data,s);return a||!i||"string"!=typeof r?a:ne(this.data&&this.data[e]&&this.data[e][t],r,o)}},{key:"addResource",value:function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},i=void 0!==o.keySeparator?o.keySeparator:this.options.keySeparator,s=[e,t];r&&(s=s.concat(i?r.split(i):r)),e.indexOf(".")>-1&&(n=t,t=(s=e.split("."))[1]),this.addNamespaces(t),J(this.data,s,n),o.silent||this.emit("added",e,t,r,n)}},{key:"addResources",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var o in r)"string"!=typeof r[o]&&"[object Array]"!==Object.prototype.toString.apply(r[o])||this.addResource(e,t,o,r[o],{silent:!0});n.silent||this.emit("added",e,t,r)}},{key:"addResourceBundle",value:function(e,t,r,n,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},s=[e,t];e.indexOf(".")>-1&&(n=r,r=t,t=(s=e.split("."))[1]),this.addNamespaces(t);var a=Y(this.data,s)||{};n?X(a,r,o):a=ie(ie({},a),r),J(this.data,s,a),i.silent||this.emit("added",e,t,r)}},{key:"removeResourceBundle",value:function(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}},{key:"hasResourceBundle",value:function(e,t){return void 0!==this.getResource(e,t)}},{key:"getResourceBundle",value:function(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?ie(ie({},{}),this.getResource(e,t)):this.getResource(e,t)}},{key:"getDataByLanguage",value:function(e){return this.data[e]}},{key:"hasLanguageSomeTranslations",value:function(e){var t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find((function(e){return t[e]&&Object.keys(t[e]).length>0}))}},{key:"toJSON",value:function(){return this.data}}]),o}(z),ae={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,r,n,o){var i=this;return e.forEach((function(e){i.processors[e]&&(t=i.processors[e].process(t,r,n,o))})),t}};function ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(r),!0).forEach((function(t){(0,U.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ue={},pe=function(e){(0,N.A)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,D.A)(t);if(r){var o=(0,D.A)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,M.A)(this,e)});function o(e){var t,r,i,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,$.A)(this,o),t=n.call(this),te&&z.call((0,F.A)(t)),r=e,i=(0,F.A)(t),["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"].forEach((function(e){r[e]&&(i[e]=r[e])})),t.options=s,void 0===t.options.keySeparator&&(t.options.keySeparator="."),t.logger=K.create("translator"),t}return(0,T.A)(o,[{key:"changeLanguage",value:function(e){e&&(this.language=e)}},{key:"exists",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(null==e)return!1;var r=this.resolve(e,t);return r&&void 0!==r.res}},{key:"extractFromKey",value:function(e,t){var r=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===r&&(r=":");var n=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,o=t.ns||this.options.defaultNS||[],i=r&&e.indexOf(r)>-1,s=!(this.options.userDefinedKeySeparator||t.keySeparator||this.options.userDefinedNsSeparator||t.nsSeparator||function(e,t,r){t=t||"",r=r||"";var n=re.filter((function(e){return t.indexOf(e)<0&&r.indexOf(e)<0}));if(0===n.length)return!0;var o=new RegExp("(".concat(n.map((function(e){return"?"===e?"\\?":e})).join("|"),")")),i=!o.test(e);if(!i){var s=e.indexOf(r);s>0&&!o.test(e.substring(0,s))&&(i=!0)}return i}(e,r,n));if(i&&!s){var a=e.match(this.interpolator.nestingRegexp);if(a&&a.length>0)return{key:e,namespaces:o};var c=e.split(r);(r!==n||r===n&&this.options.ns.indexOf(c[0])>-1)&&(o=c.shift()),e=c.join(n)}return"string"==typeof o&&(o=[o]),{key:e,namespaces:o}}},{key:"translate",value:function(e,t,r){var n=this;if("object"!==(0,L.A)(t)&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),"object"===(0,L.A)(t)&&(t=le({},t)),t||(t={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);var i=void 0!==t.returnDetails?t.returnDetails:this.options.returnDetails,s=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,a=this.extractFromKey(e[e.length-1],t),c=a.key,l=a.namespaces,u=l[l.length-1],p=t.lng||this.language,h=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(p&&"cimode"===p.toLowerCase()){if(h){var f=t.nsSeparator||this.options.nsSeparator;return i?{res:"".concat(u).concat(f).concat(c),usedKey:c,exactUsedKey:c,usedLng:p,usedNS:u}:"".concat(u).concat(f).concat(c)}return i?{res:c,usedKey:c,exactUsedKey:c,usedLng:p,usedNS:u}:c}var d=this.resolve(e,t),g=d&&d.res,v=d&&d.usedKey||c,m=d&&d.exactUsedKey||c,y=Object.prototype.toString.apply(g),b=void 0!==t.joinArrays?t.joinArrays:this.options.joinArrays,w=!this.i18nFormat||this.i18nFormat.handleAsObject;if(w&&g&&"string"!=typeof g&&"boolean"!=typeof g&&"number"!=typeof g&&["[object Number]","[object Function]","[object RegExp]"].indexOf(y)<0&&("string"!=typeof b||"[object Array]"!==y)){if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var S=this.options.returnedObjectHandler?this.options.returnedObjectHandler(v,g,le(le({},t),{},{ns:l})):"key '".concat(c," (").concat(this.language,")' returned an object instead of string.");return i?(d.res=S,d):S}if(s){var A="[object Array]"===y,k=A?[]:{},O=A?m:v;for(var R in g)if(Object.prototype.hasOwnProperty.call(g,R)){var x="".concat(O).concat(s).concat(R);k[R]=this.translate(x,le(le({},t),{joinArrays:!1,ns:l})),k[R]===x&&(k[R]=g[R])}g=k}}else if(w&&"string"==typeof b&&"[object Array]"===y)(g=g.join(b))&&(g=this.extendTranslation(g,e,t,r));else{var E=!1,P=!1,j=void 0!==t.count&&"string"!=typeof t.count,I=o.hasDefaultValue(t),C=j?this.pluralResolver.getSuffix(p,t.count,t):"",$=t["defaultValue".concat(C)]||t.defaultValue;!this.isValidLookup(g)&&I&&(E=!0,g=$),this.isValidLookup(g)||(P=!0,g=c);var T=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&P?void 0:g,F=I&&$!==g&&this.options.updateMissing;if(P||E||F){if(this.logger.log(F?"updateKey":"missingKey",p,u,c,F?$:g),s){var N=this.resolve(c,le(le({},t),{},{keySeparator:!1}));N&&N.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var M=[],D=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if("fallback"===this.options.saveMissingTo&&D&&D[0])for(var U=0;U<D.length;U++)M.push(D[U]);else"all"===this.options.saveMissingTo?M=this.languageUtils.toResolveHierarchy(t.lng||this.language):M.push(t.lng||this.language);var _=function(e,r,o){var i=I&&o!==g?o:T;n.options.missingKeyHandler?n.options.missingKeyHandler(e,u,r,i,F,t):n.backendConnector&&n.backendConnector.saveMissing&&n.backendConnector.saveMissing(e,u,r,i,F,t),n.emit("missingKey",e,u,r,g)};this.options.saveMissing&&(this.options.saveMissingPlurals&&j?M.forEach((function(e){n.pluralResolver.getSuffixes(e,t).forEach((function(r){_([e],c+r,t["defaultValue".concat(r)]||$)}))})):_(M,c,$))}g=this.extendTranslation(g,e,t,d,r),P&&g===c&&this.options.appendNamespaceToMissingKey&&(g="".concat(u,":").concat(c)),(P||E)&&this.options.parseMissingKeyHandler&&(g="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(u,":").concat(c):c,E?g:void 0):this.options.parseMissingKeyHandler(g))}return i?(d.res=g,d):g}},{key:"extendTranslation",value:function(e,t,r,n,o){var i=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,le(le({},this.options.interpolation.defaultVariables),r),n.usedLng,n.usedNS,n.usedKey,{resolved:n});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init(le(le({},r),{interpolation:le(le({},this.options.interpolation),r.interpolation)}));var s,a="string"==typeof e&&(r&&r.interpolation&&void 0!==r.interpolation.skipOnVariables?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);if(a){var c=e.match(this.interpolator.nestingRegexp);s=c&&c.length}var l=r.replace&&"string"!=typeof r.replace?r.replace:r;if(this.options.interpolation.defaultVariables&&(l=le(le({},this.options.interpolation.defaultVariables),l)),e=this.interpolator.interpolate(e,l,r.lng||this.language,r),a){var u=e.match(this.interpolator.nestingRegexp);s<(u&&u.length)&&(r.nest=!1)}!r.lng&&"v1"!==this.options.compatibilityAPI&&n&&n.res&&(r.lng=n.usedLng),!1!==r.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return o&&o[0]===n[0]&&!r.context?(i.logger.warn("It seems you are nesting recursively key: ".concat(n[0]," in key: ").concat(t[0])),null):i.translate.apply(i,n.concat([t]))}),r)),r.interpolation&&this.interpolator.reset()}var p=r.postProcess||this.options.postProcess,h="string"==typeof p?[p]:p;return null!=e&&h&&h.length&&!1!==r.applyPostProcessor&&(e=ae.handle(h,e,t,this.options&&this.options.postProcessPassResolved?le({i18nResolved:n},r):r,this)),e}},{key:"resolve",value:function(e){var t,r,n,o,i,s=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e&&(e=[e]),e.forEach((function(e){if(!s.isValidLookup(t)){var c=s.extractFromKey(e,a),l=c.key;r=l;var u=c.namespaces;s.options.fallbackNS&&(u=u.concat(s.options.fallbackNS));var p=void 0!==a.count&&"string"!=typeof a.count,h=p&&!a.ordinal&&0===a.count&&s.pluralResolver.shouldUseIntlApi(),f=void 0!==a.context&&("string"==typeof a.context||"number"==typeof a.context)&&""!==a.context,d=a.lngs?a.lngs:s.languageUtils.toResolveHierarchy(a.lng||s.language,a.fallbackLng);u.forEach((function(e){s.isValidLookup(t)||(i=e,!ue["".concat(d[0],"-").concat(e)]&&s.utils&&s.utils.hasLoadedNamespace&&!s.utils.hasLoadedNamespace(i)&&(ue["".concat(d[0],"-").concat(e)]=!0,s.logger.warn('key "'.concat(r,'" for languages "').concat(d.join(", "),'" won\'t get resolved as namespace "').concat(i,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),d.forEach((function(r){if(!s.isValidLookup(t)){o=r;var i,c=[l];if(s.i18nFormat&&s.i18nFormat.addLookupKeys)s.i18nFormat.addLookupKeys(c,l,r,e,a);else{var u;p&&(u=s.pluralResolver.getSuffix(r,a.count,a));var d="".concat(s.options.pluralSeparator,"zero");if(p&&(c.push(l+u),h&&c.push(l+d)),f){var g="".concat(l).concat(s.options.contextSeparator).concat(a.context);c.push(g),p&&(c.push(g+u),h&&c.push(g+d))}}for(;i=c.pop();)s.isValidLookup(t)||(n=i,t=s.getResource(r,e,i,a))}})))}))}})),{res:t,usedKey:r,exactUsedKey:n,usedLng:o,usedNS:i}}},{key:"isValidLookup",value:function(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}},{key:"getResource",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,r,n):this.resourceStore.getResource(e,t,r,n)}}],[{key:"hasDefaultValue",value:function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&"defaultValue"===t.substring(0,12)&&void 0!==e[t])return!0;return!1}}]),o}(z);function he(e){return e.charAt(0).toUpperCase()+e.slice(1)}var fe=function(){function e(t){(0,$.A)(this,e),this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=K.create("languageUtils")}return(0,T.A)(e,[{key:"getScriptPartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return null;var t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}},{key:"getLanguagePartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return e;var t=e.split("-");return this.formatLanguageCode(t[0])}},{key:"formatLanguageCode",value:function(e){if("string"==typeof e&&e.indexOf("-")>-1){var t=["hans","hant","latn","cyrl","cans","mong","arab"],r=e.split("-");return this.options.lowerCaseLng?r=r.map((function(e){return e.toLowerCase()})):2===r.length?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),t.indexOf(r[1].toLowerCase())>-1&&(r[1]=he(r[1].toLowerCase()))):3===r.length&&(r[0]=r[0].toLowerCase(),2===r[1].length&&(r[1]=r[1].toUpperCase()),"sgn"!==r[0]&&2===r[2].length&&(r[2]=r[2].toUpperCase()),t.indexOf(r[1].toLowerCase())>-1&&(r[1]=he(r[1].toLowerCase())),t.indexOf(r[2].toLowerCase())>-1&&(r[2]=he(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}},{key:"isSupportedCode",value:function(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}},{key:"getBestMatchFromCodes",value:function(e){var t,r=this;return e?(e.forEach((function(e){if(!t){var n=r.formatLanguageCode(e);r.options.supportedLngs&&!r.isSupportedCode(n)||(t=n)}})),!t&&this.options.supportedLngs&&e.forEach((function(e){if(!t){var n=r.getLanguagePartFromCode(e);if(r.isSupportedCode(n))return t=n;t=r.options.supportedLngs.find((function(e){return e===n?e:e.indexOf("-")<0&&n.indexOf("-")<0?void 0:0===e.indexOf(n)?e:void 0}))}})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t):null}},{key:"getFallbackCodes",value:function(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),"string"==typeof e&&(e=[e]),"[object Array]"===Object.prototype.toString.apply(e))return e;if(!t)return e.default||[];var r=e[t];return r||(r=e[this.getScriptPartFromCode(t)]),r||(r=e[this.formatLanguageCode(t)]),r||(r=e[this.getLanguagePartFromCode(t)]),r||(r=e.default),r||[]}},{key:"toResolveHierarchy",value:function(e,t){var r=this,n=this.getFallbackCodes(t||this.options.fallbackLng||[],e),o=[],i=function(e){e&&(r.isSupportedCode(e)?o.push(e):r.logger.warn("rejecting language code not found in supportedLngs: ".concat(e)))};return"string"==typeof e&&e.indexOf("-")>-1?("languageOnly"!==this.options.load&&i(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&i(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&i(this.getLanguagePartFromCode(e))):"string"==typeof e&&i(this.formatLanguageCode(e)),n.forEach((function(e){o.indexOf(e)<0&&i(r.formatLanguageCode(e))})),o}}]),e}(),de=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],ge={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&e<=4?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0==e||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)}},ve=["v1","v2","v3"],me={zero:0,one:1,two:2,few:3,many:4,other:5},ye=function(){function e(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,$.A)(this,e),this.languageUtils=t,this.options=n,this.logger=K.create("pluralResolver"),this.options.compatibilityJSON&&"v4"!==this.options.compatibilityJSON||"undefined"!=typeof Intl&&Intl.PluralRules||(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=(r={},de.forEach((function(e){e.lngs.forEach((function(t){r[t]={numbers:e.nr,plurals:ge[e.fc]}}))})),r)}return(0,T.A)(e,[{key:"addRule",value:function(e,t){this.rules[e]=t}},{key:"getRule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(e,{type:t.ordinal?"ordinal":"cardinal"})}catch(e){return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}},{key:"needsPlural",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.getRule(e,t);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(e,r).map((function(e){return"".concat(t).concat(e)}))}},{key:"getSuffixes",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getRule(e,r);return n?this.shouldUseIntlApi()?n.resolvedOptions().pluralCategories.sort((function(e,t){return me[e]-me[t]})).map((function(e){return"".concat(t.options.prepend).concat(e)})):n.numbers.map((function(n){return t.getSuffix(e,n,r)})):[]}},{key:"getSuffix",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=this.getRule(e,r);return n?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(n.select(t)):this.getSuffixRetroCompatible(n,t):(this.logger.warn("no plural rule found for: ".concat(e)),"")}},{key:"getSuffixRetroCompatible",value:function(e,t){var r=this,n=e.noAbs?e.plurals(t):e.plurals(Math.abs(t)),o=e.numbers[n];this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]&&(2===o?o="plural":1===o&&(o=""));var i=function(){return r.options.prepend&&o.toString()?r.options.prepend+o.toString():o.toString()};return"v1"===this.options.compatibilityJSON?1===o?"":"number"==typeof o?"_plural_".concat(o.toString()):i():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]?i():this.options.prepend&&n.toString()?this.options.prepend+n.toString():n.toString()}},{key:"shouldUseIntlApi",value:function(){return!ve.includes(this.options.compatibilityJSON)}}]),e}();function be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function we(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?be(Object(r),!0).forEach((function(t){(0,U.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):be(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Se(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=function(e,t,r){var n=Y(e,r);return void 0!==n?n:Y(t,r)}(e,t,r);return!i&&o&&"string"==typeof r&&void 0===(i=ne(e,r,n))&&(i=ne(t,r,n)),i}var Ae=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,$.A)(this,e),this.logger=K.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(e){return e},this.init(t)}return(0,T.A)(e,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});var t=e.interpolation;this.escape=void 0!==t.escape?t.escape:ee,this.escapeValue=void 0===t.escapeValue||t.escapeValue,this.useRawValueToEscape=void 0!==t.useRawValueToEscape&&t.useRawValueToEscape,this.prefix=t.prefix?Q(t.prefix):t.prefixEscaped||"{{",this.suffix=t.suffix?Q(t.suffix):t.suffixEscaped||"}}",this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||",",this.unescapePrefix=t.unescapeSuffix?"":t.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":t.unescapeSuffix||"",this.nestingPrefix=t.nestingPrefix?Q(t.nestingPrefix):t.nestingPrefixEscaped||Q("$t("),this.nestingSuffix=t.nestingSuffix?Q(t.nestingSuffix):t.nestingSuffixEscaped||Q(")"),this.nestingOptionsSeparator=t.nestingOptionsSeparator?t.nestingOptionsSeparator:t.nestingOptionsSeparator||",",this.maxReplaces=t.maxReplaces?t.maxReplaces:1e3,this.alwaysFormat=void 0!==t.alwaysFormat&&t.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var e="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(e,"g");var t="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(t,"g");var r="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(r,"g")}},{key:"interpolate",value:function(e,t,r,n){var o,i,s,a=this,c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function l(e){return e.replace(/\$/g,"$$$$")}var u=function(e){if(e.indexOf(a.formatSeparator)<0){var o=Se(t,c,e,a.options.keySeparator,a.options.ignoreJSONStructure);return a.alwaysFormat?a.format(o,void 0,r,we(we(we({},n),t),{},{interpolationkey:e})):o}var i=e.split(a.formatSeparator),s=i.shift().trim(),l=i.join(a.formatSeparator).trim();return a.format(Se(t,c,s,a.options.keySeparator,a.options.ignoreJSONStructure),l,r,we(we(we({},n),t),{},{interpolationkey:s}))};this.resetRegExp();var p=n&&n.missingInterpolationHandler||this.options.missingInterpolationHandler,h=n&&n.interpolation&&void 0!==n.interpolation.skipOnVariables?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:function(e){return l(e)}},{regex:this.regexp,safeValue:function(e){return a.escapeValue?l(a.escape(e)):l(e)}}].forEach((function(t){for(s=0;o=t.regex.exec(e);){var r=o[1].trim();if(void 0===(i=u(r)))if("function"==typeof p){var c=p(e,o,n);i="string"==typeof c?c:""}else if(n&&Object.prototype.hasOwnProperty.call(n,r))i="";else{if(h){i=o[0];continue}a.logger.warn("missed to pass in variable ".concat(r," for interpolating ").concat(e)),i=""}else"string"==typeof i||a.useRawValueToEscape||(i=H(i));var l=t.safeValue(i);if(e=e.replace(o[0],l),h?(t.regex.lastIndex+=i.length,t.regex.lastIndex-=o[0].length):t.regex.lastIndex=0,++s>=a.maxReplaces)break}})),e}},{key:"nest",value:function(e,t){var r,n,o,i=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};function a(e,t){var r=this.nestingOptionsSeparator;if(e.indexOf(r)<0)return e;var n=e.split(new RegExp("".concat(r,"[ ]*{"))),i="{".concat(n[1]);e=n[0];var s=(i=this.interpolate(i,o)).match(/'/g),a=i.match(/"/g);(s&&s.length%2==0&&!a||a.length%2!=0)&&(i=i.replace(/'/g,'"'));try{o=JSON.parse(i),t&&(o=we(we({},t),o))}catch(t){return this.logger.warn("failed parsing options string in nesting for key ".concat(e),t),"".concat(e).concat(r).concat(i)}return delete o.defaultValue,e}for(;r=this.nestingRegexp.exec(e);){var c=[];(o=(o=we({},s)).replace&&"string"!=typeof o.replace?o.replace:o).applyPostProcessor=!1,delete o.defaultValue;var l=!1;if(-1!==r[0].indexOf(this.formatSeparator)&&!/{.*}/.test(r[1])){var u=r[1].split(this.formatSeparator).map((function(e){return e.trim()}));r[1]=u.shift(),c=u,l=!0}if((n=t(a.call(this,r[1].trim(),o),o))&&r[0]===e&&"string"!=typeof n)return n;"string"!=typeof n&&(n=H(n)),n||(this.logger.warn("missed to resolve ".concat(r[1]," for nesting ").concat(e)),n=""),l&&(n=c.reduce((function(e,t){return i.format(e,t,s.lng,we(we({},s),{},{interpolationkey:r[1].trim()}))}),n.trim())),e=e.replace(r[0],n),this.regexp.lastIndex=0}return e}}]),e}();function ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(r),!0).forEach((function(t){(0,U.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ke(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Re(e){var t={};return function(r,n,o){var i=n+JSON.stringify(o),s=t[i];return s||(s=e(n,o),t[i]=s),s(r)}}var xe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,$.A)(this,e),this.logger=K.create("formatter"),this.options=t,this.formats={number:Re((function(e,t){var r=new Intl.NumberFormat(e,Oe({},t));return function(e){return r.format(e)}})),currency:Re((function(e,t){var r=new Intl.NumberFormat(e,Oe(Oe({},t),{},{style:"currency"}));return function(e){return r.format(e)}})),datetime:Re((function(e,t){var r=new Intl.DateTimeFormat(e,Oe({},t));return function(e){return r.format(e)}})),relativetime:Re((function(e,t){var r=new Intl.RelativeTimeFormat(e,Oe({},t));return function(e){return r.format(e,t.range||"day")}})),list:Re((function(e,t){var r=new Intl.ListFormat(e,Oe({},t));return function(e){return r.format(e)}}))},this.init(t)}return(0,T.A)(e,[{key:"init",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||","}},{key:"add",value:function(e,t){this.formats[e.toLowerCase().trim()]=t}},{key:"addCached",value:function(e,t){this.formats[e.toLowerCase().trim()]=Re(t)}},{key:"format",value:function(e,t,r){var n=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return t.split(this.formatSeparator).reduce((function(e,t){var i=function(e){var t=e.toLowerCase().trim(),r={};if(e.indexOf("(")>-1){var n=e.split("(");t=n[0].toLowerCase().trim();var o=n[1].substring(0,n[1].length-1);"currency"===t&&o.indexOf(":")<0?r.currency||(r.currency=o.trim()):"relativetime"===t&&o.indexOf(":")<0?r.range||(r.range=o.trim()):o.split(";").forEach((function(e){if(e){var t=e.split(":"),n=(0,_.A)(t),o=n[0],i=n.slice(1).join(":").trim().replace(/^'+|'+$/g,"");r[o.trim()]||(r[o.trim()]=i),"false"===i&&(r[o.trim()]=!1),"true"===i&&(r[o.trim()]=!0),isNaN(i)||(r[o.trim()]=parseInt(i,10))}}))}return{formatName:t,formatOptions:r}}(t),s=i.formatName,a=i.formatOptions;if(n.formats[s]){var c=e;try{var l=o&&o.formatParams&&o.formatParams[o.interpolationkey]||{},u=l.locale||l.lng||o.locale||o.lng||r;c=n.formats[s](e,u,Oe(Oe(Oe({},a),o),l))}catch(e){n.logger.warn(e)}return c}return n.logger.warn("there was no format function for ".concat(s)),e}),e)}}]),e}();function Ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(r),!0).forEach((function(t){(0,U.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var je=function(e){(0,N.A)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,D.A)(t);if(r){var o=(0,D.A)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,M.A)(this,e)});function o(e,t,r){var i,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return(0,$.A)(this,o),i=n.call(this),te&&z.call((0,F.A)(i)),i.backend=e,i.store=t,i.services=r,i.languageUtils=r.languageUtils,i.options=s,i.logger=K.create("backendConnector"),i.waitingReads=[],i.maxParallelReads=s.maxParallelReads||10,i.readingCalls=0,i.maxRetries=s.maxRetries>=0?s.maxRetries:5,i.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,i.state={},i.queue=[],i.backend&&i.backend.init&&i.backend.init(r,s.backend,s),i}return(0,T.A)(o,[{key:"queueLoad",value:function(e,t,r,n){var o=this,i={},s={},a={},c={};return e.forEach((function(e){var n=!0;t.forEach((function(t){var a="".concat(e,"|").concat(t);!r.reload&&o.store.hasResourceBundle(e,t)?o.state[a]=2:o.state[a]<0||(1===o.state[a]?void 0===s[a]&&(s[a]=!0):(o.state[a]=1,n=!1,void 0===s[a]&&(s[a]=!0),void 0===i[a]&&(i[a]=!0),void 0===c[t]&&(c[t]=!0)))})),n||(a[e]=!0)})),(Object.keys(i).length||Object.keys(s).length)&&this.queue.push({pending:s,pendingCount:Object.keys(s).length,loaded:{},errors:[],callback:n}),{toLoad:Object.keys(i),pending:Object.keys(s),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(c)}}},{key:"loaded",value:function(e,t,r){var n=e.split("|"),o=n[0],i=n[1];t&&this.emit("failedLoading",o,i,t),r&&this.store.addResourceBundle(o,i,r),this.state[e]=t?-1:2;var s={};this.queue.forEach((function(r){var n,a,c,l,u;n=r.loaded,a=i,(l=(c=G(n,[o],Object)).obj)[u=c.k]=l[u]||[],l[u].push(a),function(e,t){void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)}(r,e),t&&r.errors.push(t),0!==r.pendingCount||r.done||(Object.keys(r.loaded).forEach((function(e){s[e]||(s[e]={});var t=r.loaded[e];t.length&&t.forEach((function(t){void 0===s[e][t]&&(s[e][t]=!0)}))})),r.done=!0,r.errors.length?r.callback(r.errors):r.callback())})),this.emit("loaded",s),this.queue=this.queue.filter((function(e){return!e.done}))}},{key:"read",value:function(e,t,r){var n=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,s=arguments.length>5?arguments[5]:void 0;if(!e.length)return s(null,{});if(this.readingCalls>=this.maxParallelReads)this.waitingReads.push({lng:e,ns:t,fcName:r,tried:o,wait:i,callback:s});else{this.readingCalls++;var a=function(a,c){if(n.readingCalls--,n.waitingReads.length>0){var l=n.waitingReads.shift();n.read(l.lng,l.ns,l.fcName,l.tried,l.wait,l.callback)}a&&c&&o<n.maxRetries?setTimeout((function(){n.read.call(n,e,t,r,o+1,2*i,s)}),i):s(a,c)},c=this.backend[r].bind(this.backend);if(2!==c.length)return c(e,t,a);try{var l=c(e,t);l&&"function"==typeof l.then?l.then((function(e){return a(null,e)})).catch(a):a(null,l)}catch(e){a(e)}}}},{key:"prepareLoading",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),o&&o();"string"==typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"==typeof t&&(t=[t]);var i=this.queueLoad(e,t,n,o);if(!i.toLoad.length)return i.pending.length||o(),null;i.toLoad.forEach((function(e){r.loadOne(e)}))}},{key:"load",value:function(e,t,r){this.prepareLoading(e,t,{},r)}},{key:"reload",value:function(e,t,r){this.prepareLoading(e,t,{reload:!0},r)}},{key:"loadOne",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e.split("|"),o=n[0],i=n[1];this.read(o,i,"read",void 0,void 0,(function(n,s){n&&t.logger.warn("".concat(r,"loading namespace ").concat(i," for language ").concat(o," failed"),n),!n&&s&&t.logger.log("".concat(r,"loaded namespace ").concat(i," for language ").concat(o),s),t.loaded(e,n,s)}))}},{key:"saveMissing",value:function(e,t,r,n,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:function(){};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t))this.logger.warn('did not save key "'.concat(r,'" as the namespace "').concat(t,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");else if(null!=r&&""!==r){if(this.backend&&this.backend.create){var a=Pe(Pe({},i),{},{isUpdate:o}),c=this.backend.create.bind(this.backend);if(c.length<6)try{var l;(l=5===c.length?c(e,t,r,n,a):c(e,t,r,n))&&"function"==typeof l.then?l.then((function(e){return s(null,e)})).catch(s):s(null,l)}catch(e){s(e)}else c(e,t,r,n,s,a)}e&&e[0]&&this.store.addResource(e[0],t,r,n)}}}]),o}(z);function Ie(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if("object"===(0,L.A)(e[1])&&(t=e[1]),"string"==typeof e[1]&&(t.defaultValue=e[1]),"string"==typeof e[2]&&(t.tDescription=e[2]),"object"===(0,L.A)(e[2])||"object"===(0,L.A)(e[3])){var r=e[3]||e[2];Object.keys(r).forEach((function(e){t[e]=r[e]}))}return t},interpolation:{escapeValue:!0,format:function(e,t,r,n){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function Ce(e){return"string"==typeof e.ns&&(e.ns=[e.ns]),"string"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function Le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $e(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(r),!0).forEach((function(t){(0,U.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Te(){}var Fe=function(e){(0,N.A)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,D.A)(t);if(r){var o=(0,D.A)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,M.A)(this,e)});function o(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;if((0,$.A)(this,o),e=n.call(this),te&&z.call((0,F.A)(e)),e.options=Ce(r),e.services={},e.logger=K,e.modules={external:[]},t=(0,F.A)(e),Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach((function(e){"function"==typeof t[e]&&(t[e]=t[e].bind(t))})),i&&!e.isInitialized&&!r.isClone){if(!e.options.initImmediate)return e.init(r,i),(0,M.A)(e,(0,F.A)(e));setTimeout((function(){e.init(r,i)}),0)}return e}return(0,T.A)(o,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;"function"==typeof t&&(r=t,t={}),!t.defaultNS&&!1!==t.defaultNS&&t.ns&&("string"==typeof t.ns?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));var n=Ie();function o(e){return e?"function"==typeof e?new e:e:null}if(this.options=$e($e($e({},n),this.options),Ce(t)),"v1"!==this.options.compatibilityAPI&&(this.options.interpolation=$e($e({},n.interpolation),this.options.interpolation)),void 0!==t.keySeparator&&(this.options.userDefinedKeySeparator=t.keySeparator),void 0!==t.nsSeparator&&(this.options.userDefinedNsSeparator=t.nsSeparator),!this.options.isClone){var i;this.modules.logger?K.init(o(this.modules.logger),this.options):K.init(null,this.options),this.modules.formatter?i=this.modules.formatter:"undefined"!=typeof Intl&&(i=xe);var s=new fe(this.options);this.store=new se(this.options.resources,this.options);var a=this.services;a.logger=K,a.resourceStore=this.store,a.languageUtils=s,a.pluralResolver=new ye(s,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!i||this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format||(a.formatter=o(i),a.formatter.init(a,this.options),this.options.interpolation.format=a.formatter.format.bind(a.formatter)),a.interpolator=new Ae(this.options),a.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},a.backendConnector=new je(o(this.modules.backend),a.resourceStore,a,this.options),a.backendConnector.on("*",(function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];e.emit.apply(e,[t].concat(n))})),this.modules.languageDetector&&(a.languageDetector=o(this.modules.languageDetector),a.languageDetector.init&&a.languageDetector.init(a,this.options.detection,this.options)),this.modules.i18nFormat&&(a.i18nFormat=o(this.modules.i18nFormat),a.i18nFormat.init&&a.i18nFormat.init(this)),this.translator=new pe(this.services,this.options),this.translator.on("*",(function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];e.emit.apply(e,[t].concat(n))})),this.modules.external.forEach((function(t){t.init&&t.init(e)}))}if(this.format=this.options.interpolation.format,r||(r=Te),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var c=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);c.length>0&&"dev"!==c[0]&&(this.options.lng=c[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach((function(t){e[t]=function(){var r;return(r=e.store)[t].apply(r,arguments)}})),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach((function(t){e[t]=function(){var r;return(r=e.store)[t].apply(r,arguments),e}}));var l=W(),u=function(){var t=function(t,n){e.isInitialized&&!e.initializedStoreOnce&&e.logger.warn("init: i18next is already initialized. You should call init just once!"),e.isInitialized=!0,e.options.isClone||e.logger.log("initialized",e.options),e.emit("initialized",e.options),l.resolve(n),r(t,n)};if(e.languages&&"v1"!==e.options.compatibilityAPI&&!e.isInitialized)return t(null,e.t.bind(e));e.changeLanguage(e.options.lng,t)};return this.options.resources||!this.options.initImmediate?u():setTimeout(u,0),l}},{key:"loadResources",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Te,n="string"==typeof e?e:this.language;if("function"==typeof e&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(n&&"cimode"===n.toLowerCase())return r();var o=[],i=function(e){e&&t.services.languageUtils.toResolveHierarchy(e).forEach((function(e){o.indexOf(e)<0&&o.push(e)}))};n?i(n):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach((function(e){return i(e)})),this.options.preload&&this.options.preload.forEach((function(e){return i(e)})),this.services.backendConnector.load(o,this.options.ns,(function(e){e||t.resolvedLanguage||!t.language||t.setResolvedLanguage(t.language),r(e)}))}else r(null)}},{key:"reloadResources",value:function(e,t,r){var n=W();return e||(e=this.languages),t||(t=this.options.ns),r||(r=Te),this.services.backendConnector.reload(e,t,(function(e){n.resolve(),r(e)})),n}},{key:"use",value:function(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&ae.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}},{key:"setResolvedLanguage",value:function(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1))for(var t=0;t<this.languages.length;t++){var r=this.languages[t];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}},{key:"changeLanguage",value:function(e,t){var r=this;this.isLanguageChangingTo=e;var n=W();this.emit("languageChanging",e);var o=function(e){r.language=e,r.languages=r.services.languageUtils.toResolveHierarchy(e),r.resolvedLanguage=void 0,r.setResolvedLanguage(e)},i=function(i){e||i||!r.services.languageDetector||(i=[]);var s="string"==typeof i?i:r.services.languageUtils.getBestMatchFromCodes(i);s&&(r.language||o(s),r.translator.language||r.translator.changeLanguage(s),r.services.languageDetector&&r.services.languageDetector.cacheUserLanguage&&r.services.languageDetector.cacheUserLanguage(s)),r.loadResources(s,(function(e){!function(e,i){i?(o(i),r.translator.changeLanguage(i),r.isLanguageChangingTo=void 0,r.emit("languageChanged",i),r.logger.log("languageChanged",i)):r.isLanguageChangingTo=void 0,n.resolve((function(){return r.t.apply(r,arguments)})),t&&t(e,(function(){return r.t.apply(r,arguments)}))}(e,s)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(i):this.services.languageDetector.detect(i):i(e):i(this.services.languageDetector.detect()),n}},{key:"getFixedT",value:function(e,t,r){var n=this,o=function e(t,o){var i;if("object"!==(0,L.A)(o)){for(var s=arguments.length,a=new Array(s>2?s-2:0),c=2;c<s;c++)a[c-2]=arguments[c];i=n.options.overloadTranslationOptionHandler([t,o].concat(a))}else i=$e({},o);i.lng=i.lng||e.lng,i.lngs=i.lngs||e.lngs,i.ns=i.ns||e.ns,i.keyPrefix=i.keyPrefix||r||e.keyPrefix;var l,u=n.options.keySeparator||".";return l=i.keyPrefix&&Array.isArray(t)?t.map((function(e){return"".concat(i.keyPrefix).concat(u).concat(e)})):i.keyPrefix?"".concat(i.keyPrefix).concat(u).concat(t):t,n.t(l,i)};return"string"==typeof e?o.lng=e:o.lngs=e,o.ns=t,o.keyPrefix=r,o}},{key:"t",value:function(){var e;return this.translator&&(e=this.translator).translate.apply(e,arguments)}},{key:"exists",value:function(){var e;return this.translator&&(e=this.translator).exists.apply(e,arguments)}},{key:"setDefaultNamespace",value:function(e){this.options.defaultNS=e}},{key:"hasLoadedNamespace",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var n=r.lng||this.resolvedLanguage||this.languages[0],o=!!this.options&&this.options.fallbackLng,i=this.languages[this.languages.length-1];if("cimode"===n.toLowerCase())return!0;var s=function(e,r){var n=t.services.backendConnector.state["".concat(e,"|").concat(r)];return-1===n||2===n};if(r.precheck){var a=r.precheck(this,s);if(void 0!==a)return a}return!(!this.hasResourceBundle(n,e)&&this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages)&&(!s(n,e)||o&&!s(i,e)))}},{key:"loadNamespaces",value:function(e,t){var r=this,n=W();return this.options.ns?("string"==typeof e&&(e=[e]),e.forEach((function(e){r.options.ns.indexOf(e)<0&&r.options.ns.push(e)})),this.loadResources((function(e){n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}},{key:"loadLanguages",value:function(e,t){var r=W();"string"==typeof e&&(e=[e]);var n=this.options.preload||[],o=e.filter((function(e){return n.indexOf(e)<0}));return o.length?(this.options.preload=n.concat(o),this.loadResources((function(e){r.resolve(),t&&t(e)})),r):(t&&t(),Promise.resolve())}},{key:"dir",value:function(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";var t=this.services&&this.services.languageUtils||new fe(Ie());return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(t.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Te,n=$e($e($e({},this.options),t),{isClone:!0}),i=new o(n);return void 0===t.debug&&void 0===t.prefix||(i.logger=i.logger.clone(t)),["store","services","language"].forEach((function(t){i[t]=e[t]})),i.services=$e({},this.services),i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i.translator=new pe(i.services,i.options),i.translator.on("*",(function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];i.emit.apply(i,[e].concat(r))})),i.init(n,r),i.translator.options=i.options,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),o}(z);(0,U.A)(Fe,"createInstance",(function(){return new Fe(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)}));var Ne=Fe.createInstance();Ne.createInstance=Fe.createInstance;var Me=Ne.createInstance,De=(Ne.dir,Ne.init,Ne.loadResources,Ne.reloadResources,Ne.use,Ne.changeLanguage,Ne.getFixedT,Ne.t,Ne.exists,Ne.setDefaultNamespace,Ne.hasLoadedNamespace,Ne.loadNamespaces,Ne.loadLanguages,Object.defineProperty);class Ue{constructor(...e){var t,r;((e,t,r)=>{t in e?De(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(this,"symbol"!=typeof(t="holders")?t+"":t,r),this.holders=e}get(e){for(const t of this.holders){const r=t.get(e);if(r)return r}}}const _e=(0,a.createVersionedContext)("api-context"),qe=e=>{var t;const{apis:r,children:i}=e,s=null==(t=(0,n.useContext)(_e))?void 0:t.atVersion(1),c=s?new Ue(r,s):r;return o().createElement(_e.Provider,{value:(0,a.createVersionedValueMap)({1:c}),children:i})};qe.propTypes={apis:s().shape({get:s().func.isRequired}).isRequired,children:s().node};var Be=Object.defineProperty;class Ve{constructor(e){var t;this.factories=e,((e,t,r)=>{t in e?Be(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(this,"symbol"!=typeof(t="apis")?t+"":t,new Map)}static validateFactories(e,t){for(const r of t){const t=[r],n=new Set;for(;t.length;){const o=t.shift(),i=e.get(o);if(i)for(const e of Object.values(i.deps)){if(e.id===r.id)throw new Error(`Circular dependency of api factory for ${r}`);n.has(e)||(n.add(e),t.push(e))}}}}get(e){return this.load(e)}load(e,t=[]){const r=this.apis.get(e.id);if(r)return r;const n=this.factories.get(e);if(!n)return;if(t.includes(n.api))throw new Error(`Circular dependency of api factory for ${n.api}`);const o=this.loadDeps(e,n.deps,[...t,n.api]),i=n.factory(o);return this.apis.set(e.id,i),i}loadDeps(e,t,r){const n={};for(const o in t)if(t.hasOwnProperty(o)){const i=t[o],s=this.load(i,r);if(!s)throw new Error(`No API factory available for dependency ${i} of dependent ${e}`);n[o]=s}return n}}var Ke=Object.defineProperty,ze=(e=>(e[e.default=10]="default",e[e.app=50]="app",e[e.static=100]="static",e))(ze||{});class We{constructor(){var e;((e,t,r)=>{t in e?Ke(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(this,"symbol"!=typeof(e="factories")?e+"":e,new Map)}register(e,t){const r=ze[e],n=this.factories.get(t.api.id);return!(n&&n.priority>=r||(this.factories.set(t.api.id,{priority:r,factory:t}),0))}get(e){const t=this.factories.get(e.id);if(t)return t.factory}getAllApis(){const e=new Set;for(const{factory:t}of this.factories.values())e.add(t.api);return e}}function He(e){return new Promise(((t,r)=>{const n=e.width||500,o=e.height||700,i=window.screen.width/2-n/2,s=window.screen.height/2-o/2,a=window.open(e.url,e.name,`menubar=no,location=no,resizable=no,scrollbars=no,status=no,width=${n},height=${o},top=${s},left=${i}`);let c="";if(!a||void 0===a.closed||a.closed){const e=new Error("Failed to open auth popup.");return e.name="PopupRejectedError",void r(e)}const l=n=>{if(n.source!==a)return;if(n.origin!==e.origin)return;const{data:o}=n;if("config_info"===o.type)return void(c=o.targetOrigin);if("authorization_response"!==o.type)return;const i=o;if("error"in i){const e=new Error(i.error.message);e.name=i.error.name,r(e)}else t(i.response);p()},u=setInterval((()=>{if(a.closed){const e="Login failed, "+(c&&c!==window.location.origin?`Incorrect app origin, expected ${c}`:"popup was closed"),t=new Error(e);t.name="PopupClosedError",r(t),p()}}),100);function p(){window.removeEventListener("message",l),clearInterval(u)}window.addEventListener("message",l)}))}var Ge=Object.defineProperty,Je=(e,t,r)=>(((e,t,r)=>{t in e?Ge(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);let Ye=!1;function Xe(e){return[...e].join(" ")}class Qe{constructor(e){var t;Je(this,"discoveryApi"),Je(this,"environment"),Je(this,"provider"),Je(this,"joinScopesFunc"),Je(this,"authRequester"),Je(this,"sessionTransform"),Je(this,"enableExperimentalRedirectFlow"),Je(this,"popupOptions");const{configApi:r,discoveryApi:n,environment:o,provider:i,joinScopes:s=Xe,oauthRequestApi:a,sessionTransform:c=(e=>e),popupOptions:l}=e;Ye||r||(console.warn("DEPRECATION WARNING: Authentication providers require a configApi instance to configure the authentication flow. Please provide one to the authentication provider constructor."),Ye=!0),this.enableExperimentalRedirectFlow=!!r&&null!=(t=r.getOptionalBoolean("enableExperimentalRedirectFlow"))&&t,this.authRequester=a.createAuthRequester({provider:i,onAuthRequest:async e=>this.enableExperimentalRedirectFlow?this.executeRedirect(e):this.showPopup(e)}),this.discoveryApi=n,this.environment=o,this.provider=i,this.joinScopesFunc=s,this.sessionTransform=c,this.popupOptions=l}async createSession(e){return e.instantPopup?this.enableExperimentalRedirectFlow?this.executeRedirect(e.scopes):this.showPopup(e.scopes):this.authRequester(e.scopes)}async refreshSession(e){const t=await fetch(await this.buildUrl("/refresh",{optional:!0,...e&&{scope:this.joinScopesFunc(e)}}),{headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch((e=>{throw new Error(`Auth refresh request failed, ${e}`)}));if(!t.ok){const e=new Error(`Auth refresh request failed, ${t.statusText}`);throw e.status=t.status,e}const r=await t.json();if(r.error){const e=new Error(r.error.message);throw r.error.name&&(e.name=r.error.name),e}return await this.sessionTransform(r)}async removeSession(){const e=await fetch(await this.buildUrl("/logout"),{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch((e=>{throw new Error(`Logout request failed, ${e}`)}));if(!e.ok){const t=new Error(`Logout request failed, ${e.statusText}`);throw t.status=e.status,t}}async showPopup(e){var t,r,n,o,i,s,a,c;const l=this.joinScopesFunc(e),u=await this.buildUrl("/start",{scope:l,origin:window.location.origin,flow:"popup"}),p=(null==(r=null==(t=this.popupOptions)?void 0:t.size)?void 0:r.fullscreen)?window.screen.width:(null==(o=null==(n=this.popupOptions)?void 0:n.size)?void 0:o.width)||450,h=(null==(s=null==(i=this.popupOptions)?void 0:i.size)?void 0:s.fullscreen)?window.screen.height:(null==(c=null==(a=this.popupOptions)?void 0:a.size)?void 0:c.height)||730,f=await He({url:u,name:`${this.provider.title} Login`,origin:new URL(u).origin,width:p,height:h});return await this.sessionTransform(f)}async executeRedirect(e){const t=this.joinScopesFunc(e);return window.location.href=await this.buildUrl("/start",{scope:t,origin:window.location.origin,redirectUrl:window.location.href,flow:"redirect"}),new Promise((()=>{}))}async buildUrl(e,t){const r=await this.discoveryApi.getBaseUrl("auth"),n=this.buildQueryString({...t,env:this.environment});return`${r}/${this.provider.id}${e}${n}`}buildQueryString(e){if(!e)return"";const t=Object.entries(e).map((([e,t])=>"string"==typeof t?`${encodeURIComponent(e)}=${encodeURIComponent(t)}`:t?encodeURIComponent(e):void 0)).filter(Boolean).join("&");return t?`?${t}`:""}}var Ze=Object.defineProperty,et=(e,t,r)=>(((e,t,r)=>{t in e?Ze(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class tt{constructor(e){et(this,"discoveryApi"),et(this,"environment"),et(this,"provider");const{discoveryApi:t,environment:r,provider:n}=e;this.discoveryApi=t,this.environment=r,this.provider=n}async createSession(){const e=await this.buildUrl("/start"),t=await He({url:e,name:`${this.provider.title} Login`,origin:new URL(e).origin,width:450,height:730});return{...t,id:t.profile.email}}async refreshSession(){}async removeSession(){const e=await fetch(await this.buildUrl("/logout"),{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch((e=>{throw new Error(`Logout request failed, ${e}`)}));if(!e.ok){const t=new Error(`Logout request failed, ${e.statusText}`);throw t.status=e.status,t}}async buildUrl(e){return`${await this.discoveryApi.getBaseUrl("auth")}/${this.provider.id}${e}?env=${this.environment}`}}function rt(e,t){for(const r of t)if(!e.has(r))return!1;return!0}class nt{constructor(e){this.options=e}sessionExistsAndHasScope(e,t){return!!e&&(!t||(void 0===this.options.sessionScopes||rt(this.options.sessionScopes(e),t)))}getExtendedScope(e,t){const r=new Set(this.options.defaultScopes);if(e&&void 0!==this.options.sessionScopes){const t=this.options.sessionScopes(e);for(const e of t)r.add(e)}if(t)for(const e of t)r.add(e);return r}}var ot=Object.defineProperty,it=(e,t,r)=>(((e,t,r)=>{t in e?ot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class st{constructor(){it(this,"isClosed",!1),it(this,"terminatingError"),it(this,"observable",new(l())((e=>this.isClosed?(this.terminatingError?e.error(this.terminatingError):e.complete(),()=>{}):(this.subscribers.add(e),()=>{this.subscribers.delete(e)})))),it(this,"subscribers",new Set)}[Symbol.observable](){return this}get closed(){return this.isClosed}next(e){if(this.isClosed)throw new Error("PublishSubject is closed");this.subscribers.forEach((t=>t.next(e)))}error(e){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.terminatingError=e,this.subscribers.forEach((t=>t.error(e)))}complete(){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.subscribers.forEach((e=>e.complete()))}subscribe(e,t,r){const n="function"==typeof e?{next:e,error:t,complete:r}:e;return this.observable.subscribe(n)}}class at{constructor(e){it(this,"isClosed"),it(this,"currentValue"),it(this,"terminatingError"),it(this,"observable"),it(this,"subscribers",new Set),this.isClosed=!1,this.currentValue=e,this.terminatingError=void 0,this.observable=new(l())((e=>this.isClosed?(this.terminatingError?e.error(this.terminatingError):e.complete(),()=>{}):(e.next(this.currentValue),this.subscribers.add(e),()=>{this.subscribers.delete(e)})))}[Symbol.observable](){return this}get closed(){return this.isClosed}next(e){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.currentValue=e,this.subscribers.forEach((t=>t.next(e)))}error(e){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.terminatingError=e,this.subscribers.forEach((t=>t.error(e)))}complete(){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.subscribers.forEach((e=>e.complete()))}subscribe(e,t,r){const n="function"==typeof e?{next:e,error:t,complete:r}:e;return this.observable.subscribe(n)}}var ct=Object.defineProperty,lt=(e,t,r)=>(((e,t,r)=>{t in e?ct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class ut{constructor(){lt(this,"subject",new at(u.SessionState.SignedOut)),lt(this,"signedIn",!1)}setIsSignedIn(e){this.signedIn!==e&&(this.signedIn=e,this.subject.next(this.signedIn?u.SessionState.SignedIn:u.SessionState.SignedOut))}sessionState$(){return this.subject}}var pt=Object.defineProperty,ht=(e,t,r)=>(((e,t,r)=>{t in e?pt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class ft{constructor(e){ht(this,"connector"),ht(this,"helper"),ht(this,"sessionScopesFunc"),ht(this,"sessionShouldRefreshFunc"),ht(this,"stateTracker",new ut),ht(this,"refreshPromise"),ht(this,"currentSession");const{connector:t,defaultScopes:r=new Set,sessionScopes:n,sessionShouldRefresh:o}=e;this.connector=t,this.sessionScopesFunc=n,this.sessionShouldRefreshFunc=o,this.helper=new nt({sessionScopes:n,defaultScopes:r})}async getSession(e){if(this.helper.sessionExistsAndHasScope(this.currentSession,e.scopes)){if(!this.sessionShouldRefreshFunc(this.currentSession))return this.currentSession;try{const t=await this.collapsedSessionRefresh(e.scopes),r=this.sessionScopesFunc(this.currentSession);return rt(this.sessionScopesFunc(t),r)&&(this.currentSession=t),t}catch(t){if(e.optional)return;throw t}}if(!this.currentSession&&!e.instantPopup)try{const t=await this.collapsedSessionRefresh(e.scopes);return this.currentSession=t,this.getSession(e)}catch{}if(!e.optional)return this.currentSession=await this.connector.createSession({...e,scopes:this.helper.getExtendedScope(this.currentSession,e.scopes)}),this.stateTracker.setIsSignedIn(!0),this.currentSession}async removeSession(){this.currentSession=void 0,await this.connector.removeSession(),this.stateTracker.setIsSignedIn(!1)}sessionState$(){return this.stateTracker.sessionState$()}async collapsedSessionRefresh(e){if(this.refreshPromise)return this.refreshPromise;this.refreshPromise=this.connector.refreshSession(this.helper.getExtendedScope(this.currentSession,e));try{const e=await this.refreshPromise;return this.stateTracker.setIsSignedIn(!0),e}finally{delete this.refreshPromise}}}var dt=Object.defineProperty,gt=(e,t,r)=>(((e,t,r)=>{t in e?dt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class vt{constructor(e){gt(this,"connector"),gt(this,"helper"),gt(this,"stateTracker",new ut),gt(this,"currentSession");const{connector:t,defaultScopes:r=new Set,sessionScopes:n}=e;this.connector=t,this.helper=new nt({sessionScopes:n,defaultScopes:r})}setSession(e){this.currentSession=e,this.stateTracker.setIsSignedIn(Boolean(e))}async getSession(e){return this.helper.sessionExistsAndHasScope(this.currentSession,e.scopes)?this.currentSession:e.optional?void 0:(this.currentSession=await this.connector.createSession({...e,scopes:this.helper.getExtendedScope(this.currentSession,e.scopes)}),this.stateTracker.setIsSignedIn(!0),this.currentSession)}async removeSession(){this.currentSession=void 0,this.stateTracker.setIsSignedIn(!1)}sessionState$(){return this.stateTracker.sessionState$()}}var mt=Object.defineProperty,yt=(e,t,r)=>(((e,t,r)=>{t in e?mt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class bt{constructor(e){yt(this,"manager"),yt(this,"storageKey"),yt(this,"schema"),yt(this,"sessionShouldRefreshFunc"),yt(this,"helper");const{manager:t,storageKey:r,schema:n,sessionScopes:o,sessionShouldRefresh:i=(()=>!1)}=e;this.manager=t,this.storageKey=r,this.schema=n,this.sessionShouldRefreshFunc=i,this.helper=new nt({sessionScopes:o,defaultScopes:new Set})}setSession(e){this.manager.setSession(e),this.saveSession(e)}async getSession(e){const{scopes:t}=e,r=this.loadSession();if(this.helper.sessionExistsAndHasScope(r,t)&&!this.sessionShouldRefreshFunc(r))return this.manager.setSession(r),r;const n=await this.manager.getSession(e);return this.saveSession(n),n}async removeSession(){localStorage.removeItem(this.storageKey),await this.manager.removeSession()}sessionState$(){return this.manager.sessionState$()}loadSession(){try{const e=localStorage.getItem(this.storageKey);if(e){const t=JSON.parse(e,((e,t)=>"Set"===(null==t?void 0:t.__type)?new Set(t.__value):t));try{return this.schema.parse(t)}catch(e){throw console.log(`Failed to load session from local storage because it did not conform to the expected schema, ${e}`),e}}return}catch(e){return void localStorage.removeItem(this.storageKey)}}saveSession(e){if(void 0!==e){try{this.schema.parse(e)}catch(e){return void console.warn(`Failed to save session to local storage because it did not conform to the expected schema, ${e}`)}localStorage.setItem(this.storageKey,JSON.stringify(e,((e,t)=>t instanceof Set?{__type:"Set",__value:Array.from(t)}:t)))}else localStorage.removeItem(this.storageKey)}}var wt=Object.defineProperty,St=(e,t,r)=>(((e,t,r)=>{t in e?wt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);const At={id:"oauth2",title:"Your Identity Provider",icon:()=>null};class kt{constructor(e){St(this,"sessionManager"),St(this,"scopeTransform"),this.sessionManager=e.sessionManager,this.scopeTransform=e.scopeTransform}static create(e){const{configApi:t,discoveryApi:r,environment:n="development",provider:o=At,oauthRequestApi:i,defaultScopes:s=[],scopeTransform:a=(e=>e),popupOptions:c}=e,l=new Qe({configApi:t,discoveryApi:r,environment:n,provider:o,oauthRequestApi:i,sessionTransform({backstageIdentity:e,...t}){var r;const n={...t,providerInfo:{idToken:t.providerInfo.idToken,accessToken:t.providerInfo.accessToken,scopes:kt.normalizeScopes(a,t.providerInfo.scope),expiresAt:t.providerInfo.expiresInSeconds?new Date(Date.now()+1e3*t.providerInfo.expiresInSeconds):void 0}};if(e){const o=null!=(r=e.expiresInSeconds)?r:t.providerInfo.expiresInSeconds;n.backstageIdentity={token:e.token,identity:e.identity,expiresAt:o?new Date(Date.now()+1e3*o):void 0}}return n},popupOptions:c}),u=new ft({connector:l,defaultScopes:new Set(s),sessionScopes:e=>e.providerInfo.scopes,sessionShouldRefresh:e=>{var t,r;let n=1/0;return(null==(t=e.providerInfo)?void 0:t.expiresAt)&&(n=Math.min(n,(e.providerInfo.expiresAt.getTime()-Date.now())/1e3)),(null==(r=e.backstageIdentity)?void 0:r.expiresAt)&&(n=Math.min(n,(e.backstageIdentity.expiresAt.getTime()-Date.now())/1e3)),n<300}});return new kt({sessionManager:u,scopeTransform:a})}async signIn(){await this.getAccessToken()}async signOut(){await this.sessionManager.removeSession()}sessionState$(){return this.sessionManager.sessionState$()}async getAccessToken(e,t){var r;const n=kt.normalizeScopes(this.scopeTransform,e),o=await this.sessionManager.getSession({...t,scopes:n});return null!=(r=null==o?void 0:o.providerInfo.accessToken)?r:""}async getIdToken(e={}){var t;const r=await this.sessionManager.getSession({...e,scopes:new Set(["openid"])});return null!=(t=null==r?void 0:r.providerInfo.idToken)?t:""}async getBackstageIdentity(e={}){const t=await this.sessionManager.getSession(e);return null==t?void 0:t.backstageIdentity}async getProfile(e={}){const t=await this.sessionManager.getSession(e);return null==t?void 0:t.profile}static normalizeScopes(e,t){if(!t)return new Set;const r=Array.isArray(t)?t:t.split(/[\s|,]/).filter(Boolean);return new Set(e(r))}}const Ot={id:"github",title:"GitHub",icon:()=>null};class Rt{static create(e){const{configApi:t,discoveryApi:r,environment:n="development",provider:o=Ot,oauthRequestApi:i,defaultScopes:s=["read:user"]}=e;return kt.create({configApi:t,discoveryApi:r,oauthRequestApi:i,provider:o,environment:n,defaultScopes:s})}}const xt={id:"gitlab",title:"GitLab",icon:()=>null};class Et{static create(e){const{configApi:t,discoveryApi:r,environment:n="development",provider:o=xt,oauthRequestApi:i,defaultScopes:s=["read_user"]}=e;return kt.create({configApi:t,discoveryApi:r,oauthRequestApi:i,provider:o,environment:n,defaultScopes:s})}}const Pt={id:"google",title:"Google",icon:()=>null},jt="https://www.googleapis.com/auth/";class It{static create(e){const{configApi:t,discoveryApi:r,oauthRequestApi:n,environment:o="development",provider:i=Pt,defaultScopes:s=["openid",`${jt}userinfo.email`,`${jt}userinfo.profile`]}=e;return kt.create({configApi:t,discoveryApi:r,oauthRequestApi:n,provider:i,environment:o,defaultScopes:s,scopeTransform:e=>e.map((e=>"openid"===e?e:"profile"===e||"email"===e?`${jt}userinfo.${e}`:e.startsWith(jt)?e:`${jt}${e}`))})}}const Ct={id:"okta",title:"Okta",icon:()=>null},Lt=new Set(["openid","profile","email","phone","address","groups","offline_access"]),$t="okta.";class Tt{static create(e){const{configApi:t,discoveryApi:r,environment:n="development",provider:o=Ct,oauthRequestApi:i,defaultScopes:s=["openid","email","profile","offline_access"]}=e;return kt.create({configApi:t,discoveryApi:r,oauthRequestApi:i,provider:o,environment:n,defaultScopes:s,scopeTransform:e=>e.map((e=>Lt.has(e)||e.startsWith($t)?e:`${$t}${e}`))})}}const Ft=p.z.object({profile:p.z.object({email:p.z.string().optional(),displayName:p.z.string().optional(),picture:p.z.string().optional()}),backstageIdentity:p.z.object({token:p.z.string(),identity:p.z.object({type:p.z.literal("user"),userEntityRef:p.z.string(),ownershipEntityRefs:p.z.array(p.z.string())})})}),Nt={id:"saml",title:"SAML",icon:()=>null};class Mt{constructor(e){this.sessionManager=e}static create(e){const{discoveryApi:t,environment:r="development",provider:n=Nt}=e,o=new tt({discoveryApi:t,environment:r,provider:n}),i=new vt({connector:o}),s=new bt({manager:i,storageKey:`${n.id}Session`,schema:Ft});return new Mt(s)}sessionState$(){return this.sessionManager.sessionState$()}async signIn(){await this.getBackstageIdentity({})}async signOut(){await this.sessionManager.removeSession()}async getBackstageIdentity(e={}){const t=await this.sessionManager.getSession(e);return null==t?void 0:t.backstageIdentity}async getProfile(e={}){const t=await this.sessionManager.getSession(e);return null==t?void 0:t.profile}}var Dt=Object.defineProperty,Ut=(e,t,r)=>(((e,t,r)=>{t in e?Dt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);const _t={id:"microsoft",title:"Microsoft",icon:()=>null},qt=class e{constructor(t){Ut(this,"oauth2"),Ut(this,"configApi"),Ut(this,"environment"),Ut(this,"provider"),Ut(this,"oauthRequestApi"),Ut(this,"discoveryApi"),Ut(this,"scopeTransform");const{configApi:r,environment:n="development",provider:o=_t,oauthRequestApi:i,discoveryApi:s,defaultScopes:a=["openid","offline_access","profile","email","User.Read"],scopeTransform:c=(e=>e.concat("offline_access"))}=t;this.configApi=r,this.environment=n,this.provider=o,this.oauthRequestApi=i,this.discoveryApi=s,this.scopeTransform=c,this.oauth2={[e.MicrosoftGraphID]:kt.create({configApi:this.configApi,discoveryApi:this.discoveryApi,oauthRequestApi:this.oauthRequestApi,provider:this.provider,environment:this.environment,scopeTransform:this.scopeTransform,defaultScopes:a})}}static create(t){return new e(t)}microsoftGraph(){return this.oauth2[e.MicrosoftGraphID]}static resourceForScopes(t){var r;const n=[...new Set(t.split(" ").map(e.resourceForScope).filter((e=>"openid"!==e)))];if(n.length>1)return Promise.reject(new Error(`Requested access token with scopes from multiple Azure resources: ${n.join(", ")}. Access tokens can only have a single audience.`));const o=null!=(r=n[0])?r:e.MicrosoftGraphID;return Promise.resolve(o)}static resourceForScope(t){var r;const n=null==(r=t.match(/^(?<resourceURI>.*)\/(?<scp>[^\/]*)$/))?void 0:r.groups;if(n){const{resourceURI:e}=n;return e.replace(/^api:\/\//,"")}switch(t){case"email":case"openid":case"offline_access":case"profile":return"openid";default:return e.MicrosoftGraphID}}async getAccessToken(t,r){const n=void 0===t?e.MicrosoftGraphID:await e.resourceForScopes(Array.isArray(t)?t.join(" "):t);return n in this.oauth2||(this.oauth2[n]=kt.create({configApi:this.configApi,discoveryApi:this.discoveryApi,oauthRequestApi:this.oauthRequestApi,provider:this.provider,environment:this.environment,scopeTransform:this.scopeTransform})),this.oauth2[n].getAccessToken(t,r)}getIdToken(e){return this.microsoftGraph().getIdToken(e)}getProfile(e){return this.microsoftGraph().getProfile(e)}getBackstageIdentity(e){return this.microsoftGraph().getBackstageIdentity(e)}signIn(){return this.microsoftGraph().signIn()}signOut(){return this.microsoftGraph().signOut()}sessionState$(){return this.microsoftGraph().sessionState$()}};Ut(qt,"MicrosoftGraphID","00000003-0000-0000-c000-000000000000");let Bt=qt;const Vt={id:"onelogin",title:"onelogin",icon:()=>null},Kt=new Set(["openid","profile","email","phone","address","groups","offline_access"]),zt="onelogin.";class Wt{static create(e){const{configApi:t,discoveryApi:r,environment:n="development",provider:o=Vt,oauthRequestApi:i}=e;return kt.create({configApi:t,discoveryApi:r,oauthRequestApi:i,provider:o,environment:n,defaultScopes:["openid","email","profile","offline_access"],scopeTransform:e=>e.map((e=>Kt.has(e)||e.startsWith(zt)?e:`${zt}${e}`))})}}const Ht={id:"bitbucket",title:"Bitbucket",icon:()=>null};class Gt{static create(e){const{configApi:t,discoveryApi:r,environment:n="development",provider:o=Ht,oauthRequestApi:i,defaultScopes:s=["account"]}=e;return kt.create({configApi:t,discoveryApi:r,oauthRequestApi:i,provider:o,environment:n,defaultScopes:s})}}const Jt={id:"bitbucketServer",title:"Bitbucket Server",icon:()=>null};class Yt{static create(e){const{configApi:t,discoveryApi:r,environment:n="development",provider:o=Jt,oauthRequestApi:i,defaultScopes:s=["PROJECT_ADMIN"]}=e;return kt.create({configApi:t,discoveryApi:r,oauthRequestApi:i,provider:o,environment:n,defaultScopes:s})}}const Xt={id:"atlassian",title:"Atlassian",icon:()=>null};class Qt{static create(e){const{configApi:t,discoveryApi:r,environment:n="development",provider:o=Xt,oauthRequestApi:i}=e;return kt.create({configApi:t,discoveryApi:r,oauthRequestApi:i,provider:o,environment:n})}}const Zt={id:"vmwareCloudServices",title:"VMware Cloud",icon:()=>null};class er{static create(e){const{configApi:t,discoveryApi:r,oauthRequestApi:n,environment:o="development",provider:i=Zt,defaultScopes:s=["openid"]}=e;return kt.create({configApi:t,discoveryApi:r,oauthRequestApi:n,provider:i,environment:o,defaultScopes:s})}}var tr=Object.defineProperty;class rr{constructor(){var e,t,r;e=this,t="subject",r=new st,((e,t,r)=>{t in e?tr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r)}post(e){this.subject.next(e)}alert$(){return this.subject}}class nr{constructor(e){this.actualApis=e}static fromApis(e){return new nr(e)}captureEvent(e){this.actualApis.forEach((t=>{try{t.captureEvent(e)}catch{}}))}}class or{captureEvent(e){}}var ir=Object.defineProperty,sr=(e,t,r)=>(((e,t,r)=>{t in e?ir(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);const ar="theme";class cr{constructor(e){this.themes=e,sr(this,"activeThemeId"),sr(this,"subject",new at(void 0))}static createWithStorage(e){var t;const r=new cr(e);if(!window.localStorage)return r;const n=null!=(t=window.localStorage.getItem(ar))?t:void 0;return r.setActiveThemeId(n),r.activeThemeId$().subscribe((e=>{e?window.localStorage.setItem(ar,e):window.localStorage.removeItem(ar)})),window.addEventListener("storage",(e=>{var t;if(e.key===ar){const e=null!=(t=localStorage.getItem(ar))?t:void 0;r.setActiveThemeId(e)}})),r}getInstalledThemes(){return this.themes.slice()}activeThemeId$(){return this.subject}getActiveThemeId(){return this.activeThemeId}setActiveThemeId(e){this.activeThemeId=e,this.subject.next(e)}}const lr="Invalid discovery URL pattern,";class ur{constructor(e){this.parts=e}static compile(e){const t=e.split(/\{\{\s*pluginId\s*\}\}/),r=t.join("pluginId");let n;try{n=new URL(r)}catch{throw new Error(`${lr} URL '${r}' is invalid`)}if(n.hash)throw new Error(`${lr} URL must not have a hash`);if(n.search)throw new Error(`${lr} URL must not have a query`);if(r.endsWith("/"))throw new Error(`${lr} URL must not end with a slash`);return new ur(t)}async getBaseUrl(e){return this.parts.join(encodeURIComponent(e))}}class pr{constructor(e,t){this.endpoints=e,this.defaultEndpoint=t}static fromConfig(e,t){var r,n;const o=null!=(r=null==t?void 0:t.pathPattern)?r:"/api/{{ pluginId }}",i=e.getString("backend.baseUrl"),s=null==(n=e.getOptionalConfigArray("discovery.endpoints"))?void 0:n.flatMap((e=>{const t="object"==typeof e.get("target")?e.getString("target.external"):e.getString("target"),r=ur.compile(t);return e.getStringArray("plugins").map((e=>[e,r]))}));return new pr(new Map(s),ur.compile(`${i}${o}`))}async getBaseUrl(e){const t=this.endpoints.get(e);return t?t.getBaseUrl(e):this.defaultEndpoint.getBaseUrl(e)}}class hr{constructor(e,t){this.alertApi=e,this.errorApi=t}post(e,t){return(null==t?void 0:t.hidden)||this.alertApi.post({message:e.message,severity:"error"}),this.errorApi.post(e,t)}error$(){return this.errorApi.error$()}}var fr=Object.defineProperty;class dr{constructor(){var e,t,r;e=this,t="subject",r=new st,((e,t,r)=>{t in e?fr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r)}post(e,t){this.subject.next({error:e,context:t})}error$(){return this.subject}}class gr{static forward(e,t){window.addEventListener("unhandledrejection",(r=>{e.post(r.reason,t)}))}}var vr=Object.defineProperty,mr=(e,t,r)=>(((e,t,r)=>{t in e?vr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);function yr(e){if(e.length<3)throw new Error(`The '${e}' feature flag must have a minimum length of three characters.`);if(e.length>150)throw new Error(`The '${e}' feature flag must not exceed 150 characters.`);if(!e.match(/^[a-z]+[a-z0-9-]+$/))throw new Error(`The '${e}' feature flag must start with a lowercase letter and only contain lowercase letters, numbers and hyphens. Examples: feature-flag-one, alpha, release-2020`)}class br{constructor(){mr(this,"registeredFeatureFlags",[]),mr(this,"flags")}registerFlag(e){yr(e.name),this.registeredFeatureFlags.push(e)}getRegisteredFlags(){return this.registeredFeatureFlags.slice()}isActive(e){return this.flags||(this.flags=this.load()),this.flags.get(e)===u.FeatureFlagState.Active}save(e){this.flags||(this.flags=this.load()),e.merge||this.flags.clear();for(const[t,r]of Object.entries(e.states))this.flags.set(t,r);const t=Array.from(this.flags.entries()).filter((([,e])=>e===u.FeatureFlagState.Active));window.localStorage.setItem("featureFlags",JSON.stringify(Object.fromEntries(t)))}load(){try{const e=window.localStorage.getItem("featureFlags");if(!e)return new Map;const t=JSON.parse(e);if("object"!=typeof t||null===t||Array.isArray(t))return new Map;const r=Object.entries(t).filter((([e,t])=>(yr(e),t===u.FeatureFlagState.Active)));return new Map(r)}catch{return new Map}}}function wr(e){var t;let n=e.baseImplementation||r.g.fetch;const o=[null!=(t=e.middleware)?t:[]].flat().reverse();for(const e of o)n=e.apply(n);return{fetch:n}}class Sr{constructor(e,t,r,n){this.identityApi=e,this.allowUrl=t,this.headerName=r,this.headerValue=n}static create(e){var t,r;const n=function(e){return e.allowUrl?e.allowUrl:e.urlPrefixAllowlist?Ar(e.urlPrefixAllowlist):e.config?Ar([e.config.getString("backend.baseUrl")]):()=>!1}(e),o=(null==(t=e.header)?void 0:t.name)||"authorization",i=(null==(r=e.header)?void 0:r.value)||(e=>`Bearer ${e}`);return new Sr(e.identityApi,n,o,i)}apply(e){return async(t,r)=>{const n=new Request(t,r),{token:o}=await this.identityApi.getCredentials();return!n.headers.get(this.headerName)&&"string"==typeof o&&o&&this.allowUrl(n.url)?(n.headers.set(this.headerName,this.headerValue(o)),e(n)):e(t,r)}}}function Ar(e){const t=e.map((e=>e.replace(/\/$/,"")));return e=>t.some((t=>e===t||e.startsWith(`${t}/`)))}class kr{constructor(e){this.discoveryApi=e}apply(e){return async(t,r)=>{const n=new Request(t,r);if(!n.url.startsWith("plugin://"))return e(t,r);const{hostname:o,pathname:i,search:s,hash:a,username:c,password:l}=new URL(`http://${n.url.substring(9)}`);let u=await this.discoveryApi.getBaseUrl(o);if(c||l){const e=new URL(u),t=`${c}${l?`:${l}`:""}@`;u=`${e.protocol}//${t}${e.host}${e.pathname}`}const p=`${h=u,f=i,f&&"/"!==f?`${h.replace(/\/$/,"")}/${f.replace(/^\//,"")}`:h}${s}${a}`;var h,f,d;return e(p,"string"==typeof t||"object"==typeof(d=t)&&(null==d?void 0:d.constructor)===URL?r:t)}}}class Or{static resolvePluginProtocol(e){return new kr(e.discoveryApi)}static injectIdentityAuth(e){return Sr.create(e)}constructor(){}}var Rr=Object.defineProperty,xr=(e,t,r)=>(((e,t,r)=>{t in e?Rr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class Er{constructor(){xr(this,"requests",[]),xr(this,"subject",new at(this.getCurrentPending()))}request(e){return new Promise(((t,r)=>{this.requests.push({scopes:e,resolve:t,reject:r}),this.subject.next(this.getCurrentPending())}))}resolve(e,t){this.requests=this.requests.filter((r=>!function(e,t){for(const r of t)if(!e.has(r))return!1;return!0}(e,r.scopes)||(r.resolve(t),!1))),this.subject.next(this.getCurrentPending())}reject(e){this.requests.forEach((t=>t.reject(e))),this.requests=[],this.subject.next(this.getCurrentPending())}pending(){return this.subject}getCurrentPending(){const e=0===this.requests.length?void 0:this.requests.slice(1).reduce(((e,t)=>function(e,...t){const r=new Set(e);for(const e of t)for(const t of e)r.add(t);return r}(e,t.scopes)),this.requests[0].scopes);return{scopes:e,resolve:t=>{e&&this.resolve(e,t)},reject:t=>{e&&this.reject(t)}}}}var Pr=Object.defineProperty,jr=(e,t,r)=>(((e,t,r)=>{t in e?Pr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class Ir{constructor(){jr(this,"subject",new at([])),jr(this,"currentRequests",[]),jr(this,"handlerCount",0)}createAuthRequester(e){const t=new Er,r=this.handlerCount;return this.handlerCount++,t.pending().subscribe({next:t=>{const n=this.currentRequests.slice(),o=this.makeAuthRequest(t,e);o?n[r]=o:delete n[r],this.currentRequests=n,this.subject.next(n.filter(Boolean))}}),e=>t.request(e)}makeAuthRequest(e,t){const{scopes:r}=e;if(r)return{provider:t.provider,trigger:async()=>{const n=await t.onAuthRequest(r);e.resolve(n)},reject:()=>{const t=new Error("Login failed, rejected by user");t.name="RejectedError",e.reject(t)}}}authRequest$(){return this.subject}}var Cr=Object.defineProperty,Lr=(e,t,r)=>(((e,t,r)=>{t in e?Cr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);const $r=new Map,Tr=class e{constructor(e,t){this.namespace=e,this.errorApi=t,Lr(this,"subscribers",new Set),Lr(this,"observable",new(l())((e=>(this.subscribers.add(e),()=>{this.subscribers.delete(e)}))))}static create(t){var r;return new e(null!=(r=t.namespace)?r:"",t.errorApi)}static addStorageEventListener(){window.addEventListener("storage",(e=>{var t;for(const[r,n]of $r.entries())(null==(t=e.key)?void 0:t.startsWith(r))&&n.handleStorageChange(e.key)}))}get(e){return this.snapshot(e).value}snapshot(e){let t,r="absent";try{const n=localStorage.getItem(this.getKeyName(e));n&&(t=JSON.parse(n,((e,t)=>("object"==typeof t&&null!==t&&Object.freeze(t),t))),r="present")}catch(t){this.errorApi.post(new Error(`Error when parsing JSON config from storage for: ${e}`))}return{key:e,value:t,presence:r}}forBucket(t){const r=`${this.namespace}/${t}`;return $r.has(r)||$r.set(r,new e(r,this.errorApi)),$r.get(r)}async set(e,t){localStorage.setItem(this.getKeyName(e),JSON.stringify(t)),this.notifyChanges(e)}async remove(e){localStorage.removeItem(this.getKeyName(e)),this.notifyChanges(e)}observe$(t){return e.hasSubscribed||(e.addStorageEventListener(),e.hasSubscribed=!0),this.observable.filter((({key:e})=>e===t))}handleStorageChange(e){if(!(null==e?void 0:e.startsWith(this.namespace)))return;const t=null==e?void 0:e.slice(`${this.namespace}/`.length);t.includes("/")||this.notifyChanges(decodeURIComponent(t))}getKeyName(e){return`${this.namespace}/${encodeURIComponent(e)}`}notifyChanges(e){const t=this.snapshot(e);for(const e of this.subscribers)e.next(t)}};Lr(Tr,"hasSubscribed",!1);let Fr=Tr;const Nr=(0,n.createContext)(void 0);function Mr(){const[e]=(0,R.createRoutesFromChildren)(o().createElement(R.Route,{index:!0,element:o().createElement("div",null)}));return!e.index}const Dr=({pathname:e,search:t,hash:r,attributes:o})=>{const i=(0,u.useAnalytics)();return(0,n.useEffect)((()=>{i.captureEvent("navigate",`${e}${t}${r}`,{attributes:o})}),[i,e,t,r,o]),null},Ur=({routeObjects:e})=>{const{pathname:t,search:r,hash:n}=(0,R.useLocation)(),{params:i,...s}=((e,t)=>{try{const r=(0,R.matchRoutes)(t,{pathname:e}),n=null==r?void 0:r.filter((e=>{var t;return(null==(t=null==e?void 0:e.route.routeRefs)?void 0:t.size)>0})).pop(),o=null==n?void 0:n.route;if(!o)return;if(""===o.path&&"/"!==e)return;let i,s;1===o.routeRefs.size&&(i=o.routeRefs.values().next().value),1===o.plugins.size&&(s=o.plugins.values().next().value);const a=Object.entries((null==n?void 0:n.params)||{}).reduce(((e,[t,r])=>(void 0!==r&&"*"!==t&&(e[t]=r),e)),{});return{extension:"App",pluginId:(null==s?void 0:s.getId())||"root",...i?{routeRef:i.id}:{},_routeNodeType:o.element,params:a}}catch{return}})(t,e)||{params:{}};return o().createElement(u.AnalyticsContext,{attributes:s},o().createElement(Dr,{pathname:t,search:r,hash:n,attributes:i}))};function _r(e){var t;let{pathname:r}=new URL(null!=(t=e.getOptionalString("app.baseUrl"))?t:"/","http://sample.dev");return r=r.replace(/\/*$/,""),r}function qr({component:e,appIdentityProxy:t,children:r}){const[i,s]=(0,n.useState)(),a=_r((0,u.useApi)(u.configApiRef));return i?(t.setTarget(i,{signOutTargetUrl:a||"/"}),o().createElement(o().Fragment,null,r)):o().createElement(e,{onSignInSuccess:s})}function Br(e){const{Router:t,SignInPage:r}=(0,u.useApp)().getComponents(),i=_r((0,u.useApi)(u.configApiRef)),s=`${i}/*`,a=(0,n.useContext)(Nr);if(!a)throw new Error("AppRouter must be rendered within the AppProvider");const{routeObjects:c,appIdentityProxy:l}=a;return r?Mr()?o().createElement(t,null,o().createElement(Ur,{routeObjects:c}),o().createElement(qr,{component:r,appIdentityProxy:l},o().createElement(R.Routes,null,o().createElement(R.Route,{path:s,element:o().createElement(o().Fragment,null,e.children)})))):o().createElement(t,{basename:i},o().createElement(Ur,{routeObjects:c}),o().createElement(qr,{component:r,appIdentityProxy:l},e.children)):(l.setTarget({getUserId:()=>"guest",getIdToken:async()=>{},getProfile:()=>({email:"guest@example.com",displayName:"Guest"}),getProfileInfo:async()=>({email:"guest@example.com",displayName:"Guest"}),getBackstageIdentity:async()=>({type:"user",userEntityRef:"user:default/guest",ownershipEntityRefs:["user:default/guest"]}),getCredentials:async()=>({}),signOut:async()=>{}},{signOutTargetUrl:i||"/"}),Mr()?o().createElement(t,null,o().createElement(Ur,{routeObjects:c}),o().createElement(R.Routes,null,o().createElement(R.Route,{path:s,element:o().createElement(o().Fragment,null,e.children)}))):o().createElement(t,{basename:i},o().createElement(Ur,{routeObjects:c}),e.children))}function Vr(e,t){return()=>({accumulator:e(),visit:t})}function Kr(e){var t;return null==(t=e.props)?void 0:t.children}function zr(e){var t,r,n;if((null==(t=e.props)?void 0:t.path)&&(null==(r=e.props)?void 0:r.element))return null==(n=e.props)?void 0:n.element}(0,u.attachComponentData)(Br,"core.type","AppRouter");const Wr=Vr((()=>new Set),((e,t)=>{const r=(0,u.getComponentData)(t,"core.plugin");r&&e.add(r)})),Hr=e=>{const{children:t}=e,r=(0,u.useApi)(u.featureFlagsApiRef),n="with"in e?r.isActive(e.with):!r.isActive(e.without);return o().createElement(o().Fragment,null,n?t:null)};(0,u.attachComponentData)(Hr,"core.featureFlagged",!0);const Gr={caseSensitive:!1,path:"*",element:"match-all",routeRefs:new Set,plugins:new Set};function Jr(e){var t,r;const n=e;return(null==n?void 0:n.type)?null!=(r=null!=(t=n.type.displayName)?t:n.type.name)?r:String(n.type):String(n)}const Yr=e=>{const t=new Set;return e&&t.add(e),t};function Xr(e,t=new Array){return n.Children.forEach(e,(e=>{if(!(0,n.isValidElement)(e))return;const r=(0,u.getComponentData)(e,"core.mountPoint");if(r){const n=(0,u.getComponentData)(e,"core.plugin");t.push({routeRef:r,plugin:n})}Xr(e.props.children,t)})),t}const Qr=Vr((()=>({paths:new Map,parents:new Map,objects:new Array})),((e,t,r,n)=>{var o,i,s,a,c,l,p;if(null==n?void 0:n.isElementAncestor)return n;if((null==r?void 0:r.props.element)===t)return{...n,isElementAncestor:!0};const h=null==(o=t.props)?void 0:o.path,f=(0,u.getComponentData)(t,"core.mountPoint");if(f&&h)throw new Error(`Path property may not be set directly on a routable extension "${Jr(t)}"`);const d=null!=(s=null==(i=null==n?void 0:n.obj)?void 0:i.children)?s:e.objects;if(void 0!==h){if("string"!=typeof h)throw new Error(`Element path must be a string at "${Jr(t)}"`);const r=h.startsWith("/")?h.slice(1):h,o=t.props.element;if((0,u.getComponentData)(t,"core.gatherMountPoints")){if(o)throw new Error(`Mount point gatherers may not have an element prop "${Jr(t)}"`);const e={path:r,element:"gathered",routeRefs:new Set,caseSensitive:Boolean(null==(a=t.props)?void 0:a.caseSensitive),children:[Gr],plugins:new Set};return d.push(e),{obj:e,gatherPath:r,routeRef:null==n?void 0:n.routeRef,gatherRouteRef:null==n?void 0:n.routeRef}}if(o){const[i,...s]=Xr(o);if(s.length>0)throw new Error(`Route element with path "${h}" may not contain multiple routable extensions`);if(!i)return n;const{routeRef:a,plugin:l}=i,u={path:r,element:"mounted",routeRefs:new Set([a]),caseSensitive:Boolean(null==(c=t.props)?void 0:c.caseSensitive),children:[Gr],plugins:Yr(l)};return d.push(u),e.paths.set(a,r),e.parents.set(a,null==n?void 0:n.routeRef),{obj:u,routeRef:null!=a?a:null==n?void 0:n.routeRef,gatherPath:r,gatherRouteRef:null==n?void 0:n.gatherRouteRef}}}if(f){if(void 0===(null==n?void 0:n.gatherPath))throw new Error(`Routable extension "${Jr(t)}" with mount point "${f}" must be assigned a path`);null==(l=null==n?void 0:n.obj)||l.routeRefs.add(f);const r=(0,u.getComponentData)(t,"core.plugin");return r&&(null==(p=null==n?void 0:n.obj)||p.plugins.add(r)),e.paths.set(f,n.gatherPath),e.parents.set(f,null==n?void 0:n.gatherRouteRef),{...n,routeRef:f}}return n})),Zr=Vr((()=>({paths:new Map,parents:new Map,objects:new Array})),((e,t,r,o)=>{var i,s,a,c,l;if((null==r?void 0:r.props.element)===t)return o;let p=null==o?void 0:o.obj,h=null==o?void 0:o.routeRef,f=null==o?void 0:o.sticky;const d=null==(i=t.props)?void 0:i.path,g=null!=(s=null==p?void 0:p.children)?s:e.objects,v=Boolean(null==(a=t.props)?void 0:a.caseSensitive);let m=null==o?void 0:o.path;if((0,u.getComponentData)(t,"core.gatherMountPoints")){if(!d)throw new Error("Mount point gatherer must have a path");m=d}const y=null==(c=t.props)?void 0:c.element;let b=(0,u.getComponentData)(t,"core.mountPoint");if(!b&&(0,n.isValidElement)(y)&&(b=(0,u.getComponentData)(y,"core.mountPoint")),b){let r=d;if(m&&(r?m=void 0:r=m),!r)throw new Error("Mounted routable extension must have a path");e.paths.set(b,r),h&&f?(e.parents.set(b,h),d&&(h=b,f=!1)):(e.parents.set(b,h),h=b),d?(p={caseSensitive:v,path:d,element:"mounted",routeRefs:new Set([b]),children:[Gr],plugins:Yr((0,u.getComponentData)(t.props.element,"core.plugin"))},g.push(p)):null==p||p.routeRefs.add(b)}if((0,u.getComponentData)(t,"core.gatherMountPoints")&&(f=!0),(0,u.getComponentData)(t,"core.gatherMountPoints")){if(!d)throw new Error("Mount point gatherer must have a path");b||(p={caseSensitive:v,path:d,element:"gathered",routeRefs:new Set,children:[Gr],plugins:(null==(l=null==o?void 0:o.obj)?void 0:l.plugins)||new Set},g.push(p))}return{obj:p,path:m,routeRef:h,sticky:f}})),en=Vr((()=>new Set),((e,t)=>{if(t.type===Hr){const r=t.props;e.add("with"in r?r.with:r.without)}})),tn=(0,a.getOrCreateGlobalSingleton)("route-ref-type",(()=>Symbol("route-ref-type")));function rn(e){return"absolute"===e[tn]}function nn(e){return"sub"===e[tn]}function on(...e){const t=e.join("/").replace(/\/\/+/g,"/");return"/"!==t&&t.endsWith("/")?t.slice(0,-1):t}class sn{constructor(e,t,r,n,o){this.routePaths=e,this.routeParents=t,this.routeObjects=r,this.routeBindings=n,this.appBasePath=o}resolve(e,t){const[r,n]=function(e,t,r){let n,o="";if(rn(e))n=e;else if(nn(e))n=e.parent,o=e.path;else{if("external"!==e[tn])throw e[tn]?new Error(`Unknown or invalid route ref type, ${e[tn]}`):new Error(`Unknown object passed to useRouteRef, got ${e}`);{const t=r.get(e);if(!t)return[void 0,""];if(rn(t))n=t;else{if(!nn(t))throw new Error(`ExternalRouteRef was bound to invalid target, ${t}`);n=t.parent,o=t.path}}}if(!n)return[void 0,""];const i=t.get(n);return void 0===i?[void 0,""]:[n,on(i,o)]}(e,this.routePaths,this.routeBindings);if(!r)return;let o;o="string"==typeof t?this.trimPath(t):t.pathname?{...t,pathname:this.trimPath(t.pathname)}:t;const i=this.appBasePath+function(e,t,r,n,o){var i;const s=null!=(i=(0,R.matchRoutes)(o,t))?i:[],a=Array();let c=-1;for(let t=e;t&&(c=s.findIndex((e=>e.route.routeRefs.has(t))),-1===c);t=n.get(t))a.unshift(t);return 0===a.length&&(c-=1),`${on(-1===c?"":s[c].pathname,...a.slice(0,-1).map((t=>{const n=r.get(t);if(void 0===n)throw new Error(`No path for ${t}`);if(n.includes(":"))throw new Error(`Cannot route to ${e} with parent ${t} as it has parameters`);return n})))}/`}(r,o,this.routePaths,this.routeParents,this.routeObjects);return(...[e])=>{const t=e&&I()(e,(e=>"string"==typeof e?e.replaceAll(/[&?#;\/]/g,(e=>encodeURIComponent(e))):e));return on(i,(0,R.generatePath)(n,t))}}trimPath(e){return e&&e.startsWith(this.appBasePath)?e.slice(this.appBasePath.length):e}}const an=(0,a.createVersionedContext)("routing-context"),cn=({routePaths:e,routeParents:t,routeObjects:r,routeBindings:n,basePath:i="",children:s})=>{const c=new sn(e,t,r,n,i),l=(0,a.createVersionedValueMap)({1:c});return o().createElement(an.Provider,{value:l},s)},ln=(0,a.createVersionedContext)("app-context"),un=({appContext:e,children:t})=>{const r=(0,a.createVersionedValueMap)({1:e});return o().createElement(ln.Provider,{value:r,children:t})};var pn=Object.defineProperty,hn=(e,t,r)=>(((e,t,r)=>{t in e?pn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);function fn(e){return new Error(`Tried to access IdentityApi ${e} before app was loaded`)}function dn(e){console.warn(`WARNING: Call to ${e} is deprecated and will break in the future`)}class gn{constructor(){hn(this,"target"),hn(this,"waitForTarget"),hn(this,"resolveTarget",(()=>{})),hn(this,"signOutTargetUrl","/"),this.waitForTarget=new Promise((e=>{this.resolveTarget=e}))}setTarget(e,t){this.target=e,this.signOutTargetUrl=t.signOutTargetUrl,this.resolveTarget(e)}getUserId(){if(!this.target)throw fn("getUserId");if(!this.target.getUserId)throw new Error("IdentityApi does not implement getUserId");return dn("getUserId"),this.target.getUserId()}getProfile(){if(!this.target)throw fn("getProfile");if(!this.target.getProfile)throw new Error("IdentityApi does not implement getProfile");return dn("getProfile"),this.target.getProfile()}async getProfileInfo(){return this.waitForTarget.then((e=>e.getProfileInfo()))}async getBackstageIdentity(){const e=await this.waitForTarget.then((e=>e.getBackstageIdentity()));return e.userEntityRef.match(/^.*:.*\/.*$/)||console.warn(`WARNING: The App IdentityApi provided an invalid userEntityRef, '${e.userEntityRef}'. It must be a full Entity Reference of the form '<kind>:<namespace>/<name>'.`),e}async getCredentials(){return this.waitForTarget.then((e=>e.getCredentials()))}async getIdToken(){return this.waitForTarget.then((e=>{if(!e.getIdToken)throw new Error("IdentityApi does not implement getIdToken");return dn("getIdToken"),e.getIdToken()}))}async signOut(){await this.waitForTarget.then((e=>e.signOut())),window.location.href=this.signOutTargetUrl}}const vn=()=>{const e=(0,n.useMemo)((()=>window.matchMedia("(prefers-color-scheme: dark)")),[]),[t,r]=(0,n.useState)(e.matches);return(0,n.useEffect)((()=>{const t=e=>{r(e.matches)};return e.addListener(t),()=>{e.removeListener(t)}}),[e]),t};function mn({children:e}){const t=(0,u.useApi)(u.appThemeApiRef),r=function(e,t,r){if(void 0!==e){const t=r.find((t=>t.id===e));if(t)return t}if(t){const e=r.find((e=>"dark"===e.variant));if(e)return e}return r.find((e=>"light"===e.variant))||r[0]}((0,C.A)(t.activeThemeId$(),t.getActiveThemeId()),!!Boolean(window.matchMedia)&&vn(),t.getInstalledThemes());if(!r)throw new Error("App has no themes");return o().createElement(r.Provider,{children:e})}const yn=async()=>function(e="__APP_INJECTED_RUNTIME_CONFIG__"){const t=[{context:"app-config.yaml",data:{app:{title:"Janus IDP Backstage Showcase",baseUrl:"http://localhost:3000"},ocm:{clientId:"foo",clientSecret:"bar"},organization:{name:"local"},backend:{baseUrl:"http://localhost:7007"},auth:{environment:"development"},integrations:{}}}];if(!t)throw new Error("No static configuration provided");if(!Array.isArray(t))throw new Error("Static configuration has invalid format");const r=t.slice();if(e!=="__app_injected_runtime_config__".toLocaleUpperCase("en-US"))try{const t=JSON.parse(e);Array.isArray(t)?r.push(...t):r.push({data:t,context:"env"})}catch(e){throw new Error(`Failed to load runtime configuration, ${e}`)}const n=window.__APP_CONFIG__;return n&&r.push({context:"window",data:n}),r}();var bn=Object.defineProperty;class wn{constructor(){var e;((e,t,r)=>{t in e?bn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(this,"symbol"!=typeof(e="apis")?e+"":e,[])}add(e,t){return this.apis.push([e.id,t]),t}build(){return new Sn(new Map(this.apis))}}class Sn{constructor(e){this.apis=e}static builder(){return new wn}static from(e){return new Sn(new Map(e.map((([e,t])=>[e.id,t]))))}static with(e,t){return new Sn(new Map([[e.id,t]]))}with(e,t){return new Sn(new Map([...this.apis,[e.id,t]]))}get(e){return this.apis.get(e.id)}}function An(e){const t=new Map;return e&&e({bind:(e,r)=>{for(const[n,o]of Object.entries(r)){const r=e[n];if(!r)throw new Error(`Key ${n} is not an existing external route`);if(!o&&!r.optional)throw new Error(`External route ${n} is required but was undefined`);o&&t.set(r,o)}}}),t}var kn,On,Rn,xn=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},En=(e,t,r)=>(xn(e,t,"read from private field"),r?r.call(e):t.get(e)),Pn=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},jn=(e,t,r,n)=>(xn(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);const In="language",Cn="en";kn=new WeakMap,On=new WeakMap,Rn=new WeakMap;let Ln=class e{constructor(e,t){Pn(this,kn,void 0),Pn(this,On,void 0),Pn(this,Rn,void 0),jn(this,kn,e),jn(this,On,t),jn(this,Rn,new at({language:En(this,On)}))}static create(t){var r,n;const o=null!=(r=null==t?void 0:t.availableLanguages)?r:[Cn];if(o.length!==new Set(o).size)throw new Error(`Supported languages may not contain duplicates, got '${o.join("', '")}'`);if(!o.includes(Cn))throw new Error(`Supported languages must include '${Cn}'`);const i=null!=(n=null==t?void 0:t.defaultLanguage)?n:Cn;if(!o.includes(i))throw new Error(`Initial language must be one of the supported languages, got '${i}'`);return new e(o,i)}static createWithStorage(t){const r=e.create(t);if(!window.localStorage)return r;const n=window.localStorage.getItem(In),{languages:o}=r.getAvailableLanguages();return n&&o.includes(n)&&r.setLanguage(n),r.language$().subscribe((({language:e})=>{e!==window.localStorage.getItem(In)&&window.localStorage.setItem(In,e)})),window.addEventListener("storage",(e=>{var t;if(e.key===In){const e=null!=(t=localStorage.getItem(In))?t:void 0;e&&r.setLanguage(e)}})),r}getAvailableLanguages(){return{languages:En(this,kn).slice()}}setLanguage(e){const t=null!=e?e:Cn;if(t!==En(this,On)){if(t&&!En(this,kn).includes(t))throw new Error(`Failed to change language to '${t}', available languages are '${En(this,kn).join("', '")}'`);jn(this,On,t),En(this,Rn).next({language:t})}}getLanguage(){return{language:En(this,On)}}language$(){return En(this,Rn)}};function $n(e){const t=e;if("@backstage/TranslationRef"!==t.$$type)throw new Error(`Invalid translation ref, bad type '${t.$$type}'`);if("v1"!==t.version)throw new Error(`Invalid translation ref, bad version '${t.version}'`);return t}var Tn,Fn,Nn,Mn,Dn,Un,_n,qn,Bn,Vn,Kn,zn,Wn,Hn,Gn,Jn,Yn=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},Xn=(e,t,r)=>(Yn(e,t,"read from private field"),r?r.call(e):t.get(e)),Qn=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},Zn=(e,t,r,n)=>(Yn(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),eo=(e,t,r)=>(Yn(e,t,"access private method"),r);function to(e){return Object.fromEntries(Object.entries(e).filter((e=>null!==e[1])))}class ro{constructor(e){this.onLoad=e,Qn(this,Mn),Qn(this,Tn,new Set),Qn(this,Fn,new Map),Qn(this,Nn,new Map)}addTranslationResource(e){const t=function(e){const t=e;if("@backstage/TranslationResource"!==t.$$type)throw new Error(`Invalid translation resource, bad type '${t.$$type}'`);if("v1"!==t.version)throw new Error(`Invalid translation resource, bad version '${t.version}'`);return t}(e);for(const e of t.resources){const r=eo(this,Mn,Dn).call(this,e.language,t.id);Xn(this,Nn).has(r)||Xn(this,Nn).set(r,e.loader)}}needsLoading(e,t){const r=eo(this,Mn,Dn).call(this,e,t);return!!Xn(this,Nn).get(r)&&!Xn(this,Tn).has(r)}async load(e,t){const r=eo(this,Mn,Dn).call(this,e,t),n=Xn(this,Nn).get(r);if(!n)return;if(Xn(this,Tn).has(r))return;const o=Xn(this,Fn).get(r);if(o)return void await o;const i=n().then((n=>{this.onLoad({language:e,namespace:t,messages:n.messages}),Xn(this,Tn).add(r)}),(e=>{throw Xn(this,Tn).add(r),e}));Xn(this,Fn).set(r,i),await i}}Tn=new WeakMap,Fn=new WeakMap,Nn=new WeakMap,Mn=new WeakSet,Dn=function(e,t){return`${e}/${t}`},Un=new WeakMap,_n=new WeakMap,qn=new WeakMap,Bn=new WeakMap,Vn=new WeakMap,Kn=new WeakSet,zn=function(e){Xn(this,qn)!==e&&(Zn(this,qn,e),Xn(this,Un).changeLanguage(e),Xn(this,Vn).forEach((e=>e())))},Wn=new WeakSet,Hn=function(e){return Xn(this,_n).needsLoading(Xn(this,qn),e.id)?{ready:!1}:{ready:!0,t:Xn(this,Un).getFixedT(null,e.id)}},Gn=new WeakSet,Jn=function(e){if(Xn(this,Bn).has(e.id))return;Xn(this,Bn).add(e.id);const t=e.getDefaultMessages();Xn(this,Un).addResourceBundle(Cn,e.id,t,!0,!1);const r=e.getDefaultResource();r&&Xn(this,_n).addTranslationResource(r)};let no=class e{constructor(e,t,r){Qn(this,Kn),Qn(this,Wn),Qn(this,Gn),Qn(this,Un,void 0),Qn(this,_n,void 0),Qn(this,qn,void 0),Qn(this,Bn,new Set),Qn(this,Vn,new Set),Zn(this,Un,e),Zn(this,_n,t),Zn(this,qn,r)}static create(t){const{languages:r}=t.languageApi.getAvailableLanguages(),n=Me({fallbackLng:Cn,supportedLngs:r,interpolation:{escapeValue:!1},ns:[],defaultNS:!1,fallbackNS:!1,initImmediate:!1});if(n.init(),!n.isInitialized)throw new Error("i18next was unexpectedly not initialized");const{language:o}=t.languageApi.getLanguage();o!==Cn&&n.changeLanguage(o);const i=new ro((e=>{n.addResourceBundle(e.language,e.namespace,to(e.messages),!1,!0)})),s=(null==t?void 0:t.resources)||[];for(let e=s.length-1;e>=0;e--){const t=s[e];"@backstage/TranslationResource"===t.$$type?i.addTranslationResource(t):"@backstage/TranslationMessages"===t.$$type&&n.addResourceBundle(Cn,t.id,to(t.messages),!0,!1)}const a=new e(n,i,t.languageApi.getLanguage().language);return t.languageApi.language$().subscribe((({language:e})=>{var t;eo(t=a,Kn,zn).call(t,e)})),a}getTranslation(e){const t=$n(e);return eo(this,Gn,Jn).call(this,t),eo(this,Wn,Hn).call(this,t)}translation$(e){const t=$n(e);return eo(this,Gn,Jn).call(this,t),new(l())((e=>{let r={};const n=()=>{r={};const n=r;Xn(this,_n).load(Xn(this,qn),t.id).then((()=>{if(n===r){const r=eo(this,Wn,Hn).call(this,t);r.ready&&e.next(r)}}),(t=>{n===r&&e.error(Array.isArray(t)?t[0]:t)}))},o=()=>{const r=eo(this,Wn,Hn).call(this,t);r.ready?e.next(r):n()};return Xn(this,_n).needsLoading(Xn(this,qn),t.id)&&n(),Xn(this,Vn).add(o),()=>{Xn(this,Vn).delete(o)}}))}};function oo(e){const t=new URL(e);return t.protocol=document.location.protocol,t.hostname=document.location.hostname,t.port=document.location.port,t.toString().replace(/\/$/,"")}var io,so=Object.defineProperty,ao=(e,t,r)=>(((e,t,r)=>{t in e?so(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r),co=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};class lo{constructor(e){this.app=e}getPlugins(){return this.app.getPlugins()}getSystemIcon(e){return this.app.getSystemIcon(e)}getSystemIcons(){return this.app.getSystemIcons()}getComponents(){return this.app.getComponents()}}class uo{constructor(e){var t,r,n,o,i,s,a,c,l;ao(this,"apiHolder"),ao(this,"configApi"),ao(this,"apis"),ao(this,"icons"),ao(this,"plugins"),ao(this,"featureFlags"),ao(this,"components"),ao(this,"themes"),ao(this,"configLoader"),ao(this,"defaultApis"),ao(this,"bindRoutes"),ao(this,"appLanguageApi"),ao(this,"translationResources"),ao(this,"appIdentityProxy",new gn),ao(this,"apiFactoryRegistry"),((e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,!1)})(this,io),this.apis=null!=(t=e.apis)?t:[],this.icons=e.icons,this.plugins=new Set(null!=(r=e.plugins)?r:[]),this.featureFlags=null!=(n=e.featureFlags)?n:[],this.components=e.components,this.themes=e.themes,this.configLoader=null!=(o=e.configLoader)?o:yn,this.defaultApis=null!=(i=e.defaultApis)?i:[],this.bindRoutes=e.bindRoutes,this.apiFactoryRegistry=new We,this.appLanguageApi=Ln.createWithStorage({defaultLanguage:null==(s=e.__experimentalTranslations)?void 0:s.defaultLanguage,availableLanguages:null==(a=e.__experimentalTranslations)?void 0:a.availableLanguages}),this.translationResources=null!=(l=null==(c=e.__experimentalTranslations)?void 0:c.resources)?l:[]}getPlugins(){return Array.from(this.plugins)}getSystemIcon(e){return this.icons[e]}getSystemIcons(){return this.icons}getComponents(){return this.components}createRoot(e){const t=this.getProvider();return()=>o().createElement(t,null,e)}getProvider(){if(co(this,e=io,"read from private field"),e.get(this))throw new Error("app.getProvider() or app.createRoot() has already been called, and can only be called once");var e;((e,t,r,n)=>{co(e,t,"write to private field"),t.set(e,true)})(this,io);const t=new lo(this);let r=!1;return({children:e})=>{const i=(0,n.useRef)(!0),s=(0,n.useMemo)((()=>cr.createWithStorage(this.themes)),[]),{routing:a,featureFlags:c,routeBindings:l}=(0,n.useMemo)((()=>{const t=Mr();t&&console.warn("\nDEPRECATION WARNING: React Router Beta is deprecated and support for it will be removed in a future release.\n                     Please migrate to use React Router v6 stable.\n                     See https://backstage.io/docs/tutorials/react-router-stable-migration\n");const r=function(e){const t={};for(const r in e.collectors)e.collectors.hasOwnProperty(r)&&(t[r]=e.collectors[r]());const r=[{node:n.Children.toArray(e.root),parent:void 0,contexts:{}}];for(;0!==r.length;){const{node:o,parent:i,contexts:s}=r.shift();n.Children.forEach(o,(o=>{if(!(0,n.isValidElement)(o))return;const a={};for(const e in t)if(t.hasOwnProperty(e)){const r=t[e];a[e]=r.visit(r.accumulator,o,i,s[e])}for(const t of e.discoverers){const e=t(o);e&&r.push({node:e,parent:o,contexts:a})}}))}return Object.fromEntries(Object.entries(t).map((([e,t])=>[e,t.accumulator])))}({root:e,discoverers:[Kr,zr],collectors:{routing:t?Zr:Qr,collectedPlugins:Wr,featureFlags:en}});return r.collectedPlugins.forEach((e=>this.plugins.add(e))),this.verifyPlugins(this.plugins),this.getApiHolder(),{...r,routeBindings:An(this.bindRoutes)}}),[e]);r||(r=!0,function(e,t){const r=new Set(t.values());r.delete(void 0);for(const n of t.keys()){if(r.has(n))continue;let o=n,i="";for(;o;){const r=e.get(o);if(void 0===r)throw new Error(`No path for ${o}`);i=on(r,i),o=t.get(o)}const s=i.match(/:(\w+)/g);if(s)for(let e=0;e<s.length;e++)for(let t=e+1;t<s.length;t++)if(s[t]===s[e])throw new Error(`Parameter ${s[t]} is duplicated in path ${i}`)}}(a.paths,a.parents),function(e,t){for(const r of t)if(r.externalRoutes)for(const[t,n]of Object.entries(r.externalRoutes))if(!n.optional&&!e.has(n))throw new Error(`External route '${t}' of the '${r.getId()}' plugin must be bound to a target route. See https://backstage.io/link?bind-routes for details.`)}(l,this.plugins));const p=function(e,t,r){var n;const i=Boolean(e),s=(0,x.A)(e||(()=>Promise.resolve([])));let a;if(i&&s.loading){const{Progress:e}=t;a=o().createElement(e,null)}else if(s.error){const{BootErrorPage:e}=t;a=o().createElement(e,{step:"load-config",error:s.error})}const{ThemeProvider:c=mn}=t;return a?{node:o().createElement(qe,{apis:Sn.with(u.appThemeApiRef,r)},o().createElement(c,null,a))}:{api:O.fromConfigs((null==(n=s.value)?void 0:n.length)?function(e){const t=O.fromConfigs(e),r=t.getOptionalString("app.baseUrl"),n=t.getOptionalString("backend.baseUrl");let o,i,s=e;if(r&&n&&new URL(r).origin===new URL(n).origin){const e=oo(n);n!==e&&(o=e)}if(r){const e=oo(r);r!==e&&(i=e)}return(i||o)&&(s=s.concat({data:{app:i&&{baseUrl:i},backend:o&&{baseUrl:o}},context:"relative-resolver"})),s}(s.value):[])}}(this.configLoader,this.components,s),h="api"in p;if(h){const{api:e}=p;this.configApi=e}if("node"in p)return p.node;if(h&&i.current){i.current=!1;const e=this.getApiHolder().get(u.featureFlagsApiRef);if(e){for(const t of this.featureFlags)e.registerFlag({...t,pluginId:""});for(const t of this.plugins.values())if("getFeatureFlags"in t)for(const r of t.getFeatureFlags())e.registerFlag({name:r.name,pluginId:t.getId()});else for(const r of t.output())"feature-flag"===r.type&&e.registerFlag({name:r.name,pluginId:t.getId()});const t=e.getRegisteredFlags(),r=new Set(t.map((e=>e.name)));for(const t of c)r.has(t)||e.registerFlag({name:t,pluginId:""})}}const{ThemeProvider:f=mn,Progress:d}=this.components;return o().createElement(qe,{apis:this.getApiHolder()},o().createElement(un,{appContext:t},o().createElement(f,null,o().createElement(cn,{routePaths:a.paths,routeParents:a.parents,routeObjects:a.objects,routeBindings:l,basePath:(g=p.api,Mr()?_r(g):"")},o().createElement(Nr.Provider,{value:{routeObjects:a.objects,appIdentityProxy:this.appIdentityProxy}},o().createElement(n.Suspense,{fallback:o().createElement(d,null)},e))))));var g}}getRouter(){return Br}getApiHolder(){if(this.apiHolder){for(const e of this.plugins)for(const t of e.getApis())this.apiFactoryRegistry.get(t.api)||this.apiFactoryRegistry.register("default",t);return Ve.validateFactories(this.apiFactoryRegistry,this.apiFactoryRegistry.getAllApis()),this.apiHolder}this.apiFactoryRegistry.register("static",{api:u.appThemeApiRef,deps:{},factory:()=>cr.createWithStorage(this.themes)}),this.apiFactoryRegistry.register("static",{api:u.configApiRef,deps:{},factory:()=>{if(!this.configApi)throw new Error("Tried to access config API before config was loaded");return this.configApi}}),this.apiFactoryRegistry.register("static",{api:u.identityApiRef,deps:{},factory:()=>this.appIdentityProxy}),this.apiFactoryRegistry.register("static",{api:P,deps:{},factory:()=>this.appLanguageApi}),this.apiFactoryRegistry.register("default",{api:E,deps:{languageApi:P},factory:({languageApi:e})=>no.create({languageApi:e,resources:this.translationResources})}),this.apiFactoryRegistry.register("default",{api:u.featureFlagsApiRef,deps:{},factory:()=>new br});for(const e of this.defaultApis)this.apiFactoryRegistry.register("default",e);for(const e of this.plugins)for(const t of e.getApis())if(!this.apiFactoryRegistry.register("default",t))throw new Error(`Plugin ${e.getId()} tried to register duplicate or forbidden API factory for ${t.api}`);for(const e of this.apis)if(!this.apiFactoryRegistry.register("app",e))throw new Error(`Duplicate or forbidden API factory for ${e.api} in app`);return Ve.validateFactories(this.apiFactoryRegistry,this.apiFactoryRegistry.getAllApis()),this.apiHolder=new Ve(this.apiFactoryRegistry),this.apiHolder}verifyPlugins(e){const t=new Set;for(const r of e){const e=r.getId();if(t.has(e))throw new Error(`Duplicate plugin found '${e}'`);t.add(e)}}}function po(e){return new uo(e)}io=new WeakMap;let ho=!1;const fo=e=>{const t=(0,u.useApp)(),{NotFoundErrorPage:r}=t.getComponents(),i=(0,n.useMemo)((()=>Mr()),[]),s=[...(0,u.useElementFilter)(e.children,(e=>e.getElements().flatMap((e=>{var t;let r=e.props.path;if(""===r)return[];r=null!=(t=null==r?void 0:r.replace(/\/\*$/,""))?t:"/";let n=i?e:e.props.element;return i||n||(n=e,ho||(console.warn("DEPRECATION WARNING: All elements within <FlatRoutes> must be of type <Route> with an element prop. Existing usages of <Navigate key=[path] to=[to] /> should be replaced with <Route path=[path] element={<Navigate to=[to] />} />."),ho=!0)),[{path:r,element:n,children:e.props.children?[{path:"/"===r?"/":"*",element:e.props.children}]:void 0}]})).sort(((e,t)=>t.path.localeCompare(e.path))).map((e=>({...e,path:"/"===e.path?"/":`${e.path}/*`}))))),{path:"*",element:o().createElement(r,null)}];return(0,R.useRoutes)(s)};(0,u.attachComponentData)(fo,"core.type","FlatRoutes")},6924:(e,t,r)=>{var n=r(85250),o=r(20999)((function(e,t,r,o){n(e,t,r,o)}));e.exports=o},66691:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNavigator=t.isBrowser=t.off=t.on=t.noop=void 0,t.noop=function(){},t.on=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];e&&e.addEventListener&&e.addEventListener.apply(e,t)},t.off=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];e&&e.removeEventListener&&e.removeEventListener.apply(e,t)},t.isBrowser="undefined"!=typeof window,t.isNavigator="undefined"!=typeof navigator},18367:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(28437),o=r(66691).isBrowser?n.useLayoutEffect:n.useEffect;t.default=o},39080:(e,t,r)=>{"use strict";var n=r(31635),o=r(28437),i=n.__importDefault(r(18367));t.A=function(e,t){var r=o.useState(t),n=r[0],s=r[1];return i.default((function(){var t=e.subscribe(s);return function(){return t.unsubscribe()}}),[e]),n}},16064:(e,t,r)=>{e.exports=r(43619).Observable},43619:(e,t)=>{"use strict";t.Observable=void 0;const r=e=>Boolean(Symbol[e]),n=e=>r(e)?Symbol[e]:"@@"+e,o=n("iterator"),i=n("observable"),s=n("species");function a(e,t){let r=e[t];if(null!=r){if("function"!=typeof r)throw new TypeError(r+" is not a function");return r}}function c(e){let t=e.constructor;return void 0!==t&&(t=t[s],null===t&&(t=void 0)),void 0!==t?t:v}function l(e){l.log?l.log(e):setTimeout((()=>{throw e}))}function u(e){Promise.resolve().then((()=>{try{e()}catch(e){l(e)}}))}function p(e){let t=e._cleanup;if(void 0!==t&&(e._cleanup=void 0,t))try{if("function"==typeof t)t();else{let e=a(t,"unsubscribe");e&&e.call(t)}}catch(e){l(e)}}function h(e){e._observer=void 0,e._queue=void 0,e._state="closed"}function f(e,t,r){e._state="running";let n=e._observer;try{let o=a(n,t);switch(t){case"next":o&&o.call(n,r);break;case"error":if(h(e),!o)throw r;o.call(n,r);break;case"complete":h(e),o&&o.call(n)}}catch(e){l(e)}"closed"===e._state?p(e):"running"===e._state&&(e._state="ready")}function d(e,t,r){if("closed"!==e._state){if("buffering"!==e._state)return"ready"!==e._state?(e._state="buffering",e._queue=[{type:t,value:r}],void u((()=>function(e){let t=e._queue;if(t){e._queue=void 0,e._state="ready";for(let r=0;r<t.length&&(f(e,t[r].type,t[r].value),"closed"!==e._state);++r);}}(e)))):void f(e,t,r);e._queue.push({type:t,value:r})}}class g{constructor(e,t){this._cleanup=void 0,this._observer=e,this._queue=void 0,this._state="initializing";let r=this,n={get closed(){return"closed"===r._state},next(e){d(r,"next",e)},error(e){d(r,"error",e)},complete(){d(r,"complete")}};try{this._cleanup=t.call(void 0,n)}catch(e){n.error(e)}"initializing"===this._state&&(this._state="ready")}get closed(){return"closed"===this._state}unsubscribe(){"closed"!==this._state&&(h(this),p(this))}}class v{constructor(e){if(!(this instanceof v))throw new TypeError("Observable cannot be called as a function");if("function"!=typeof e)throw new TypeError("Observable initializer must be a function");this._subscriber=e}subscribe(e){return"object"==typeof e&&null!==e||(e={next:e,error:arguments[1],complete:arguments[2]}),new g(e,this._subscriber)}forEach(e){return new Promise(((t,r)=>{if("function"!=typeof e)return void r(new TypeError(e+" is not a function"));function n(){o.unsubscribe(),t()}let o=this.subscribe({next(t){try{e(t,n)}catch(e){r(e),o.unsubscribe()}},error:r,complete:t})}))}map(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(c(this))((t=>this.subscribe({next(r){try{r=e(r)}catch(e){return t.error(e)}t.next(r)},error(e){t.error(e)},complete(){t.complete()}})))}filter(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(c(this))((t=>this.subscribe({next(r){try{if(!e(r))return}catch(e){return t.error(e)}t.next(r)},error(e){t.error(e)},complete(){t.complete()}})))}reduce(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");let t=c(this),r=arguments.length>1,n=!1,o=arguments[1];return new t((t=>this.subscribe({next(i){let s=!n;if(n=!0,!s||r)try{o=e(o,i)}catch(e){return t.error(e)}else o=i},error(e){t.error(e)},complete(){if(!n&&!r)return t.error(new TypeError("Cannot reduce an empty sequence"));t.next(o),t.complete()}})))}async all(){let e=[];return await this.forEach((t=>e.push(t))),e}concat(...e){let t=c(this);return new t((r=>{let n,o=0;return function i(s){n=s.subscribe({next(e){r.next(e)},error(e){r.error(e)},complete(){o===e.length?(n=void 0,r.complete()):i(t.from(e[o++]))}})}(this),()=>{n&&(n.unsubscribe(),n=void 0)}}))}flatMap(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");let t=c(this);return new t((r=>{let n=[],o=this.subscribe({next(o){if(e)try{o=e(o)}catch(e){return r.error(e)}let s=t.from(o).subscribe({next(e){r.next(e)},error(e){r.error(e)},complete(){let e=n.indexOf(s);e>=0&&n.splice(e,1),i()}});n.push(s)},error(e){r.error(e)},complete(){i()}});function i(){o.closed&&0===n.length&&r.complete()}return()=>{n.forEach((e=>e.unsubscribe())),o.unsubscribe()}}))}[i](){return this}static from(e){let t="function"==typeof this?this:v;if(null==e)throw new TypeError(e+" is not an object");let n=a(e,i);if(n){let r=n.call(e);if(Object(r)!==r)throw new TypeError(r+" is not an object");return function(e){return e instanceof v}(r)&&r.constructor===t?r:new t((e=>r.subscribe(e)))}if(r("iterator")&&(n=a(e,o),n))return new t((t=>{u((()=>{if(!t.closed){for(let r of n.call(e))if(t.next(r),t.closed)return;t.complete()}}))}));if(Array.isArray(e))return new t((t=>{u((()=>{if(!t.closed){for(let r=0;r<e.length;++r)if(t.next(e[r]),t.closed)return;t.complete()}}))}));throw new TypeError(e+" is not observable")}static of(...e){return new("function"==typeof this?this:v)((t=>{u((()=>{if(!t.closed){for(let r=0;r<e.length;++r)if(t.next(e[r]),t.closed)return;t.complete()}}))}))}static get[s](){return this}}t.Observable=v,Object.defineProperty(v,Symbol("extensions"),{value:{symbol:i,hostReportError:l},configurable:!0})}}]);
//# sourceMappingURL=5926.1f3d997f.chunk.js.map