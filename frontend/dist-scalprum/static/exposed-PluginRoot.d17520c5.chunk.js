(self.webpackChunkplugin_web_rca=self.webpackChunkplugin_web_rca||[]).push([[879],{15092:(e,t,n)=>{"use strict";n.d(t,{S:()=>p});var i=n(74848),r=(n(28437),n(94066)),a=n(24705),s=n(22097),c=n(54392),o=n(81067);const d=({incidents:e,web_rca_url:t,message:n})=>{if(n)return(0,i.jsx)(r.nO,{title:"Web RCA Incidents",children:(0,i.jsx)(c.A,{variant:"body1",children:"Error fetching incidents: "+n})});if(!e||!e.items||0===e.items.length)return(0,i.jsx)(r.nO,{title:"Web RCA Incidents",children:(0,i.jsx)(c.A,{variant:"body1",children:'"Error fetching incidents: No Incidents"'})});if(!e||!e.items||0===e.items.length)return(0,i.jsx)(r.nO,{title:"Web RCA Incidents",children:(0,i.jsx)(c.A,{variant:"body1",children:"Error fetching incidents: "+n})});const a=e.items.map((e=>({incident_id:(0,i.jsx)("a",{target:"_blank",rel:"noreferrer",href:`${t}/incident/${e.incident_id}/details`,children:e.incident_id}),summary:e.summary,description:e.description})));return(0,i.jsx)(r.XI,{title:"Web RCA Incidents",options:{search:!0,paging:!0,pageSize:10},columns:[{title:"ID",field:"incident_id"},{title:"Summary",field:"summary"},{title:"Description",field:"description"}],data:a})},l="web-rca/product-name",p=({product:e})=>{const t=(0,s.useApi)(s.configApiRef),n=(0,o.u)(),{value:c,loading:p,error:m}=(0,a.A)((async()=>{let i="";return e&&(i=e),n&&(i=n.entity.metadata.name,n.entity.spec&&n.entity.spec.system&&"string"==typeof n.entity.spec.system&&(i=n.entity.spec.system),n.entity.metadata.annotations&&l in n.entity.metadata.annotations&&(i=n.entity.metadata.annotations[l])),""===i?"No product based on entity":await fetch(`${t.getString("backend.baseUrl")}/api/plugin-web-rca-backend/incidents`,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify({products:i})}).catch((e=>e)).then((e=>e.json()))}),[]);return p?(0,i.jsx)(r.ke,{}):m?(0,i.jsx)(r._1,{error:m}):c?"string"==typeof c?(0,i.jsx)(d,{message:c,web_rca_url:t.getString("ocm.webRcaUIUrl")}):(0,i.jsx)(d,{incidents:c,web_rca_url:t.getString("ocm.webRcaUIUrl")}):(0,i.jsx)(r._1,{error:{name:"Foo",message:"Foo"}})}},66477:(e,t,n)=>{"use strict";n.r(t),n.d(t,{WebRCAFetchComponent:()=>c.S,WebRcaPage:()=>s,webRcaPlugin:()=>a});var i=n(22097);const r=(0,i.createRouteRef)({id:"web-rca"}),a=(0,i.createPlugin)({id:"web-rca",routes:{root:r}}),s=a.provide((0,i.createRoutableExtension)({name:"WebRcaPage",component:()=>n.e(9623).then(n.bind(n,99623)).then((e=>e.WebRCAComponent)),mountPoint:r}));var c=n(15092)},42634:()=>{}}]);
//# sourceMappingURL=exposed-PluginRoot.d17520c5.chunk.js.map